var $i=Object.defineProperty,Ci=Object.defineProperties;var Ei=Object.getOwnPropertyDescriptors;var Xe=Object.getOwnPropertySymbols;var $o=Object.prototype.hasOwnProperty,Co=Object.prototype.propertyIsEnumerable;var Eo=(t,e,n)=>e in t?$i(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,l=(t,e)=>{for(var n in e||(e={}))$o.call(e,n)&&Eo(t,n,e[n]);if(Xe)for(var n of Xe(e))Co.call(e,n)&&Eo(t,n,e[n]);return t},I=(t,e)=>Ci(t,Ei(e));var ut=(t,e)=>{var n={};for(var o in t)$o.call(t,o)&&e.indexOf(o)<0&&(n[o]=t[o]);if(t!=null&&Xe)for(var o of Xe(t))e.indexOf(o)<0&&Co.call(t,o)&&(n[o]=t[o]);return n};import{e as Si,j as i,R as wi,C as ki,T as Ni,f as Je,c as Ti,p as So,r as a,g as vi,m as Ai,s as Ii,a as Oi,o as Di,b as Mi,t as Li,d as Ri,h as _i,i as Pi,k as Bi,l as Wi,v as zi,n as Fi,q as Hi,u as Ui,w as qi,x as Gi,y as Vi,z as ji,A as Zi,B as Qi,D as Ki,E as Yi,F as Xi,G as Ji,H as tc,I as ec,J as nc,K as oc,L as rc,M as sc,N as ic,O as cc,P as ac,Q as lc,S as uc,U as dc,V as hc,W as fc,X as gc,Y as pc,Z as mc,_ as xc,$ as bc,a0 as yc,a1 as $c,a2 as Cc,a3 as Ec,a4 as Sc,a5 as wc,a6 as kc,a7 as Nc,a8 as Tc,a9 as vc,aa as Ac,ab as Ic,ac as Oc,ad as Dc,ae as Mc,af as Lc,ag as Rc,ah as _c,ai as Pc,aj as Bc,ak as Wc,al as zc,am as Fc,an as Hc,ao as Uc,ap as qc,aq as Gc,ar as Vc,as as jc,at as Zc,au as Qc,av as Kc,aw as Yc,ax as Xc,ay as Jc,az as ta,aA as ea,aB as na,aC as oa,aD as ra,aE as sa,aF as ia,aG as ca,aH as aa,aI as la,aJ as ua,aK as da,aL as ha,aM as fa,aN as ga,aO as pa,aP as ma,aQ as xa,aR as ba,aS as ya,aT as $a,aU as Ca,aV as Ea,aW as Sa,aX as wa,aY as ka,aZ as Na,a_ as Ta,a$ as va,b0 as Aa,b1 as Ia,b2 as Oa,b3 as Da,b4 as Ma,b5 as La,b6 as S,b7 as Ra,b8 as wo,b9 as _a,ba as Pa,bb as Ba,bc as On,bd as Wa,be as ft,bf as tn,bg as ko,bh as Ie,bi as Dn,bj as za,bk as No,bl as Fa,bm as Ha,bn as Ua,bo as To,bp as qa,bq as Ga,br as Va,bs as ja,bt as Za,bu as Qa,bv as Ka,bw as Ya,bx as Xa,by as Ja,bz as tl,bA as en,bB as el,bC as nl,bD as vo,bE as ol,bF as rl,bG as sl,bH as il,bI as cl,bJ as al,bK as ll,bL as ul,bM as dl,bN as hl,bO as fl,bP as gl,bQ as pl,bR as ml,bS as xl,bT as bl,bU as yl,bV as $l,bW as Cl,bX as El,bY as Sl,bZ as wl}from"./vendor.9a24bb90.js";const kl=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const c of s.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&o(c)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerpolicy&&(s.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?s.credentials="include":r.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function o(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}};kl();function Nl(t){Si.render(i(wi.StrictMode,{children:t}),document.getElementById("root"))}function Tl(t){if(!t)throw new Error("invariant violated")}function vl(t,e){t&&console.error(e)}function*Al(t,e){for(const[n,o]of t.entries())yield e(o,n)}function*Il(t,e){for(const[n,o]of t.entries())e(o,n)&&(yield o)}function Ft(t,e){return Array.from(Al(t,e))}function Zt(t,e){return Array.from(Il(t,e))}function Ao(t){return Array.from(t.values())}function Ol(t){return[].concat(...t)}function fe(t,e){return Zt(t,n=>!e.has(n))}function st(t){return t[0]}function Io(t){return t[1]}function Oo(t){return t[t.length-1]}function U(t){return t.length===1?t[0]:null}function Do(t){return vl(t.length!==1,`Expected one element, got ${t.length}`),t[0]}function Mo(t,e){return new Set(fe(t,e))}function Lo(t,e){Array.from(t).forEach(n=>{t.delete(n)}),e.forEach(n=>{t.add(n)})}function Dl(t){return+q(t)}function Oe(t,e){return q(t)===q(e)}function ae(t,e){return q(t)===e}function q(t){return t.id}function Y(t){return{id:t}}function Ml(t,e){return ge(t,e).x}function Ll(t,e){return ge(t,e).y}function De(t,e,n,o){ge(t,e).x=n,ge(t,e).y=o}function ge(t,e){return t.positions.get(e.id)}function Rl({x:t,y:e}){return{x:t,y:e}}function Ro(t,e,n,o){ge(t,e).x+=n,ge(t,e).y+=o}function Mn(t,e,n){const o=q(t),r=q(e);return{id:`e${o}${r}`,parentID:o,childID:r,targetHandle:n}}function _o(t,e){return I(l({},Mn(t,e)),{type:"tight"})}function _l(t,e){return(Le(t)?_o:Mn)(e.get(Qt(t)),e.get(Lt(t)),Me(t))}function Po(t){return t.id}function Qt(t){return t.parentID}function Lt(t){return t.childID}function Me(t){return t.targetHandle}function Le(t){return t.type==="tight"}function Pl(t){t.type=null}function Bo(t,e,n){return Rn(t,e).some(o=>{const r=Lt(o);return ae(n,r)||Bo(t,Y(r),n)})}function Ln(t,e,n){const o=Re(t,e);if(o==null)return!1;const r=Lt(o);return ae(n,r)||Ln(t,Y(r),n)}function Rn(t,e){return Zt(pe(t),n=>ae(e,Qt(n)))}function Kt(t,e){return Zt(pe(t),n=>ae(e,Lt(n)))}function Wo(t,e){let n=[];return Kt(t,e).forEach(o=>{n[Me(o)]=o}),n}function nn(t,e){return Pe(t,Qt(e))}function zo(t,e){return Pe(t,Lt(e))}function Fo(t,e){return U(Kt(t,e).filter(Le))}function Re(t,e){return U(Rn(t,e).filter(Le))}function Bl(t,e){return Rn(t,e).filter(n=>!Le(n))}function Wl(t,e){return Kt(t,e).filter(n=>!Le(n))}function zl(t,e){return Zt(pe(t),n=>ae(e,Lt(n))||ae(e,Qt(n)))}function Fl(t,e){const n=un(e);return Zt(pe(t),o=>n.has(Lt(o))&&n.has(Qt(o)))}function pe(t){return t.edges}function Ho(t,e){e.forEach(n=>{on(t,n)})}function on(t,e){return pe(t).delete(Po(e))}function _e(t,e,n,o){_n(t,Mn(e,n,o))}function rn(t,e,n){_n(t,_o(e,n))}function _n(t,e){pe(t).set(Po(e),e)}function dt(t,e){Lo(t.lastSelectedNodeIDs,t.selectedNodeIDs),Lo(t.selectedNodeIDs,un(e))}function Hl(t,e){dt(t,Ft(t.selectedNodeIDs,Y).concat(e))}function sn(t){return t.selectedNodeIDs.size}function Ul(t){return t.selectedNodeIDs.size>0}function ct(t){return Pn(t,t.selectedNodeIDs)}function Uo(t){return Pn(t,t.lastSelectedNodeIDs)}function qo(t,e){return t.selectedNodeIDs.has(q(e))}function ql(t,e){const n=U(Uo(t));return n==null?!1:Oe(n,e)}function Gl(t){return Array.from(me(t).values())}function Pn(t,e){return Ft(e,n=>Pe(t,n))}function Pe(t,e){return me(t).get(e)}function Go(t,e){return Pe(t,q(e))}function Vl(t,e){return Go(t,e)==null}function Vo(t,e){return xe(t).get(e)}function ht(t,e){return xe(t).get(q(e))}function jl(t,e){return new Map(e.map(n=>[q(n),Rl(xe(t).get(q(n)))]))}function me(t){return t.nodes}function cn(t,e){return l({id:Qo(t),data:{}},e)}function Zl(t,e){return I(l({},e),{id:Qo(t)})}function Ql(t,e,n){var o;e.type=n.type,e.data=(o=n.data)!=null?o:{}}function W(t,e){return Pn(t,Kt(t,e).map(n=>Qt(n)))}function an(t,e){return Wo(t,e).map(n=>nn(t,n))}function jo(t,e){return Kt(t,e).length>0}function Kl(t,e){return Kt(t,e).length===1}function Yl(t,e){return Re(t,e)!=null}function Be(t,e){me(t).set(q(e),e),xe(t).set(q(e),{x:0,y:0})}function xe(t){return t.positions}function Xl(t,e){me(t).delete(q(e)),xe(t).delete(q(e)),Ho(t,zl(t,e))}function ln(t,e){const n=Fo(t,e);return n!=null?nn(t,n):null}function We(t,e){const n=Re(t,e);return n!=null?zo(t,n):null}function Zo(t,e,n){const o=We(t,e);o!=null&&(on(t,Re(t,e)),rn(t,n,o))}function Jl(t,e){const n=[e];let o=e;for(;o!=null;){const r=We(t,o);r!=null&&n.push(r),o=r}return n}function Bn(t,e){const n=un(e),o=Yt(t,e[0]);return Jl(t,o).filter(r=>n.has(q(r)))}function Yt(t,e){const n=ln(t,e);return n==null?e:Yt(t,n)}function tu(t,e,n){return Oe(Yt(t,e),Yt(t,n))}function un(t){return new Set(t.map(q))}function eu(t){return Array.from(new Set(t))}function Wn(t,e){const n=new Map;return t.forEach(o=>{var c;const r=q(e(o)),s=(c=n.get(r))!=null?c:[];s.push(o),n.set(r,s)}),Array.from(n.values())}function nu(t){return Zt(me(t),e=>Re(t,e)==null)}function Qo(t){return String(Math.max(0,...Ft(me(t),e=>Dl(e)))+1)}function Ht(t,e){const{height:n}=ht(t,e),o=We(t,e);o!=null&&(De(t,o,Ml(t,e),Ll(t,e)+n),Ht(t,o))}function ou(t,e){const n=30,o=30,r=Math.max(0,...Zt(xe(t),(s,c)=>!ae(e,c)).map(({x:s,width:c})=>s+c));De(t,e,r+o,n)}function ru(t,e,n){const o=30,r=Math.max(...e.map(c=>ht(t,c)).map(({x:c,width:u})=>c+u)),s=Math.max(...e.map(c=>ht(t,c)).map(({y:c,height:u})=>c+u));De(t,n,r+o,s)}function su(t,e,n){const{width:o,height:r}=ht(t,e);De(t,e,Math.floor(n.x-o/2),Math.floor(n.y-r/2))}ki();Ni();window.produce=Je;function iu(){return{inProgressRecording:null,reverseCursor:0,patches:[]}}function Tt(t){t.history.content.inProgressRecording=[[],[]]}function cu(t){const e=t.history.content;e.existingRecording||e.continueRecording?e.inProgressRecording=e.patches[dn(t)]:(Tt(t),e.existingRecording=!0),e.continueRecording=!0}function yt(t){t.history.content.addRecording=!0}function au(t,e){return Je(t,e)}function lu(t,e){const n=Je(t,h=>{h.history.content.continueRecording=!1}),[o,r,s]=Ti(n,e);if(r.length===0)return t;const[c,u]=[r.filter(({path:h})=>h[0]!=="history"),s.filter(({path:h})=>h[0]!=="history")];return Je(o,h=>{const{content:d}=h.history;d.continueRecording||(d.existingRecording=!1);const p=d.inProgressRecording!=null&&d.inProgressRecording[0].length>0;d.inProgressRecording!=null&&(d.inProgressRecording[0].push(...c),d.inProgressRecording[1].unshift(...u)),d.addRecording&&(d.reverseCursor>0&&(d.patches.splice(-d.reverseCursor),d.reverseCursor=0),d.continueRecording&&p&&d.patches.splice(-1),d.patches.push(d.inProgressRecording),d.inProgressRecording=null,d.addRecording=!1)})}function uu(t){return dn(t)>=0}function du(t){const{content:e}=t.history,[,n]=e.patches[dn(t)],o=So(t,n);return e.reverseCursor+=1,o}function hu(t){return Ko(t)<t.history.content.patches.length}function fu(t){const{content:e}=t.history,[n]=e.patches[Ko(t)],o=So(t,n);return e.reverseCursor-=1,o}function Ko(t){return dn(t)+1}function dn(t){const{content:e}=t.history;return e.patches.length-e.reverseCursor-1}const Yo=a.exports.createContext();function ze(t,e){const n={};return Object.keys(t).forEach(o=>{n[o]=e(t[o],o)}),n}function gu(t,e,n){return Object.keys(t).reduce((o,r)=>e(o,t[r],r),n)}function pu(t){const e={};return t.forEach((n,o)=>{e[o]=n}),e}function mu(t,e){const n={};return t.forEach((o,r)=>{n[o]=e(o,r)}),n}function xu(t,e){const n={};return t.forEach(([o,r])=>{n[o]=r}),n}function Xo(t){const e=ze(t,s=>a.exports.createContext(s)),n=a.exports.createContext();function o({initialState:s={},children:c}){const[u,h]=a.exports.useState(l(l({},t),s));return i(n.Provider,{value:h,children:gu(e,(d,p,f)=>i(p.Provider,{value:u[f],children:d}),c)})}function r(){return a.exports.useContext(n)}return{state:e,useSetState:r,provider:o}}const bu=t=>t;function hn(t,e=bu){const n=ze(t,o=>a.exports.useContext(o));return a.exports.useMemo(()=>e(n),Object.values(n))}const{state:fn,useSetState:Jo,provider:yu}=Xo({nodes:new Map,edges:new Map,positions:new Map,selectedNodeIDs:new Set,lastSelectedNodeIDs:new Set,highlightedNodeIDs:new Set,modes:{alt:!1},history:{content:iu()}});function zn(){const t=Jo();return a.exports.useCallback(e=>{t(n=>au(n,e))},[t])}function Rt(){const t=Jo();return a.exports.useCallback(e=>{t(n=>lu(n,e))},[t])}function Fn(t){const e=Rt();return a.exports.useCallback((...n)=>{const o=t(...n);e(o)},[e])}const xi=fn,{modes:$u,history:cp}=xi,tr=ut(xi,["modes","history"]),bi=tr,{positions:Cu,highlightedNodeIDs:ap}=bi,er=ut(bi,["positions","highlightedNodeIDs"]),yi=er,{lastSelectedNodeIDs:lp,selectedNodeIDs:up}=yi,Eu=ut(yi,["lastSelectedNodeIDs","selectedNodeIDs"]);function be(){return hn(tr)}function Su(){return a.exports.useContext($u)}function Fe(){return hn(Eu)}function nr(){return hn(er)}const wu={positions:Cu,nodes:fn.nodes};function ku(){return hn(wu)}function $t(t){const e=Rt(),n=t.id;return a.exports.useCallback(o=>{e(r=>{Tt(r),o(Go(r,Y(n))),yt(r)})},[e,n])}const Nu=l(l(l(l(l(l(l(l(l(l(l(l(l(l(l(l(l(l(l(l(l(l(l(l(l(l(l(l(l(l(l(l(l(l(l(l(l(l(l(l(l(l(l(l(l(l(l(l(l(l(l(l(l(l(l(l(l(l({},vi),Ai),Ii),Oi),Di),Mi),Li),Ri),_i),Pi),Bi),Wi),zi),Fi),Hi),Ui),qi),Gi),Vi),ji),Zi),Qi),Ki),Yi),Xi),Ji),tc),ec),nc),oc),rc),sc),ic),cc),ac),lc),uc),dc),hc),fc),gc),pc),mc),xc),bc),yc),$c),Cc),Ec),Sc),wc),kc),Nc),Tc),vc),Ac),Ic),Oc),Tu=l(l(l(l(l(l(l(l(l(l(l(l(l(l(l(l(l(l(l(l(l(l(l(l(l(l(l(l(l(l(l(l(l(l(l(l(l(l(l(l(l(l(l(l(l(l(l(l(l(l(l(l(l(l(l(l({},Dc),Mc),Lc),Rc),_c),Pc),Bc),Wc),zc),Fc),Hc),Uc),qc),Gc),Vc),jc),Zc),Qc),Kc),Yc),Xc),Jc),ta),ea),na),oa),ra),sa),ia),ca),aa),la),ua),da),ha),fa),ga),pa),ma),xa),ba),ya),$a),Ca),Ea),Sa),wa),ka),Na),Ta),va),Aa),Ia),Oa),Da),Ma),vu={font:t=>({fontSize:t,fontWeight:t,lineHeight:t}),paddingHori:t=>({paddingLeft:t,paddingRight:t}),paddingVert:t=>({paddingTop:t,paddingBottom:t}),marginHori:t=>({marginLeft:t,marginRight:t}),marginVert:t=>({marginTop:t,marginBottom:t}),size:t=>({width:t,height:t}),userSelect:t=>({WebkitUserSelect:t,userSelect:t}),appearance:t=>({WebkitAppearance:t,appearance:t}),backgroundClip:t=>({WebkitBackgroundClip:t,backgroundClip:t})},{styled:j,css:dp,createTheme:Au,globalCss:Iu,keyframes:or}=La({theme:{colors:I(l({},Nu),{hiContrast:"$slate12",loContrast:"white",canvas:"hsl(0 0% 93%)",panel:"white",transparentPanel:"hsl(0 0% 0% / 97%)",subtleShadow:"rgb(126, 134, 140, 0.08)",shadowLight:"hsl(206 22% 7% / 35%)",shadowDark:"hsl(206 22% 7% / 20%)"}),fonts:{os:'-apple-system, BlinkMacSystemFont, "Segoe UI", "Roboto", "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue", sans-serif',mono:"Menlo, Consolas, Monaco, monospace"},fontSizes:{hero:"56px",h1:"32px",h2:"22px",h3:"17px",body:"14px",detail:"13px"},lineHeights:{hero:"60px",h1:"38px",h2:"28px",h3:"21px",body:"22px",detail:"13px"},fontWeights:{hero:700,h1:700,h2:700,h3:700,body:400,detail:400},radii:{4:"4px",6:"6px",8:"8px",12:"12px",round:"50%",pill:"9999px"},space:{4:"4px",8:"8px",12:"12px",16:"16px",20:"20px",24:"24px",32:"32px",48:"48px",64:"64px",80:"80px"},sizes:{4:"4px",8:"8px",12:"12px",16:"16px",20:"20px",24:"24px",28:"28px",32:"32px",36:"36px",48:"48px",64:"64px",80:"80px"},zIndices:{background:1,nodeEditor:3,uiAboveNodes:5,selectedNodes:10,aboveSelectedNodes:11}},media:{bp1:"(min-width: 520px)",bp2:"(min-width: 900px)",bp3:"(min-width: 1200px)",bp4:"(min-width: 1800px)",motion:"(prefers-reduced-motion)",hover:"(any-hover: hover)",dark:"(prefers-color-scheme: dark)",light:"(prefers-color-scheme: light)"},utils:vu}),Ou=Au("dark-theme",{colors:I(l({},Tu),{hiContrast:"$slate12",loContrast:"$slate1",canvas:"hsl(0 0% 15%)",panel:"$slate1",transparentPanel:"hsl(0 100% 100% / 97%)",shadowLight:"hsl(206 22% 7% / 35%)",subtleShadow:"rgb(120, 127, 133, 0.08)",shadowDark:"hsl(206 22% 7% / 20%)"})});Iu({"*, *::before, *::after":{boxSizing:"border-box"},"*":{margin:0},"html, body, #root":{height:"100%"},"input, button, textarea, select":{font:"inherit"},"p, h1, h2, h3, h4, h5, h6":{overflowWrap:"break-word"},body:{"-webkit-font-smoothing":"antialiased","-moz-osx-font-smoothing":"grayscale",fontFamily:"$os",font:"$body",background:"$panel !important"}})();const J=j("div"),Ct=j("button",{all:"unset",alignItems:"center",boxSizing:"border-box",userSelect:"none",display:"inline-flex",flexShrink:0,justifyContent:"center",lineHeight:"1",WebkitTapHighlightColor:"rgba(0,0,0,0)",cursor:"pointer",paddingHori:"6px",fontVariantNumeric:"tabular-nums",borderRadius:"6px","&:disabled":{backgroundColor:"$slate2",color:"$slate8",pointerEvents:"none"},variants:{size:{body:{height:"$28",font:"$body"},detail:{height:"25px",font:"$detail"}},variant:{gray:{backgroundColor:"$slate4",color:"$slate12","@hover":{"&:hover":{backgroundColor:"$slate5"}},"&:active":{backgroundColor:"$slate6"},"&:focus":{},'&[data-radix-popover-trigger][data-state="open"], &[data-radix-dropdown-menu-trigger][data-state="open"]':{backgroundColor:"$slate4"}},blue:{backgroundColor:"$blue2",boxShadow:"inset 0 0 0 1px $colors$blue7",color:"$blue11","@hover":{"&:hover":{boxShadow:"inset 0 0 0 1px $colors$blue8"}},"&:active":{backgroundColor:"$blue3",boxShadow:"inset 0 0 0 1px $colors$blue8"},"&:focus":{boxShadow:"inset 0 0 0 1px $colors$blue8, 0 0 0 1px $colors$blue8"},'&[data-radix-popover-trigger][data-state="open"], &[data-radix-dropdown-menu-trigger][data-state="open"]':{backgroundColor:"$blue4",boxShadow:"inset 0 0 0 1px $colors$blue8"}},green:{backgroundColor:"$green2",boxShadow:"inset 0 0 0 1px $colors$green7",color:"$green11","@hover":{"&:hover":{boxShadow:"inset 0 0 0 1px $colors$green8"}},"&:active":{backgroundColor:"$green3",boxShadow:"inset 0 0 0 1px $colors$green8"},"&:focus":{boxShadow:"inset 0 0 0 1px $colors$green8, 0 0 0 1px $colors$green8"},'&[data-radix-popover-trigger][data-state="open"], &[data-radix-dropdown-menu-trigger][data-state="open"]':{backgroundColor:"$green4",boxShadow:"inset 0 0 0 1px $colors$green8"}},red:{backgroundColor:"$loContrast",boxShadow:"inset 0 0 0 1px $colors$slate7",color:"$red11","@hover":{"&:hover":{boxShadow:"inset 0 0 0 1px $colors$slate8"}},"&:active":{backgroundColor:"$red3",boxShadow:"inset 0 0 0 1px $colors$red8"},"&:focus":{boxShadow:"inset 0 0 0 1px $colors$red8, 0 0 0 1px $colors$red8"},'&[data-radix-popover-trigger][data-state="open"], &[data-radix-dropdown-menu-trigger][data-state="open"]':{backgroundColor:"$red4",boxShadow:"inset 0 0 0 1px $colors$red8"}},transparentWhite:{backgroundColor:"hsla(0,100%,100%,.2)",color:"white","@hover":{"&:hover":{backgroundColor:"hsla(0,100%,100%,.25)"}},"&:active":{backgroundColor:"hsla(0,100%,100%,.3)"},"&:focus":{boxShadow:"inset 0 0 0 1px hsla(0,100%,100%,.35), 0 0 0 1px hsla(0,100%,100%,.35)"}},transparentBlack:{backgroundColor:"hsla(0,0%,0%,.2)",color:"black","@hover":{"&:hover":{backgroundColor:"hsla(0,0%,0%,.25)"}},"&:active":{backgroundColor:"hsla(0,0%,0%,.3)"},"&:focus":{boxShadow:"inset 0 0 0 1px hsla(0,0%,0%,.35), 0 0 0 1px hsla(0,0%,0%,.35)"}}},state:{active:{backgroundColor:"$slate4",boxShadow:"inset 0 0 0 1px $colors$slate8",color:"$slate11","@hover":{"&:hover":{backgroundColor:"$slate5",boxShadow:"inset 0 0 0 1px $colors$slate8"}},"&:active":{backgroundColor:"$slate5"},"&:focus":{boxShadow:"inset 0 0 0 1px $colors$slate8, 0 0 0 1px $colors$slate8"}},waiting:{backgroundColor:"$slate4",boxShadow:"inset 0 0 0 1px $colors$slate8",color:"transparent",pointerEvents:"none","@hover":{"&:hover":{backgroundColor:"$slate5",boxShadow:"inset 0 0 0 1px $colors$slate8"}},"&:active":{backgroundColor:"$slate5"},"&:focus":{boxShadow:"inset 0 0 0 1px $colors$slate8"}}},ghost:{true:{backgroundColor:"transparent",boxShadow:"none"}}},compoundVariants:[{variant:"gray",ghost:"true",css:{backgroundColor:"transparent",color:"$hiContrast","@hover":{"&:hover":{backgroundColor:"$slateA3",boxShadow:"none"}},"&:active":{backgroundColor:"$slateA4"},"&:focus":{boxShadow:"inset 0 0 0 1px $colors$slateA8, 0 0 0 1px $colors$slateA8"},'&[data-radix-popover-trigger][data-state="open"], &[data-radix-dropdown-menu-trigger][data-state="open"]':{backgroundColor:"$slateA4",boxShadow:"none"}}},{variant:"blue",ghost:"true",css:{backgroundColor:"transparent","@hover":{"&:hover":{backgroundColor:"$blueA3",boxShadow:"none"}},"&:active":{backgroundColor:"$blueA4"},"&:focus":{boxShadow:"inset 0 0 0 1px $colors$blueA8, 0 0 0 1px $colors$blueA8"},'&[data-radix-popover-trigger][data-state="open"], &[data-radix-dropdown-menu-trigger][data-state="open"]':{backgroundColor:"$blueA4",boxShadow:"none"}}},{variant:"green",ghost:"true",css:{backgroundColor:"transparent","@hover":{"&:hover":{backgroundColor:"$greenA3",boxShadow:"none"}},"&:active":{backgroundColor:"$greenA4"},"&:focus":{boxShadow:"inset 0 0 0 1px $colors$greenA8, 0 0 0 1px $colors$greenA8"},'&[data-radix-popover-trigger][data-state="open"], &[data-radix-dropdown-menu-trigger][data-state="open"]':{backgroundColor:"$greenA4",boxShadow:"none"}}},{variant:"red",ghost:"true",css:{backgroundColor:"transparent","@hover":{"&:hover":{backgroundColor:"$redA3",boxShadow:"none"}},"&:active":{backgroundColor:"$redA4"},"&:focus":{boxShadow:"inset 0 0 0 1px $colors$redA8, 0 0 0 1px $colors$redA8"},'&[data-radix-popover-trigger][data-state="open"], &[data-radix-dropdown-menu-trigger][data-state="open"]':{backgroundColor:"$redA4",boxShadow:"none"}}}],defaultVariants:{size:"body",variant:"gray"}});function Du(o){var r=o,{icon:t,children:e}=r,n=ut(r,["icon","children"]);return S(Ct,I(l({},n),{children:[i(J,{css:{height:18,marginRight:"$4"},children:t}),e]}))}function Hn({icon:t,children:e,onAdd:n}){const o=Rt(),r=a.exports.useContext(Yo);return i(Du,{icon:t,onClick:()=>{o(s=>{r(n(s,s.modes.alt))})},children:e})}function rr(t){return e=>{const n=Do(ct(e));if(n==null)return;Tt(e);const o=cn(e,t);return Zo(e,n,o),rn(e,n,o),Be(e,o),dt(e,[o]),[q(o),Mu]}}function sr(t){return e=>ir(e,t,Ht)}function Mu(t,e){const n=ln(t,e);Ht(t,n),yt(t)}function Lu(t){return e=>{Tt(e);const n=cn(e,t);return Be(e,n),dt(e,[n]),[q(n),Ru]}}function Ru(t,e){ou(t,e),yt(t)}function _u(t,e,n){Tt(t);const o=cn(t,e);return Be(t,o),dt(t,[o]),[q(o),(r,s)=>{su(r,s,n),yt(r)}]}function Pu(t){return e=>{Tt(e);const n=ct(e),o=cn(e,t);return n.forEach((r,s)=>{_e(e,r,o,String(s))}),Be(e,o),dt(e,[o]),[q(o),Wu]}}function Bu(t){return e=>ir(e,t,Ht)}function Wu(t,e){ru(t,W(t,e),e),yt(t)}function ir(t,e,n){const o=Do(ct(t));if(o!=null)return Ql(t,o,e),[q(o),n]}const Xt=j("button",{alignItems:"center",appearance:"none",borderWidth:"0",boxSizing:"border-box",display:"inline-flex",flexShrink:0,fontSize:"14px",justifyContent:"center",lineHeight:"1",outline:"none",padding:"0",textDecoration:"none",userSelect:"none",WebkitTapHighlightColor:"transparent",cursor:"pointer",color:"$hiContrast",backgroundColor:"$loContrast",border:"1px solid $slate7","@hover":{"&:hover":{borderColor:"$slate8"}},"&:active":{backgroundColor:"$slate2"},"&:focus":{borderColor:"$slate8",boxShadow:"0 0 0 1px $colors$slate8"},"&:disabled":{pointerEvents:"none",backgroundColor:"transparent",color:"$slate6"},variants:{size:{1:{borderRadius:"$4",size:"25px"}},variant:{ghost:{backgroundColor:"transparent",borderWidth:"0","@hover":{"&:hover":{backgroundColor:"$slateA3"}},"&:focus":{boxShadow:"inset 0 0 0 1px $colors$slateA8, 0 0 0 1px $colors$slateA8"},"&:active":{backgroundColor:"$slateA4"},'&[data-radix-popover-trigger][data-state="open"], &[data-radix-dropdown-menu-trigger][data-state="open"]':{backgroundColor:"$slateA4"}}},state:{active:{backgroundColor:"$slate4",boxShadow:"inset 0 0 0 1px hsl(206,10%,76%)","@hover":{"&:hover":{boxShadow:"inset 0 0 0 1px hsl(206,10%,76%)"}},"&:active":{backgroundColor:"$slate4"}},waiting:{backgroundColor:"$slate4",boxShadow:"inset 0 0 0 1px hsl(206,10%,76%)","@hover":{"&:hover":{boxShadow:"inset 0 0 0 1px hsl(206,10%,76%)"}},"&:active":{backgroundColor:"$slate4"}}}},defaultVariants:{size:"1",variant:"ghost"}}),rt=j("div",{display:"flex",flexDirection:"row",variants:{align:{start:{alignItems:"flex-start"},center:{alignItems:"center"},end:{alignItems:"flex-end"},stretch:{alignItems:"stretch"}},justify:{start:{justifyContent:"flex-start"},center:{justifyContent:"center"},end:{justifyContent:"flex-end"},between:{justifyContent:"space-between"}}},defaultVariants:{align:"stretch",justify:"start"}}),cr=a.exports.createContext(),zu=cr.Provider;function gn(){return a.exports.useContext(cr)}function ar(t){return new Map(Object.entries(t))}const Un=ar({where:{label:"WHERE",key:"w"},group:{label:"GROUP BY",key:"g"},select:{label:"SELECT",key:"s"},order:{label:"ORDER BY",key:"o"}}),lr=ar({join:{label:"JOIN"},union:{label:"UNION"},intersect:{label:"INTERSECT"},except:{label:"EXCEPT"}});function ur(t,e){const n=t.nodeConfigs[e];return Tl(n!=null),n}function He(t,e){return{type:e,data:ur(t,e).emptyNodeData()}}function Ut(t,e){return ur(t,e.type)}function _t(t){const e=gn();return Ut({nodeConfigs:e},t)}function Fu(t,e){var n,o;return(o=(n=Ut(t,e)).results)==null?void 0:o.call(n,t,e)}function Hu(t,e){return Ut(t,e).query(t,e)}function Uu(t,e){var n,o;return(o=(n=Ut(t,e)).queryAdditionalTables)==null?void 0:o.call(n,t,e)}function qu(t,e){var n,o;return(o=(n=Ut(t,e)).queryAdditionalValues)==null?void 0:o.call(n,t,e)}function Pt(t,e){return Ut(t,e).querySelectable(t,e)}function Jt(t,e){return e==null?null:Ut(t,e).querySelectable(t,e)}function it(t,e){return Ut(t,e).columnNames(t,e)}function Gu(t,e){return Ut(t,e).ColumnControl}function F(t,e){return{type:t,payload:e}}const dr="SET_ON_CONNECT",hr="SET_ON_CONNECT_START",fr="SET_ON_CONNECT_STOP",gr="SET_ON_CONNECT_END",Vu="SET_ELEMENTS",pr="UPDATE_NODE_DIMENSIONS",ju="UPDATE_NODE_POS",mr="UPDATE_NODE_POS_DIFF",Zu="SET_USER_SELECTION",Qu="SET_SELECTION",xr="ADD_SELECTED_ELEMENTS",br="UPDATE_TRANSFORM",yr="UPDATE_SIZE",$r="INIT_D3ZOOM",Cr="SET_MINZOOM",Er="SET_MAXZOOM",Sr="SET_TRANSLATEEXTENT",wr="SET_CONNECTION_POSITION",kr="SET_CONNECTION_NODEID",Nr="SET_SNAPTOGRID",Tr="SET_SNAPGRID",vr="SET_INTERACTIVE",Ar="SET_NODES_DRAGGABLE",Ir="SET_NODES_CONNECTABLE",Or="SET_ELEMENTS_SELECTABLE",Dr="SET_MULTI_SELECTION_ACTIVE",Mr="SET_CONNECTION_MODE",Lr="SET_NODE_EXTENT",Ku=t=>F(dr,{onConnect:t}),Yu=t=>F(hr,{onConnectStart:t}),Xu=t=>F(fr,{onConnectStop:t}),Ju=t=>F(gr,{onConnectEnd:t}),td=t=>F(Vu,t),ed=t=>F(pr,t),nd=t=>F(mr,t),od=t=>F(Zu,t),rd=t=>F(Qu,{selectionActive:t}),sd=t=>F(xr,t),id=t=>F(br,{transform:t}),cd=t=>F(yr,{width:t.width||500,height:t.height||500}),ad=t=>F($r,t),ld=t=>F(Cr,t),ud=t=>F(Er,t),dd=t=>F(Sr,t),hd=t=>F(wr,{connectionPosition:t}),fd=t=>F(kr,t),gd=t=>F(Nr,{snapToGrid:t}),pd=t=>F(Tr,{snapGrid:t}),md=t=>F(vr,{nodesDraggable:t,nodesConnectable:t,elementsSelectable:t}),xd=t=>F(Ar,{nodesDraggable:t}),bd=t=>F(Ir,{nodesConnectable:t}),yd=t=>F(Or,{elementsSelectable:t}),$d=t=>F(Dr,{multiSelectionActive:t}),Cd=t=>F(Mr,{connectionMode:t}),Ed=t=>F(Lr,t);var Sd=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",setOnConnect:Ku,setOnConnectStart:Yu,setOnConnectStop:Xu,setOnConnectEnd:Ju,setElements:td,updateNodeDimensions:ed,updateNodePosDiff:nd,setUserSelection:od,setSelection:rd,addSelectedElements:sd,updateTransform:id,updateSize:cd,initD3Zoom:ad,setMinZoom:ld,setMaxZoom:ud,setTranslateExtent:dd,setConnectionPosition:hd,setConnectionNodeId:fd,setSnapToGrid:gd,setSnapGrid:pd,setInteractive:md,setNodesDraggable:xd,setNodesConnectable:bd,setElementsSelectable:yd,setMultiSelectionActive:$d,setConnectionMode:Cd,setNodeExtent:Ed});const wd=Pa;function Q(t){const e=Ra(),n=t(Sd);return a.exports.useMemo(()=>typeof n=="function"?wo(n,e):wo(n,e),[e,n])}const M=wd,le=()=>_a(),Rr=t=>{const e=t==null?void 0:t.target;return["INPUT","SELECT","TEXTAREA","BUTTON"].includes(e==null?void 0:e.nodeName)||(e==null?void 0:e.hasAttribute("contenteditable"))},qn=t=>({width:t.offsetWidth,height:t.offsetHeight}),ye=(t,e=0,n=1)=>Math.min(Math.max(t,e),n),kd=(t,e)=>({x:ye(t.x,e[0][0],e[1][0]),y:ye(t.y,e[0][1],e[1][1])}),_r=t=>{var e;return((e=t.getRootNode)==null?void 0:e.call(t))||(window==null?void 0:window.document)},Nd=(t,e)=>{const n=t.getBoundingClientRect();return{source:Pr(".source",t,n,e),target:Pr(".target",t,n,e)}},Pr=(t,e,n,o)=>{const r=e.querySelectorAll(t);return!r||!r.length?null:Array.from(r).map(c=>{const u=c.getBoundingClientRect(),h=qn(c),d=c.getAttribute("data-handleid"),p=c.getAttribute("data-handlepos");return l({id:d,position:p,x:(u.left-n.left)/o,y:(u.top-n.top)/o},h)})};function Br(t){return Ba(Td,t)}var H;(function(t){t.Left="left",t.Top="top",t.Right="right",t.Bottom="bottom"})(H||(H={}));var pn;(function(t){t.Strict="strict",t.Loose="loose"})(pn||(pn={}));var $e;(function(t){t.Free="free",t.Vertical="vertical",t.Horizontal="horizontal"})($e||($e={}));const Gn={width:0,height:0,transform:[0,0,1],nodes:[],edges:[],selectedElements:null,selectedNodesBbox:{x:0,y:0,width:0,height:0},d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],nodeExtent:[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],nodesSelectionActive:!1,selectionActive:!1,userSelectionRect:{startX:0,startY:0,x:0,y:0,width:0,height:0,draw:!1},connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionMode:pn.Strict,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,elementsSelectable:!0,multiSelectionActive:!1,reactFlowVersion:"-"};Br(Gn);function Wr(){return Fn(t=>e=>{t.forEach(({id:n,nodeElement:o,forceUpdate:r})=>{const s=Vo(e,n),c=qn(o);if(c.width&&c.height&&(s.width!==c.width||s.height!==c.height||r)){const h=Nd(o,1);s.width=c.width,s.height=c.height,s.handleBounds=h}})})}function zr(){return Fn((t,e)=>n=>{(e?Hl:dt)(n,t)})}function Fr(){return Fn(t=>e=>{dt(e,[])})}function Td(t=Gn,e){var n,o,r;switch(e.type){case pr:throw new Error("migrate to context");case ju:throw new Error("migrate to context");case mr:throw new Error("migrate to context");case xr:throw new Error("migrate to context");case $r:{const{d3Zoom:s,d3Selection:c,d3ZoomHandler:u,transform:h}=e.payload;return I(l({},t),{d3Zoom:s,d3Selection:c,d3ZoomHandler:u,transform:h})}case Cr:{const s=e.payload;return(n=t.d3Zoom)==null||n.scaleExtent([s,t.maxZoom]),I(l({},t),{minZoom:s})}case Er:{const s=e.payload;return(o=t.d3Zoom)==null||o.scaleExtent([t.minZoom,s]),I(l({},t),{maxZoom:s})}case Sr:{const s=e.payload;return(r=t.d3Zoom)==null||r.translateExtent(s),I(l({},t),{translateExtent:s})}case Lr:{const s=e.payload;return I(l({},t),{nodeExtent:s,nodes:t.nodes.map(c=>I(l({},c),{__rf:I(l({},c.__rf),{position:kd(c.__rf.position,s)})}))})}case dr:case hr:case fr:case gr:case br:case yr:case wr:case kr:case Nr:case Tr:case vr:case Ar:case Ir:case Or:case Dr:case Mr:return l(l({},t),e.payload);default:return t}}function Vn(t,e){const o=_r(e.target).querySelector(`.react-flow__node[data-id="${t.id}"]`);return(o==null?void 0:o.querySelector('[data-handletype="target"]'))!=null}function Hr(t,e,n,o,r,s,c,u,h,d,p,f,x,g){const C=t.target.closest(".react-flow"),b=_r(t.target);if(!b)return;const E=b.elementFromPoint(t.clientX,t.clientY),w=E==null?void 0:E.classList.contains("target"),y=E==null?void 0:E.classList.contains("source");if(!C||!w&&!y&&!d)return;const k=d||(w?"target":"source"),$=C.getBoundingClientRect();let O;r({x:t.clientX-$.left,y:t.clientY-$.top}),o({connectionNodeId:n,connectionHandleId:e,connectionHandleType:k}),f==null||f(t,{nodeId:n,handleId:e,handleType:k});function G(L){r({x:L.clientX-$.left,y:L.clientY-$.top});const{connection:T,elementBelow:m,isValid:v,isHovering:D}=qr(L,h,c,n,e,u,b);Ur(O),!(T.source===T.target)&&m&&(O=m,m.classList.add("react-flow__handle-connecting"),m.classList.toggle("react-flow__handle-valid",v))}function z(L){const{connection:T,isValid:m}=qr(L,h,c,n,e,u,b);x==null||x(L),m&&(s==null||s(T)),g==null||g(L),d&&p&&p(L),Ur(O),o({connectionNodeId:null,connectionHandleId:null,connectionHandleType:null}),b.removeEventListener("mousemove",G),b.removeEventListener("mouseup",z)}b.addEventListener("mousemove",G),b.addEventListener("mouseup",z)}function Ur(t){t==null||t.classList.remove("react-flow__handle-valid"),t==null||t.classList.remove("react-flow__handle-connecting")}function qr(t,e,n,o,r,s,c){const u=c.elementsFromPoint(t.clientX,t.clientY),h={isValid:!1,connection:{source:null,target:null,sourceHandle:null,targetHandle:null},isHovering:!1},d=u.find(p=>p.matches("[data-id]"));if(d!=null){const p=d.getAttribute("data-id"),f=n?{source:p,target:o,targetHandle:r}:{source:o,sourceHandle:r,target:p,targetHandle:d.querySelector('[data-handleid="0"]')?"0":null};h.connection=f,h.isValid=s(f),h.elementBelow=d,h.isHovering=!0}return h}const vd=t=>"id"in t&&"source"in t&&"target"in t,Ad=t=>"id"in t&&!("source"in t)&&!("target"in t);function Id(t,e){return Gr(t,{x:e.clientX,y:e.clientY})}function Gr(t,e){const{transform:n,snapToGrid:o,snapGrid:r}=t.getState();return jn(e,n,o,r)}const jn=({x:t,y:e},[n,o,r],s,[c,u])=>{const h={x:(t-n)/r,y:(e-o)/r};return s?{x:c*Math.round(h.x/c),y:u*Math.round(h.y/u)}:h},Od=t=>e=>{const{transform:n,snapToGrid:o,snapGrid:r}=t.getState();return jn(e,n,o,r)},Dd=(t,e)=>({x:Math.min(t.x,e.x),y:Math.min(t.y,e.y),x2:Math.max(t.x2,e.x2),y2:Math.max(t.y2,e.y2)}),Ce=({x:t,y:e,width:n,height:o})=>({x:t,y:e,x2:t+n,y2:e+o}),Md=({x:t,y:e,x2:n,y2:o})=>({x:t,y:e,width:n-t,height:o-e}),Ld=t=>{const e=t.reduce((n,o)=>Dd(n,Ce(o)),{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return Md(e)},Vr=(t,e,[n,o,r]=[0,0,1],s=!1,c=!1)=>{const u=Ce({x:(e.x-n)/r,y:(e.y-o)/r,width:e.width/r,height:e.height/r});return Zt(t.nodes,h=>{const d=!0,{x:p,y:f,width:x,height:g,isDragging:C}=ht(t,h);if(c&&!d)return!1;const b=Ce({x:p,y:f,width:x,height:g}),E=Math.max(0,Math.min(u.x2,b.x2)-Math.max(u.x,b.x)),w=Math.max(0,Math.min(u.y2,b.y2)-Math.max(u.y,b.y)),y=Math.ceil(E*w);if(x===null||g===null||C)return!0;if(s)return y>0;const k=x*g;return y>=k})};function Rd(t,e,n=0){const o=Ce(t),r=Ce(e),s=Math.max(0,n+Math.min(o.x2,r.x2)-Math.max(o.x,r.x)),c=Math.max(0,n+Math.min(o.y2,r.y2)-Math.max(o.y,r.y));return s>0&&c>0}const _d=(t,e)=>{const n=t.map(o=>o.id);return e.filter(o=>n.includes(o.source)||n.includes(o.target))},jr=(t,e)=>[...t.map(n=>{const o=l({},n);return o.position=o.__rf.position,delete o.__rf,o}),...e.map(n=>l({},n))],Pd=t=>()=>{const{nodes:e=[],edges:n=[]}=t.getState();return jr(e,n)},Bd=t=>()=>{const{nodes:e=[],edges:n=[],transform:o}=t.getState();return{elements:jr(e,n),position:[o[0],o[1]],zoom:o[2]}},Zr=(t,e,n,o,r,s=.1)=>{const c=e/(t.width*(1+s)),u=n/(t.height*(1+s)),h=Math.min(c,u),d=ye(h,o,r),p=t.x+t.width/2,f=t.y+t.height/2,x=e/2-p*d,g=n/2-f*d;return[x,g,d]};function Wd(t){const e=a.exports.memo(t),n=({id:o,type:r,data:s,scale:c,xPos:u,yPos:h,selected:d,onlySelected:p,wasOnlySelected:f,isAnySelected:x,highlight:g,onClick:C,onMouseEnter:b,onMouseMove:E,onMouseLeave:w,onContextMenu:y,onNodeDoubleClick:k,onNodeDragStart:$,onNodeDrag:O,onNodeDragStop:G,style:z,className:L,edited:T,isSelectable:m,isConnectable:v,selectNodesOnDrag:D,sourcePosition:P,targetPosition:Z,isHidden:K,isInitialized:tt,snapToGrid:R,snapGrid:pt,isDragging:nt,resizeObserver:at,dragHandle:Et})=>{const mt=Rt(),Bt=Wr(),xt=zr(),St=M(N=>N.connectionNodeId),Wt=M(N=>N.connectionHandleId),vt=le(),ot=a.exports.useRef(null),X=a.exports.useMemo(()=>({id:o,type:r,position:{x:u,y:h},data:s}),[o,r,u,h,s]),te=a.exports.useMemo(()=>R?pt:[1,1],[R,pt]),et=a.exports.useMemo(()=>l({zIndex:d?10:3,transform:`translate(${u}px,${h}px)`,pointerEvents:m||C||b||E||w?"all":"none",opacity:tt?1:0},z),[d,u,h,m,C,tt,z,b,E,w]),ee=a.exports.useMemo(()=>{if(!(!b||nt))return N=>b(N,X)},[b,nt,X]),ne=a.exports.useMemo(()=>{if(!(!E||nt))return N=>E(N,X)},[E,nt,X]),oe=a.exports.useMemo(()=>{if(!(!w||nt))return N=>w(N,X)},[w,nt,X]),re=a.exports.useMemo(()=>{if(!!y)return N=>y(N,X)},[y,X]),se=a.exports.useCallback(N=>{$==null||$(N,X),D&&m?d||xt([X],N.metaKey):!D&&!d&&m&&xt([])},[$,X,D,m,d,xt]),ie=a.exports.useCallback((N,V)=>{const{deltaX:Ot,deltaY:wt}=V;mt(_=>{ct(_).forEach(Nt=>{ht(_,Nt).isDragging=!0}),_.highlightedNodeIDs=new Set,cu(_);const he=Wn(ct(_),Nt=>Yt(_,Nt)).map(Nt=>Bn(_,Nt)),kt=U(he),bt=kt!=null?st(kt):null;if(!(N.altKey||bt!=null&&!jo(_,bt)&&Vn(bt,N))){eu(ct(_).map(Mt=>Yt(_,Mt))).forEach(Mt=>{Ro(_,Mt,Ot,wt),Ht(_,Mt)}),yt(_);return}he.forEach(Nt=>{const Mt=st(Nt),Ae=Fo(_,Mt);if(Ae!=null){const Ye=nn(_,Ae);Pl(Ae);const An=Oo(Nt);Zo(_,An,Ye),Ht(_,Ye)}Ro(_,Mt,Ot,wt),Ht(_,Mt)});const Ke=bt!=null?U(Xr(_,bt,N)):null;_.highlightedNodeIDs=un(Ke!=null?[Ke]:[]),yt(_)})},[mt]),At=a.exports.useCallback(N=>{mt(V=>{ct(V).forEach(Dt=>{ht(V,Dt).isDragging=!1}),V.highlightedNodeIDs=new Set;const Ot=Wn(ct(V),Dt=>Yt(V,Dt)).map(Dt=>Bn(V,Dt)),wt=U(Ot);if(wt==null)return;const _=st(wt);if(!(N.altKey||!jo(V,_)&&Vn(_,N)))return;const kt=U(Xr(V,_,N));if(kt==null)return;Tt(V);const bt=st(wt);Ho(V,Kt(V,bt)),rn(V,kt,bt),Ht(V,kt),yt(V)})},[mt]),ce=a.exports.useCallback(N=>{k==null||k(N,X),N.stopPropagation()},[X,k]),zt=a.exports.useCallback(()=>{const N=vt.getState().multiSelectionActive;!d&&!N&&xt([X])},[xt,X,d,vt]),Vt=a.exports.useCallback(N=>{var V;(V=ot.current)==null||V.removeEventListener("focus",zt),N==null||N.addEventListener("focus",zt),ot.current=N},[zt]);a.exports.useEffect(()=>{var N;p&&((N=ot.current)==null||N.focus())},[p]),a.exports.useLayoutEffect(()=>{ot.current&&!K&&Bt([{id:o,nodeElement:ot.current,forceUpdate:!0}])},[o,K,P,Z,Bt]),a.exports.useEffect(()=>{if(ot.current){const N=ot.current;return at==null||at.observe(N),()=>at==null?void 0:at.unobserve(N)}},[at]);const jt=a.exports.useMemo(()=>({id:o,data:s,type:r}),[s,o,r]);if(K)return null;const A=On(["react-flow__node",{selected:d,selectable:m}]),It={id:o,data:s,type:r,xPos:u,yPos:h,selected:d,wasOnlySelected:f,isAnySelected:x,highlight:g,isConnectable:v,sourcePosition:P,targetPosition:Z,isDragging:nt,edited:T,dragHandle:Et,nodeElement:ot,connectingHandleID:St===o?Wt!=null?Wt:"0":null};return i(Wa,{onStart:se,onDrag:ie,onStop:At,scale:c,cancel:".nodrag",nodeRef:ot,grid:te,enableUserSelectHack:!1,handle:Et,children:i(J,{css:{position:"absolute",userSelect:"none",pointerEvents:"all",transformOrigin:"0 0",outline:"none",cursor:"grab"},className:A,ref:Vt,style:et,onMouseEnter:ee,onMouseMove:ne,onMouseLeave:oe,onContextMenu:re,onDoubleClick:ce,"data-id":o,tabIndex:0,children:i(Qr.Provider,{value:It,children:i(Kr.Provider,{value:jt,children:i(e,{})})})})})};return n.displayName="NodeWrapper",a.exports.memo(n)}const Qr=a.exports.createContext(),Kr=a.exports.createContext();function Yr(){return a.exports.useContext(Qr)}function lt(){return a.exports.useContext(Kr)}function Xr(t,e,n){if(!Vn(e,n))return!1;const o=ht(t,e);return nu(t).filter(r=>{const s=ht(t,r);return!Oe(e,r)&&Rd(s,o,20)&&!Bo(t,e,r)})}function zd({className:t,style:e,trigger:n,children:o}){const[r,s]=a.exports.useState(!1);return S(ft,{children:[i("div",{style:e,onMouseEnter:()=>s(!0),children:n}),r?i("div",{className:t,onMouseLeave:()=>s(!1),children:o}):null]})}const Fd=()=>!0,mn=a.exports.memo(a.exports.forwardRef(function(f,p){var x=f,{type:e="source",position:n=H.Top,isValidConnection:o=Fd,isConnectable:r=!1,id:s,onConnect:c,children:u,className:h}=x,d=ut(x,["type","position","isValidConnection","isConnectable","id","onConnect","children","className"]);const{id:g}=lt(),C=Q(m=>m.setConnectionPosition),b=Q(m=>m.setConnectionNodeId),E=M(m=>m.onConnect),w=M(m=>m.onConnectStart),y=M(m=>m.onConnectStop),k=M(m=>m.onConnectEnd),$=M(m=>m.connectionMode),O=s||null,G=e==="target",z=a.exports.useCallback(m=>{E==null||E(m),c==null||c(m)},[E,c]),L=a.exports.useCallback(m=>{Hr(m,O,g,b,C,z,G,o,$,void 0,void 0,w,y,k)},[O,g,b,C,z,G,o,$,w,y,k]),T=On(["nodrag",{source:!G,target:G}]);return i(Hd,I(l({"data-handleid":O,"data-nodeid":g,"data-handlepos":n,"data-handletype":e,isConnectable:r,className:T,position:n,onMouseDown:L,ref:p},d),{children:u}))})),Hd=j("div",{pointerEvents:"none",position:"absolute",width:"10px",height:"10px",variants:{position:{bottom:{top:"auto",left:"50%",bottom:"-4px",transform:"translate(-50%, 0)"},top:{left:"50%",top:"-4px",transform:"translate(-50%, 0)"},left:{top:"50%",left:"0px",transform:"translate(-10px, -50%)"},right:{right:"0px",top:"50%",transform:"translate(0, -50%)"}},isConnectable:{true:{pointerEvents:"all",cursor:"crosshair",background:"$slate9",border:"1px solid $slate9",borderRadius:"100%"}}}});function Ud({hasProblem:t,hideControls:e,parentLimit:n,useControls:o,children:r}){const s=Yr(),{connectingHandleID:c}=s,u=Fe(),h=Kt(u,s).length,d=Wo(u,s);return S(ft,{children:[S(Gd,{isHighlighted:s.highlight,isSelected:s.selected,wasSelected:!s.selected&&!s.isAnySelected&&s.wasOnlySelected,hasProblem:t,children:[r,n===0?null:n===1?i(mn,{isConnectable:h<1&&c==null,position:"left",type:"target"}):S(ft,{children:[i(mn,{id:"0",isConnectable:d[0]==null&&c!=="0",style:{top:"8px"},position:"left",type:"target"}),i(mn,{id:"1",isConnectable:d[1]==null&&c!=="1",style:{top:"calc(100% - 7px)"},position:"left",type:"target"})]}),i(mn,{type:"source",position:"right"})]}),i(qd,{hideControls:e,useControls:o})]})}function qd({hideControls:t,useControls:e}){const n=Yr(),o=Fe(),r=e(n);if(r==null||n.edited||n.isDragging)return null;const s=n.selected,c=!Yl(o,n),u=i("div",{className:"nodrag",style:{position:"absolute",top:"calc(100% + 4px)",left:0},children:r});return(t!=null?t:!1)||!s?null:c?u:i(zd,{className:"nodrag",style:{position:"absolute",top:"50%",left:0,transform:"translate(-100%, -50%)"},trigger:i(Xt,{children:i(tn,{})}),children:u})}const Gd=j("div",{cursor:"move",background:"$slate1",borderRadius:"8px",border:"1px solid $slate7",padding:"2px 8px",".react-flow__handle-connecting &":{borderBottomColor:"$amber9"},variants:{isSelected:{true:{borderColor:"$blue9",boxShadow:"0 0 0 0.5px $colors$blue9"}},wasSelected:{true:{borderColor:"$blue7",boxShadow:"0 0 0 0.5px $colors$blue7"}},isHighlighted:{true:{borderBottomColor:"$amber9"}},hasProblem:{true:{borderColor:"$red9",boxShadow:"0 0 0 0.5px $colors$red9"}}},compoundVariants:[{isSelected:!0,hasProblem:!0,css:{borderColor:"$pink9",boxShadow:"0 0 0 0.5px $colors$pink9"}}]}),Ue=j("div",{display:"flex",flexDirection:"column",variants:{align:{start:{alignItems:"flex-start"},center:{alignItems:"center"},end:{alignItems:"flex-end"},stretch:{alignItems:"stretch"}},justify:{start:{justifyContent:"flex-start"},center:{justifyContent:"center"},end:{justifyContent:"flex-end"},between:{justifyContent:"space-between"}}},defaultVariants:{align:"stretch",justify:"start"}});function gt(){return i(J,{css:{minWidth:"2px"}})}function xn(){return i(J,{css:{minHeight:"2px"}})}function qt({hideControls:t,parentLimit:e,children:n}){var s,c;const o=lt(),r=(c=(s=_t(o)).useHasProblem)==null?void 0:c.call(s,o);return i(Ud,{hasProblem:r,hideControls:t,parentLimit:e,useControls:Vd,children:n})}function Vd(t){const e=nr(),n=Su();if(sn(e)>2)return null;const o=sn(e)===2,r=o&&!tu(e,...ct(e));if(o&&!r)return null;const s=Un.has(t.type),c=lr.has(t.type),u=ts(n);return r?i(rt,{children:i(Jr,{icon:i(tn,{}),action:Pu})}):S(Ue,{children:[!u||s?S(ft,{children:[i(rt,{children:i(jd,{icon:u?i(ko,{}):i(tn,{}),action:u?sr:rr})}),i(xn,{})]}):null,u&&c?i(rt,{children:i(Jr,{icon:i(ko,{}),action:Bu})}):null]})}function jd({action:t,icon:e}){const n=gn();return i(ft,{children:Ft(Un,({label:o},r)=>S(a.exports.Fragment,{children:[i(Hn,{icon:e,onAdd:t(He({nodeConfigs:n},r)),children:o}),i(gt,{})]},r))})}function Jr({action:t,icon:e}){const n=gn();return i(ft,{children:Ft(lr,({label:o},r)=>S(a.exports.Fragment,{children:[i(Hn,{icon:e,onAdd:t(He({nodeConfigs:n},r)),children:o}),i(gt,{})]},r))})}function Zd(){const t=gn();return i(Hn,{icon:i(tn,{}),onAdd:Lu(He({nodeConfigs:t},"from")),children:"FROM"})}const Qd=new Map(Ft(Un,({key:t},e)=>[t,e]));function Kd(t){return(e,n)=>{if(U(ct(e))==null)return;const r=Qd.get(n.altKey?n.code.substr(3,1).toLowerCase():n.key);if(r!=null)return Yd(e,t,r)}}function Yd(t,e,n){return(ts(t.modes)?sr:rr)(He({nodeConfigs:e},n))(t)}function ts(t){return t.alt}function Xd(){return a.exports.useContext(es)}function Jd({children:t}){const[e,n]=a.exports.useState(th()),o=a.exports.useCallback(r=>{n(os(r))},[n]);return a.exports.useEffect(()=>{const r=window.matchMedia(ns);return r.addEventListener("change",o),()=>r.removeEventListener("change",o)},[o]),i(es.Provider,{value:[e,n],children:t})}const es=a.exports.createContext(),ns="(prefers-color-scheme: dark)";function th(){return os(window.matchMedia(ns))}function os(t){return t.matches?"dark":"light"}function eh(){return i(qt,{parentLimit:2,children:"EXCEPT"})}const rs={Component:eh,emptyNodeData:nh,hasProblem(t,e){return W(t,e).length!==2},query(t,e){const n=W(t,e),[o,r]=n;return ss(t,"EXCEPT",o,r)},queryAdditionalValues(t,e){const n=W(t,e),[o,r]=n;return ss(t,"INTERSECT",o,r)},querySelectable(t,e){return rs.query(t,e)},columnNames(t,e){const n=st(W(t,e));return n==null?new Set:it(t,n)},ColumnControl({columnName:t}){return t}};function nh(){return{}}function ss(t,e,n,o){return`
  ${Jt(t,n)}
  ${e}
  ${Jt(t,o)}`}function oh(){return i(qt,{parentLimit:2,children:"INTERSECT"})}const is={Component:oh,emptyNodeData:rh,hasProblem(t,e){return W(t,e).length!==2},query(t,e){const n=W(t,e),[o,r]=n;return Zn(t,"INTERSECT",o,r)},queryAdditionalValues(t,e){const n=W(t,e),[o,r]=n;return`SELECT * FROM (${Zn(t,"EXCEPT",o,r)})
      UNION
      SELECT * FROM (${Zn(t,"EXCEPT",r,o)})`},querySelectable(t,e){return is.query(t,e)},columnNames(t,e){const n=st(W(t,e));return n==null?new Set:it(t,n)},ColumnControl({columnName:t}){return t}};function rh(){return{}}function Zn(t,e,n,o){return`
  ${Jt(t,n)}
  ${e}
  ${Jt(t,o)}`}function cs(){const t=zn();return a.exports.useCallback(()=>{t(e=>{if(uu(e))return dt(e,[]),du(e)})},[t])}function as(){const t=zn();return a.exports.useCallback(()=>{t(e=>{if(hu(e))return dt(e,[]),fu(e)})},[t])}const ls=.1,sh={zoomIn:()=>{},zoomOut:()=>{},zoomTo:t=>{},transform:t=>{},fitView:t=>{},setCenter:(t,e)=>{},fitBounds:t=>{},project:t=>t,initialized:!1},bn=()=>{const t=le(),e=M(r=>r.d3Zoom),n=M(r=>r.d3Selection);return a.exports.useMemo(()=>n&&e?{zoomIn:()=>e.scaleBy(n,1.2),zoomOut:()=>e.scaleBy(n,1/1.2),zoomTo:r=>e.scaleTo(n,r),resetZoom:()=>e.scaleTo(n,1),transform:r=>{const s=Ie.translate(r.x,r.y).scale(r.zoom);e.transform(n,s)},fitView:r=>{const{width:s,height:c,minZoom:u,maxZoom:h}=t.getState();if(r.size===0)return;const d=Ld(Ao(r)),[p,f,x]=Zr(d,s,c,u,h,ls),g=Ie.translate(p,f).scale(x);e.transform(n,g)},setCenter:(r,s,c)=>{const{width:u,height:h,maxZoom:d}=t.getState(),p=typeof c!="undefined"?c:d,f=u/2-r*p,x=h/2-s*p,g=Ie.translate(f,x).scale(p);e.transform(n,g)},fitBounds:(r,s=ls)=>{const{width:c,height:u,minZoom:h,maxZoom:d}=t.getState(),[p,f,x]=Zr(r,c,u,h,d,s),g=Ie.translate(p,f).scale(x);e.transform(n,g)},project:r=>{const{transform:s,snapToGrid:c,snapGrid:u}=t.getState();return jn(r,s,c,u)},initialized:!0}:sh,[e,n])},ih={".cm-content":{caretColor:"$hiContrast"},".cm-cursor, .cm-dropCursor":{borderLeftColor:"$hiContrast"},"&.cm-focused .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:"$slate7"},".cm-activeLine":{backgroundColor:"$slate2"},".cm-selectionMatch":{backgroundColor:"$slate4"},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{outline:"1px solid $slate5"},".cm-tooltip":{border:"none",background:"$slate7",padding:"$4",borderRadius:"$4"},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-editor .cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{whiteSpace:"nowrap",overflow:"hidden auto",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",listStyle:"none",margin:0,padding:0,"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer",padding:"1px 3px",lineHeight:1.2}}},".cm-tooltip-autocomplete ul li[aria-selected]":{background:"$slate10",color:"$loContrast",borderRadius:"2px"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'"\xB7\xB7\xB7"',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"300px"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionMatchedText":{fontWeight:"bold"},".cmt-comment":{color:"$slate11"},".cmt-operator":{color:"$blue11"},".cmt-keyword":{color:"$violet11"},".cmt-string, .cmt-string2":{color:"$green11"},".cmt-number":{color:"$amber11"}};function Gt({extensions:t,emptyDisplayValue:e,autoFocus:n,label:o,value:r,onChange:s}){const[c,u]=a.exports.useState(null),[h,d]=a.exports.useState((n!=null?n:!1)&&r===""?"":null),p=a.exports.useRef(),f=a.exports.useCallback(()=>{var T;((T=p.current)==null?void 0:T.view)!=null&&tl(p.current.view)},[]),x=a.exports.useCallback(()=>{var T;((T=p.current)==null?void 0:T.container)!=null&&p.current.container.closest(".react-flow__node").focus()},[]),g=a.exports.useCallback(T=>{d(null),T!==r&&s(T),f()},[f,s,r]),C=a.exports.useCallback(T=>{g(T),x()},[x,g]),b=a.exports.useCallback(()=>{d(null),f(),x()},[f,x]),E=lt(),w=E==null?void 0:E.id;ah(w,h),lh(p,h,C);const{zoomTo:y}=bn(),k=Rt(),$=a.exports.useCallback(T=>{k(m=>{dt(m,[Y(w)])}),y(1),T!=null&&u({x:T.clientX,y:T.clientY}),d(r!=null?r:"")},[r,w,k,y]),O=cs(),G=as(),z=ch(p,{value:r,edited:h,startEditing:$,stopEditing:g,handleGivenValueChanged:b}),L=us(e!=null?e:r);return S("div",{style:{display:"inline-block"},children:[o!=null?i(uh,{children:o}):null,h!=null?i(ds,{css:{borderWidth:"0 0 1px 0",minWidth:"100px",cursor:"text"},extensions:t,click:c,ref:z,value:h,editable:!0,onUndo:O,onRedo:G,onMouseDown:Ee,onTouchStart:Ee,onChange:d,onConfirm:C,onKeyDown:Ee,onCopy:Ee}):i(ds,{css:{borderWidth:L?"0 0 1px 0":"0",cursor:"pointer",minWidth:L?"100px":void 0},extensions:t,ref:z,editable:!1,value:!L&&us(r)?e:r,onClick:$,onKeyDown:Ee,onCopy:Ee})]})}function us(t){return/^\s*$/.test(t)}function Ee(t){t.stopPropagation()}function ch(t,{value:e,edited:n,startEditing:o,stopEditing:r,handleGivenValueChanged:s}){const[c,u]=a.exports.useState(e);a.exports.useEffect(()=>{e!==c&&(u(e),e!==""&&s())},[n,c,s,e]);const h=a.exports.useCallback(()=>{n==null&&o()},[n,o]),d=a.exports.useCallback(p=>{n!=null&&e===c&&r(n)},[n,c,r,e]);return a.exports.useCallback(p=>{var f,x,g,C,b,E;(x=(f=t.current)==null?void 0:f.container)==null||x.removeEventListener("focusin",h),(g=p==null?void 0:p.container)==null||g.addEventListener("focusin",h),(b=(C=t.current)==null?void 0:C.container)==null||b.removeEventListener("focusout",d),(E=p==null?void 0:p.container)==null||E.addEventListener("focusout",d),t.current=p},[t,h,d])}function ah(t,e){const n=zn();a.exports.useEffect(()=>{t!=null&&n(o=>{ht(o,Y(t)).edited=e!=null})},[e,t,n])}function lh(t,e,n){a.exports.useEffect(()=>{const o=r=>{var s;e!=null&&!((s=t.current)==null?void 0:s.container.contains(r.target))&&n(e)};return document.addEventListener("mouseup",o),()=>{document.removeEventListener("mouseup",o)}},[t,e,n])}function uh(t){return i("span",{style:{fontSize:12},children:t.children})}const ds=a.exports.forwardRef(function(e,n){const y=e,{css:o,value:r,extensions:s,onChange:c,onConfirm:u,editable:h,click:d,onUndo:p,onRedo:f}=y,x=ut(y,["css","value","extensions","onChange","onConfirm","editable","click","onUndo","onRedo"]),g=a.exports.useRef(null),{state:C,view:b,container:E,setContainer:w}=dh({container:g.current,value:r,extensions:s,onChange:c,onConfirm:u,editable:h,click:d,onUndo:p,onRedo:f});if(a.exports.useImperativeHandle(n,()=>({container:E,state:C,view:b}),[E,C,b]),a.exports.useEffect(()=>(w(g.current),()=>{b&&b.destroy()}),[]),typeof r!="string")throw new Error(`value must be typeof string but got ${typeof r}`);return i(J,l({css:l(I(l({borderWidth:0},o),{borderStyle:"solid",borderColor:"$blue9"}),ih),ref:g},x))});function dh(t){const{value:e,extensions:n,onChange:o,onConfirm:r,editable:s,click:c,onUndo:u,onRedo:h}=t,[d,p]=a.exports.useState(t.container),[f,x]=a.exports.useState(),[g,C]=a.exports.useState(),b=a.exports.useRef();b.current=s;const E=Dn.updateListener.of(k=>{if(k.docChanged&&typeof o=="function"&&b.current){const O=k.state.doc.toString();o(O,k)}}),w=za();let y=[...n!=null?n:[],No.allowMultipleSelections.of(!0),Fa(),s?Ha():[],Ua({position:"absolute"}),w.slice(0,-1),To.of([...qa.filter(({key:k})=>k!=="Mod-Enter"),...Ga,{key:"Mod-Enter",run:k=>{Va(k);const O=k.state.doc.toString();r(O)}},{key:"Mod-z",run:k=>(ja(k)||u(),!0),preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:k=>(Za(k)||h(),!0),preventDefault:!0},{key:"Mod-u",run:Qa,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:Ka,preventDefault:!0}]),E,gh,Ya];return a.exports.useEffect(()=>{if(d&&!g){const k=No.create({doc:e,extensions:y});if(C(k),!f){const $=new Dn({state:k,parent:d});x($)}}},[d,g]),a.exports.useEffect(()=>()=>{f&&f.destroy()},[f]),a.exports.useEffect(()=>{if(f){const k=f.state.doc.toString();e!==k&&f.dispatch({changes:{from:0,to:k.length,insert:e||""}})}},[e,f]),a.exports.useEffect(()=>{f&&f.dispatch({effects:Xa.reconfigure.of(y)})},[n,s]),a.exports.useEffect(()=>{s&&f!=null&&hh(f,c)},[s,f,c]),{state:g,setState:C,view:f,setView:x,container:d,setContainer:p}}function hh(t,e){var o;const n=(o=fh(t,e))!=null?o:0;t.focus(),t.dispatch({selection:Ja.cursor(n)})}function fh(t,e){return e==null?null:t.posAtCoords(e)}const gh=Dn.theme({"&.cm-editor.cm-focused":{outline:"none"},"& .cm-scroller":{fontFamily:"inherit",overflowX:"visible"},"& .cm-content":{padding:"0"},"& .cm-line":{padding:0}});function ph(){const t=lt(),e=Se(t),n=$t(t),o=_t(t).useFromInputExtensions(t);return S(qt,{hideControls:e.length===0,parentLimit:0,children:["FROM"," ",i(Gt,{autoFocus:!0,extensions:o,value:e,onChange:r=>{n(s=>{fs(s,r)})}})]})}const hs={Component:ph,emptyNodeData:mh,query(t,e){const n=Se(e);return n.length>0?`SELECT * from ${n}`:null},queryAdditionalTables(t,e){return null},querySelectable(t,e){return hs.query(t,e)},ColumnControl({columnName:t}){return t}};function mh(){return{name:""}}function Se(t){return t.data.name}function fs(t,e){t.data.name=e}const{state:Qn,useSetState:Kn,provider:xh}=Xo({source:null,editorConfig:{tableExists(){return!1},tableColumns(){return[]}}});function we(){return a.exports.useContext(Qn.editorConfig)}function gs(){const t=Fe(),e=we();return a.exports.useMemo(()=>I(l({},t),{editorConfig:e,nodeConfigs:ve}),[t,e])}function bh(){const t=nr(),e=we();return a.exports.useMemo(()=>I(l({},t),{editorConfig:e,nodeConfigs:ve}),[t,e])}function ue(){const t=lt(),e=gs();return Yn(yh(e,t))}function yh(t,e){const n=U(W(t,e));return n==null?{}:mu(it(t,n),()=>[])}function Yn(t){return[$h({dialect:en,schema:t})]}function $h(t){return new el(t.dialect.language,[nl(t)])}const Ch=I(l({},hs),{useHasProblem(){const t=we(),e=lt();return Se(e)!==""&&!Eh({editorConfig:t},e)},useFromInputExtensions(){const{schema:t}=we();return Yn(t)},results(t,e){return Se(e)===""?i(Sh,{node:e}):null},columnNames(t,e){return new Set(t.editorConfig.tableColumns(Se(e)))}});function Eh(t,e){return t.editorConfig.tableExists(Se(e))!=null}function Sh({node:t}){const{schema:e}=we(),n=$t(t),o=Object.keys(e);return o.sort(),S("table",{children:[i("thead",{children:S("tr",{children:[i("th",{children:"Table"}),i("th",{children:"Columns"})]})}),i("tbody",{children:o.map(r=>S("tr",{children:[i("td",{children:i(Ct,{css:{marginVert:"2px"},onClick:()=>{n(s=>{fs(s,r)})},children:r})}),i("td",{children:e[r].join(", ")})]},r))})]})}function ps({css:t,trigger:e,children:n}){const[o,r]=a.exports.useState(!1);return S("div",{style:{position:"relative"},children:[i("div",{onClick:()=>r(!0),children:e}),o?i(J,{css:t,onMouseLeave:()=>r(!1),children:n}):null]})}function yn(t,e){return t.join(","+(/\n/.test(e)?`
`:" "))+(/,\s*$/.test(e)?",":"")}function Xn(t){return t.replace(/,\s*$/,"")}function ms([t,e]){return e!=null?`${t} AS ${e}`:t}function xs([t,e],n){const o=$n([t,e],n);return o===t?o:`${t} AS ${o}`}function $n([t,e],n){return e!=null?e:/^\w+$/.test(t)?t:wh(t,n)}function wh(t,e){const n=t.replace(/\W+/g," ").trim().replace(/\s+/g,"_").toLowerCase();return n!==""?n:"_"+(e+1)}function bs(t){return ke(t).map(st)}function ke(t){let e=[];const n=en.language.parser.parse(t).cursor();if(n.firstChild(),n.firstChild(),n.name==="Script")return e;let o="",r=null;do if(!(n.name==="LineComment"||n.name==="BlockComment")){if(n.name==="Keyword"&&/^as$/i.test(qe(n,t))){n.nextSibling(),r=qe(n,t);continue}if(n.name==="Punctuation"&&(e.push([o,r]),o="",r=null,!n.nextSibling()))break;o!==""&&t[n.from-1]===" "&&(o+=" "),o+=qe(n,t)}while(n.nextSibling());return o!==""&&e.push([o,r]),e}function ys(t){let e=[];const n=en.language.parser.parse(t).cursor();if(n.firstChild(),n.firstChild(),n.name==="Script")return e;let o="",r="";do if(!(n.name==="LineComment"||n.name==="BlockComment")){if(n.name==="Keyword"&&/^asc|desc$/i.test(qe(n,t))&&(r=o,o=""),n.name==="Punctuation"&&(e.push(r.length>0?[r,o]:[o,""]),r="",o="",!n.nextSibling()))break;o!==""&&t[n.from-1]===" "&&(o+=" "),o+=qe(n,t)}while(n.nextSibling());return o!==""&&e.push(r.length>0?[r,o]:[o,""]),e}function qe(t,e,n=0){return e.substring(t.from+n,t.to-n)}function kh(){const t=lt(),e=$t(t),n=_t(t).useGroupByInputExtensions(),o=_t(t).useSelectInputExtensions();return S(qt,{parentLimit:1,children:["GROUP BY"," ",i(Gt,{emptyDisplayValue:"\u2205",extensions:n,value:Cn(t),onChange:r=>{e(s=>{to(s,r)})}}),S(J,{css:{color:de(t)?void 0:"$slate11"},children:["SELECT"," ",i(Gt,{emptyDisplayValue:"*",extensions:o,value:Sn(t),onChange:r=>{e(s=>{ws(s,r)})}})]})]})}const $s={Component:kh,emptyNodeData:Th,query(t,e){const n=U(W(t,e));if(n==null)return null;const o=Pt(t,n);return de(e)?vs(e,Sn(e),o):`SELECT * from (${o})`},queryAdditionalTables(t,e){const n=U(W(t,e));if(n==null)return null;const o=Pt(t,n);if(!de(e))return null;const r=fe(it(t,n),Es(e));return r.length===0?null:[`SELECT ${r.join(",")} FROM (${o})`]},querySelectable(t,e){if(!de(e))return $s.query(t,e);const n=U(W(t,e));if(n==null)return null;const o=Pt(t,n);return vs(e,Ge(e).map(xs).join(","),o)},columnNames(t,e){const n=U(W(t,e));return n==null?new Set:de(e)?new Set(Ge(e).map($n)):it(t,n)},ColumnControl({node:t,columnName:e,isPrimary:n}){const o=$t(t),r=n&&de(t);return!r||Jn(t,e)||Ss(t,e)?S(rt,{align:"center",children:[i("input",{checked:r&&Ss(t,e),style:{cursor:"pointer"},type:"checkbox",onChange:c=>{o(u=>{r&&!Jn(u,e)?Ns(u,e):vh(u,e)})}}),i(gt,{}),i(gt,{}),e,!n&&de(t)?i(Nh,{onChange:c=>{o(u=>{ks(u,Cs[c](e))})}}):null]}):e}};function Nh({onChange:t}){return i(ps,{css:{position:"absolute",top:"100%",background:"$slate7",padding:"$4",borderRadius:"$4"},trigger:i(Xt,{children:i(vo,{})}),children:i(Ue,{children:Object.keys(Cs).map(e=>i(Ct,{css:{marginTop:"$4"},onClick:()=>t(e),children:e},e))})})}const Cs={"COUNT DISTINCT":t=>`COUNT(DISTINCT ${t})`,AVG:t=>`AVG(${t})`,MIN:t=>`MIN(${t})`,MAX:t=>`MAX(${t})`};function Th(){return{groupedBy:"",aggregations:""}}function de(t){return En(t).length>0}function Cn(t){return t.data.groupedBy}function En(t){return bs(Cn(t))}function Es(t){return new Set(En(t))}function Jn(t,e){return Es(t).has(e)}function Sn(t){return t.data.aggregations}function Ss(t,e){return Ge(t).find(([n,o])=>n===e||o===e)!=null}function to(t,e){t.data.groupedBy=e}function ws(t,e){t.data.aggregations=e}function vh(t,e){Jn(t,e)?Ih(t,e):Ah(t,e)}function Ah(t,e){to(t,[...En(t),e].join(", ")),ks(t,e)}function Ih(t,e){to(t,yn(En(t).filter(n=>n!==e),Cn(t))),Ns(t,e)}function ks(t,e){Ts(t,Ge(t).concat(ke(e)))}function Ns(t,e){Ts(t,Ge(t).filter(([n,o])=>n!==e&&o!==e))}function Ts(t,e){ws(t,yn(e.map(ms),Sn(t)))}function Ge(t){return ke(Sn(t))}function vs(t,e,n){return`SELECT ${e===""?"*":Xn(e)}
    FROM (${n})
    GROUP BY ${Xn(Cn(t))}`}const Oh=I(l({},$s),{useGroupByInputExtensions:ue,useSelectInputExtensions:ue});function As({checked:t,onChange:e}){return i("input",{checked:t,style:{cursor:"pointer"},type:"checkbox",onChange:e})}function Dh(){const t=lt(),e=Ne(t),n=$t(t),o=_t(t).useTypeInputExtensions(),r=_t(t).useOnInputExtensions();return S(qt,{parentLimit:2,children:[i(Gt,{emptyDisplayValue:"INNER",extensions:o,value:Is(t),onChange:s=>{n(c=>{Ph(c,s)})}})," ","JOIN ON"," ",i(Gt,{emptyDisplayValue:"\u2205",extensions:r,value:e,onChange:s=>{n(c=>{eo(c,s)})}})]})}const Mh={Component:Dh,emptyNodeData:Rh,hasProblem(t,e){return W(t,e).length!==2},query(t,e){const n=an(t,e),[o,r]=n,s=wn(e),c=fe(o!=null?it(t,o):new Set,new Set(s.map(st))),u=fe(r!=null?it(t,r):new Set,new Set(s.map(Io)));return _s(t,e,o,r,s.length>0?s.map(st).map(h=>"a."+h).concat(c.map(h=>"a."+h),u.map(h=>"b."+h)).join(","):"a.*, b.*")},queryAdditionalTables(t,e){return null},querySelectable(t,e){const n=an(t,e),[o,r]=n,s=n.map(c=>it(t,c));return _s(t,e,o,r,zh(e,s).join(","))},columnNames(t,e){const o=an(t,e).map(r=>it(t,r));return Fh(e,o)},ColumnControl({appState:t,node:e,columnName:n,isPrimary:o,columnIndex:r}){const s=$t(e);if(Vl(t,e))return null;const c=wn(e),u=an(t,e),h=fe(it(t,st(u)),new Set(c.map(st))),d=r<c.length,p=r<c.length+h.length,f=(d?"":(p?"a":"b")+".")+n;return S(rt,{align:"center",children:[d?S(ft,{children:[i(As,{checked:!0,onChange:()=>{s(x=>{Wh(x,n)})}}),i(gt,{}),i(gt,{})]}):null,f,d?null:i(Lh,{columns:Ft(it(t,(p?Io:st)(W(t,e))),x=>(p?"b":"a")+"."+x),onChange:x=>{s(g=>{Bh(g,`${f} = ${x}`)})}})]})}};function Lh({columns:t,onChange:e}){return i(ps,{css:{position:"absolute",top:"100%",background:"$slate7",padding:"$4",borderRadius:"$4"},trigger:i(Xt,{children:i(vo,{})}),children:i(Ue,{children:t.map(n=>i(Ct,{css:{marginTop:"$4"},onClick:()=>e(n),children:n},n))})})}function Rh(){return{type:"INNER",where:""}}function _h(t){return Ne(t).length>0}function Is(t){return t.data.type}function Ne(t){return t.data.where}function Ph(t,e){t.data.type=e}function eo(t,e){t.data.where=e}function Bh(t,e){eo(t,Ne(t)===""?e:`${Ne(t)} AND ${e}`)}function Wh(t,e){eo(t,Hh(Ls(t).filter(n=>{const o=Rs(n);if(o==null)return!0;const[r]=o;return r!==e})))}function zh(t,e){const n=wn(t),o=e.map((r,s)=>Mo(r,new Set(n.map(c=>c[s]))));return n.map(st).map(r=>Os(0,r)).concat(...o.map((r,s)=>Ft(r,c=>{var u;return`${Os(s,c)}${((u=o[Ms(s)])!=null?u:new Set).has(c)?` as ${Ds(s,c)}`:""}`})))}function Fh(t,e){const n=wn(t),o=e.map((r,s)=>Mo(r,new Set(n.map(c=>c[s]))));return new Set(n.map(st).concat(...o.map((r,s)=>Ft(r,c=>{var u;return((u=o[Ms(s)])!=null?u:new Set).has(c)?Ds(s,c):c}))))}function Os(t,e){return`${no(t)}.${e}`}function Ds(t,e){return`${e}_${no(t)}`}function no(t){return t===0?"a":"b"}function Ms(t){return t===0?1:0}function wn(t){return Ls(t).map(Rs).filter(e=>e!=null)}function Ls(t){return Ne(t).split(/\s+AND\s+/)}function Hh(t){return t.join(" AND ")}function Rs(t){const e=t.match(/a\.(\w+)\s*=\s*b\.(\w+)/);if(e==null)return null;const[,n,o]=e;return[n,o]}function _s(t,e,n,o,r){return`SELECT ${r} FROM ${Uh(e,`(${Jt(t,n)}) AS a`,`(${Jt(t,o)}) AS b`)} ${_h(e)?`ON ${Ne(e)}`:""}`}function Uh(t,e,n){const[o,r]=qh(Is(t)),[s,c]=o?[n,e]:[e,n];return`${s} ${r} JOIN ${c}`}function qh(t){const e=t.split(/\s+/);return[e.find(Ps),e.map(o=>Ps(o)?"LEFT":o).join(" ")]}function Ps(t){return/\bright\b/i.test(t)}function Gh(t,e){const n=W(t,e);return xu(n.map(o=>it(t,o)).map((o,r)=>[no(r),Array.from(o)]))}const Vh=I(l({},Mh),{useTypeInputExtensions:ue,useOnInputExtensions(){const t=gs(),e=lt();return Yn(Gh(t,e))}});function jh(){var o,r;const t=lt(),e=$t(t),n=(r=(o=_t(t)).useOrderInputExtensions)==null?void 0:r.call(o);return S(qt,{parentLimit:1,children:["ORDER BY"," ",i(Gt,{emptyDisplayValue:"\u2205",extensions:n,value:Te(t),onChange:s=>{e(c=>{zs(c,s)})}})]})}const Bs={name:"OrderNode",Component:jh,emptyNodeData:Zh,query(t,e){const n=U(W(t,e));if(n==null)return null;const o=Pt(t,n);return Qh(e)?`SELECT * FROM  (${o})
    ORDER BY ${Te(e)}`:o},queryAdditionalTables(){return null},querySelectable(t,e){return Bs.query(t,e)},columnNames(t,e){const n=U(W(t,e));return n==null?new Set:it(t,n)},ColumnControl({node:t,columnName:e}){const n=$t(t);return S(rt,{children:[i(Ct,{onClick:()=>{n(o=>{Kh(o,e)})},children:(()=>{switch(Ws(t,e)){case"ASC":return"\u25B2";case"DESC":return"\u25BC";default:return"-"}})()}),i(gt,{}),e]})}};function Zh(){return{by:""}}function Qh(t){return ke(Te(t)).length>0}function Te(t){return t.data.by}function Ws(t,e){var o;const[,n]=(o=ys(Te(t)).find(([r])=>r===e))!=null?o:[];return n}function zs(t,e){t.data.by=e}function Kh(t,e){zs(t,yn(ys(Te(t)).filter(([n])=>n!==e).concat((()=>{switch(Ws(t,e)){case"ASC":return[[e,"DESC"]];case"DESC":return[];default:return[[e,"ASC"]]}})()).map(n=>n.join(" ")),Te(t)))}const Yh=I(l({},Bs),{useOrderInputExtensions:ue});function Xh(){const t=lt(),e=$t(t),n=_t(t).useSelectInputExtensions();return S(qt,{parentLimit:1,children:["SELECT"," ",i(Gt,{emptyDisplayValue:"*",extensions:n,value:Ve(t),onChange:o=>{e(r=>{Us(r,o)})}})]})}const Jh={Component:Xh,emptyNodeData:tf,useHasProblem(){const t=Fe(),e=lt();return!Kl(t,e)},query(t,e){const n=U(W(t,e)),o=n==null?null:Pt(t,n);return oo(Ve(e),o)},queryAdditionalTables(t,e){const n=U(W(t,e));if(n==null)return null;const o=Pt(t,n);if(!Fs(e))return null;const r=fe(it(t,n),new Set(je(e).map($n)));return r.length===0?null:[oo(r.join(","),o)]},querySelectable(t,e){const n=U(W(t,e)),o=n==null?null:Pt(t,n);return oo(je(e).map(xs).join(","),o)},columnNames(t,e){const n=U(W(t,e));return n==null?new Set:Fs(e)?new Set(je(e).map($n)):it(t,n)},ColumnControl({node:t,columnName:e}){const n=$t(t);return S(rt,{align:"center",children:[i(As,{checked:Hs(t,e),onChange:()=>{n(o=>{of(o,e)})}}),i(gt,{}),i(gt,{}),e,i(gt,{})]})}};function tf(){return{selected:""}}function Ve(t){return t.data.selected}function ef(t){return bs(Ve(t))}function nf(t){return new Set(ef(t))}function je(t){return ke(Ve(t))}function Fs(t){return je(t).length>0}function Hs(t,e){return nf(t).has(e)}function Us(t,e){t.data.selected=e}function of(t,e){const n=je(t);Us(t,yn((Hs(t,e)?n.filter(([o,r])=>o!==e&&r!==e):n.concat(ke(e))).map(ms),Ve(t)))}function oo(t,e){return`SELECT ${t===""?"*":Xn(t)} FROM (${e})`}const rf=I(l({},Jh),{useSelectInputExtensions:ue});function sf(){const t=lt(),e=Gs(t),n=$t(t),o=_t(t).useTypeInputExtensions();return S(qt,{parentLimit:2,children:["UNION"," ",i(Gt,{emptyDisplayValue:"DISTINCT",extensions:o,value:e,onChange:r=>{n(s=>{af(s,r)})}})]})}const qs={Component:sf,emptyNodeData:cf,useHasProblem(){const t=Fe(),e=lt();return W(t,e).length!==2},query(t,e){const n=W(t,e),[o,r]=n;return lf(t,Gs(e),o,r)},querySelectable(t,e){return qs.query(t,e)},columnNames(t,e){const n=st(W(t,e));return n==null?new Set:it(t,n)},ColumnControl({columnName:t}){return t}};function cf(){return{type:""}}function Gs(t){return t.data.type}function af(t,e){t.data.type=e}function lf(t,e,n,o){return`
  ${Jt(t,n)}
  UNION ${e}
  ${Jt(t,o)}`}const uf=I(l({},qs),{useTypeInputExtensions:ue});function df(){const t=lt(),e=kn(t),n=$t(t),o=_t(t).useWhereInputExtensions();return S(qt,{parentLimit:1,children:["WHERE"," ",i(Gt,{emptyDisplayValue:"\u2205",extensions:o,value:e,onChange:r=>{n(s=>{ff(s,r)})}})]})}const Vs={Component:df,emptyNodeData:hf,query(t,e){const n=U(W(t,e));if(n==null)return null;const o=Pt(t,n);return js(e)?`SELECT * FROM (${o}) WHERE ${kn(e)}`:`SELECT * FROM (${o})`},queryAdditionalValues(t,e){const n=U(W(t,e));if(n==null)return null;const o=Pt(t,n);return js(e)?`SELECT * FROM (${o}) WHERE NOT (${kn(e)})`:null},queryAdditionalTables(t,e){return null},querySelectable(t,e){return Vs.query(t,e)},columnNames(t,e){const n=U(W(t,e));return n==null?new Set:it(t,n)},ColumnControl({columnName:t}){return t}};function hf(){return{filters:""}}function js(t){return kn(t).length>0}function kn(t){return t.data.filters}function ff(t,e){t.data.filters=e}const gf=I(l({},Vs),{useWhereInputExtensions:ue}),ve={from:Ch,join:Vh,select:rf,where:gf,group:Oh,order:Yh,union:uf,except:rs,intersect:is};function pf(n){var o=n,{children:t}=o,e=ut(o,["children"]);return S(il,I(l({},e),{children:[i(xf,{}),t]}))}const mf=a.exports.forwardRef((o,n)=>{var r=o,{children:t}=r,e=ut(r,["children"]);return i(bf,I(l({},e),{ref:n,children:t}))}),xf=j(ol,{backgroundColor:"rgba(0, 0, 0, .15)",position:"fixed",zIndex:10,top:0,right:0,bottom:0,left:0}),bf=j(rl,{backgroundColor:"$panel",zIndex:11,borderRadius:"$3",boxShadow:"$colors$shadowLight 0px 10px 38px -10px, $colors$shadowDark 0px 10px 20px -15px",position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",minWidth:200,maxHeight:"85vh",padding:"$4",marginTop:"-5vh",willChange:"transform","&:focus":{outline:"none"}}),yf=sl,Zs="V1";let ro=null;function $f(){const t=()=>{ro!=null&&Qs(ro)};return window.addEventListener("beforeunload",t),()=>{window.removeEventListener("beforeunload",t)}}function Cf(t){Sf(t),ro=t}function Ef(){return window.localStorage.getItem(Zs)}const Sf=wf(Qs,1e3);function Qs(t){window.localStorage.setItem(Zs,t)}function wf(t,e){let n=null,o=!1;return function(){let r=this,s=arguments;const c=function(){n=null,o&&(o=!1,t.apply(r,s))},u=n==null;clearTimeout(n),n=setTimeout(c,e),u?t.apply(r,s):o=!0}}function Ks(t){return JSON.stringify(t,kf)}function Ys(t){return JSON.parse(t,Nf)}const Nn="$%^";function kf(t,e){return e instanceof Map?{[Nn]:"Map",value:Array.from(e.entries())}:e instanceof Set?{[Nn]:"Set",value:Array.from(e.values())}:e}function Nf(t,e){if(typeof e=="object"&&e!==null){if(e[Nn]==="Map")return new Map(e.value);if(e[Nn]==="Set")return new Set(e.value)}return e}var Tf="/seaqull/assets/sql-wasm.19119b55.wasm";function so(t){return(async()=>{const e=await cl({locateFile:r=>Tf}),n=new e.Database(new Uint8Array(t)),o=vf(n);return{db:n,schema:pu(o),tableExists:r=>o.has(r),tableColumns:r=>o.get(r)}})()}function vf(t){return new Map(t.exec('SELECT name, sql FROM sqlite_schema WHERE type="table"')[0].values.map(([e,n])=>[e,Af(n)]))}function Af(t){let e=en.language.parser.parse(t).cursor();e.firstChild(),e.firstChild(),e.nextSibling(),e.nextSibling(),e.nextSibling(),e.firstChild();let n=[],o=!0;for(;e.nextSibling()&&!(e.name==="Keyword"&&/^foreign|constraint$/i.test(io(e,t)));){if(o){const r=e.name==="Brackets";r&&(e.firstChild(),e.nextSibling()),n.push(io(e,t,e.name==="QuotedIdentifier"||e.name==="String"?1:0)),r&&e.parent(),o=!1}e.name==="Punctuation"&&io(e,t)===","&&(o=!0)}return n}function io(t,e,n=0){return e.substring(t.from+n,t.to-n)}const If=j(t=>{const r=t,{newtab:e,children:n}=r,o=ut(r,["newtab","children"]);return S("a",I(l(l({},e?{target:"_blank",rel:"noopener noreferrer"}:{}),o),{children:[n,e?i(al,{style:{display:"inline",marginLeft:2,height:18,paddingBottom:3,verticalAlign:"bottom"}}):null]}))},{cursor:"pointer",alignItems:"center",flexShrink:0,outline:"none",textDecorationLine:"none",textUnderlineOffset:"3px",WebkitTapHighlightColor:"rgba(0,0,0,0)","@hover":{"&:hover":{textDecorationLine:"underline"}},"&:focus":{outlineWidth:"2px",outlineStyle:"solid",outlineOffset:"2px",textDecorationLine:"none",outlineColor:"$blue8"},color:"$blue11",textDecorationColor:"$blue4"});var Of="/seaqull/assets/dvd_rental.d8ad20bd.db";function Xs({defaultOpen:t,children:e}){const[n,o]=a.exports.useState(t),r=()=>{o(!1)};return S(pf,{open:n,onOpenChange:o,children:[e,S(mf,{css:{padding:"$20",borderRadius:"$8"},children:[i("h1",{children:"Welcome to Seaqull(beta)!"}),i("br",{}),S("p",{children:["This is the SQLite version of"," ",i(If,{href:"https://github.com/xixixao/seaqull",newtab:!0,children:"Seaqull"}),"."]}),i("p",{children:"Would you like to explore the example database or one of your own?"}),i("br",{}),S(rt,{children:[i(Df,{onDone:r,children:"Example database"}),i(gt,{}),i(Mf,{onDone:r,children:"Open a database file"})]})]})]})}function Df({onDone:t,children:e}){const n=Kn();return i(Ct,{onClick:()=>{(async()=>{const o=await so(await Js());n(r=>({editorConfig:o,source:{type:"example",name:"dvd_rental.db"}})),t()})()},children:e})}function Mf({children:t,onDone:e}){const n=Kn();return i(Ct,{onClick:()=>{const o=document.createElement("input");o.type="file",o.addEventListener("change",()=>{(async()=>{const r=o.files[0],{name:s}=r,c=await so(await r.arrayBuffer());n(u=>({editorConfig:c,source:{type:"file",name:s}}))})(),e()}),o.click()},children:t})}async function Js(){return await(await fetch(Of)).arrayBuffer()}function ti(){return S(ft,{children:[i(Rf,{}),i(Lf,{})]})}function Lf(){const t=be(),e=a.exports.useContext(Qn.source);return a.exports.useEffect(()=>{Cf(Ks({appState:t,source:e}))},[t,e]),a.exports.useEffect(()=>$f(),[]),null}function Rf(){const[t,e]=a.exports.useState(!0),n=Rt(),o=Kn();return a.exports.useEffect(()=>{const r=Ys(Ef());if(r==null){e(null);return}const{appState:s,source:c}=r;(async()=>{if(n(u=>l(l({},u),s)),(c==null?void 0:c.type)==="example"){const u=await so(await Js());o(()=>({editorConfig:u,source:c}))}else e(null)})()},[n,o]),t==null?i(Xs,{defaultOpen:!0}):null}function _f(t){return new Promise(function(e){setTimeout(e,t)})}const Pf={$$gridColor:"$colors$slate5",$$crosshairColor:"$colors$slate11",$$axisColor:"$colors$slate9",".highcharts-color-0":{fill:"$blue9",stroke:"$blue9"},".highcharts-color-1":{fill:"$grass9",stroke:"$grass9"},".highcharts-color-2":{fill:"$pink9",stroke:"$pink9"},".highcharts-color-3":{fill:"$yellow9",stroke:"$yellow9"},".highcharts-container":{position:"relative",overflow:"hidden",width:"100%",height:"100%",textAlign:"left",lineHeight:"normal",zIndex:0,WebkitTapHighlightColor:"rgba(0,0,0,0)",fontFamily:"inherit",fontSize:"12px"},".highcharts-root":{display:"block"},".highcharts-root text":{strokeWidth:0,fill:"currentColor"},".highcharts-strong":{fontWeight:"bold"},".highcharts-emphasized":{fontStyle:"italic"},".highcharts-anchor":{cursor:"pointer"},".highcharts-background":{fill:"none"},".highcharts-plot-border, .highcharts-plot-background":{fill:"none"},".highcharts-label-box":{fill:"none"},".highcharts-button-box":{fill:"inherit"},".highcharts-tracker-line":{strokeLinejoin:"round",stroke:"rgba(192, 192, 192, 0.0001)",strokeWidth:22,fill:"none"},".highcharts-tracker-area":{fill:"rgba(192, 192, 192, 0.0001)",strokeWidth:0},".highcharts-title":{},".highcharts-subtitle":{fill:"$neutral-color-60"},".highcharts-axis-line":{fill:"none",stroke:"$$axisColor"},".highcharts-yaxis .highcharts-axis-line":{strokeWidth:0},".highcharts-axis-title":{fill:"$neutral-color-60"},".highcharts-axis-labels":{fill:"$neutral-color-60",cursor:"default",fontSize:"$axis-labels-font-size"},".highcharts-grid-line":{fill:"none",stroke:"$$gridColor"},".highcharts-xaxis-grid .highcharts-grid-line":{strokeWidth:0},".highcharts-tick":{stroke:"$$axisColor"},".highcharts-yaxis .highcharts-tick":{strokeWidth:0},".highcharts-crosshair-thin":{strokeWidth:"1px",stroke:"$$crosshairColor"},".highcharts-crosshair-category":{stroke:"$$axisColor",strokeOpacity:.25},".highcharts-credits":{cursor:"pointer",fill:"$neutral-color-40",fontSize:"0.7em",transition:"fill 250ms, font-size 250ms"},".highcharts-credits:hover":{fill:"black",fontSize:"1em"},".highcharts-tooltip":{cursor:"default",pointerEvents:"none",whiteSpace:"nowrap",transition:"stroke 150ms"},".highcharts-tooltip text":{fill:"$neutral-color-80"},".highcharts-tooltip .highcharts-header":{fontSize:"0.85em"},".highcharts-tooltip-box":{strokeWidth:"$tooltip-border",fill:"$loContrast",fillOpacity:.85},".highcharts-tooltip-box .highcharts-label-box":{fill:"$loContrast",fillOpacity:.85},".highcharts-selection-marker":{fill:"$highlight-color-80",fillOpacity:.25},".highcharts-graph":{fill:"none",strokeWidth:"1.7px",strokeLinecap:"round",strokeLinejoin:"round"},".highcharts-state-hover .highcharts-graph":{strokeWidth:3},".highcharts-state-hover path":{transition:"stroke-width 50"},".highcharts-state-normal path":{transition:"stroke-width 250ms"},"g.highcharts-series,\n.highcharts-point,\n.highcharts-markers,\n.highcharts-data-labels":{transition:"opacity 250ms"},".highcharts-legend-series-active g.highcharts-series:not(.highcharts-series-hover),\n.highcharts-legend-point-active .highcharts-point:not(.highcharts-point-hover),\n.highcharts-legend-series-active .highcharts-markers:not(.highcharts-series-hover),\n.highcharts-legend-series-active .highcharts-data-labels:not(.highcharts-series-hover)":{opacity:.2},".highcharts-area":{fillOpacity:.75,strokeWidth:0},".highcharts-markers":{strokeWidth:"1px",stroke:"$background-color"},".highcharts-point":{strokeWidth:"1px"},".highcharts-dense-data .highcharts-point":{strokeWidth:0},".highcharts-data-label":{fontSize:"0.9em",fontWeight:"bold"},".highcharts-data-label-box":{fill:"none",strokeWidth:0},".highcharts-data-label text, text.highcharts-data-label":{fill:"$data-label-color"},".highcharts-data-label-connector":{fill:"none"},".highcharts-halo":{fillOpacity:.25,strokeWidth:0},".highcharts-series:not(.highcharts-pie-series) .highcharts-point-select":{fill:"$neutral-color-20",stroke:"$neutral-color-100"},".highcharts-column-series rect.highcharts-point":{stroke:"$background-color"},".highcharts-column-series .highcharts-point":{transition:"fill-opacity 250ms"},".highcharts-column-series .highcharts-point-hover":{fillOpacity:.75,transition:"fill-opacity 50ms"},".highcharts-pie-series .highcharts-point":{strokeLinejoin:"round",stroke:"$background-color"},".highcharts-pie-series .highcharts-point-hover":{fillOpacity:.75,transition:"fill-opacity 50ms"},".highcharts-funnel-series .highcharts-point":{strokeLinejoin:"round",stroke:"$background-color"},".highcharts-funnel-series .highcharts-point-hover":{fillOpacity:.75,transition:"fill-opacity 50ms"},".highcharts-funnel-series .highcharts-point-select":{fill:"inherit",stroke:"inherit"},".highcharts-pyramid-series .highcharts-point":{strokeLinejoin:"round",stroke:"$background-color"},".highcharts-pyramid-series .highcharts-point-hover":{fillOpacity:.75,transition:"fill-opacity 50ms"},".highcharts-pyramid-series .highcharts-point-select":{fill:"inherit",stroke:"inherit"},".highcharts-solidgauge-series .highcharts-point":{strokeWidth:0},".highcharts-treemap-series .highcharts-point":{strokeWidth:"1px",stroke:"$neutral-color-10",transition:"stroke 250ms, fill 250ms, fill-opacity 250ms"},".highcharts-treemap-series .highcharts-point-hover":{stroke:"$neutral-color-40",transition:"stroke 25ms, fill 25ms, fill-opacity 25ms"},".highcharts-treemap-series .highcharts-above-level":{display:"none"},".highcharts-treemap-series .highcharts-internal-node":{fill:"none"},".highcharts-treemap-series .highcharts-internal-node-interactive":{fillOpacity:.15,cursor:"pointer"},".highcharts-treemap-series .highcharts-internal-node-interactive:hover":{fillOpacity:.75},".highcharts-legend-box":{fill:"none",strokeWidth:0},".highcharts-legend-item text":{fontWeight:"bold",cursor:"pointer",strokeWidth:0},".highcharts-legend-item:hover text":{fill:"$neutral-color-100"},".highcharts-legend-item-hidden *":{fill:"'$neutral-color-20' !important",stroke:"'$neutral-color-20' !important",transition:"fill 250ms"},".highcharts-legend-nav-active":{fill:"$highlight-color-100",cursor:"pointer"},".highcharts-legend-nav-inactive":{fill:"$neutral-color-20"},".highcharts-legend-title-box":{fill:"none",strokeWidth:0},".highcharts-loading":{position:"absolute",opacity:.5,textAlign:"center",zIndex:10,transition:"opacity 250ms"},".highcharts-loading-hidden":{height:"0 !important",opacity:0,overflow:"hidden",transition:"opacity 250ms, height 250ms step-end"},".highcharts-loading-inner":{fontWeight:"bold",position:"relative",top:"45%"},".highcharts-plot-band, .highcharts-pane":{fill:"$neutral-color-100",fillOpacity:.05},".highcharts-plot-line":{fill:"none",stroke:"$neutral-color-40",strokeWidth:"1px"},".highcharts-boxplot-box":{fill:"$background-color"},".highcharts-boxplot-median":{strokeWidth:"2px"},".highcharts-bubble-series .highcharts-point":{fillOpacity:.5},".highcharts-errorbar-series .highcharts-point":{stroke:"$neutral-color-100"},".highcharts-gauge-series .highcharts-data-label-box":{stroke:"$neutral-color-20",strokeWidth:"1px"},".highcharts-gauge-series .highcharts-dial":{fill:"$neutral-color-100",strokeWidth:0},".highcharts-polygon-series .highcharts-graph":{fill:"inherit",strokeWidth:0},".highcharts-waterfall-series .highcharts-graph":{stroke:"$neutral-color-80",strokeDasharray:"1, 3"},".highcharts-sankey-series .highcharts-point":{strokeWidth:0},".highcharts-sankey-series .highcharts-link":{transition:"fill 250ms, fill-opacity 250ms",fillOpacity:.5},".highcharts-sankey-series .highcharts-point-hover.highcharts-link":{transition:"fill 50ms, fill-opacity 50ms",fillOpacity:1},".highcharts-navigator-mask-outside":{fillOpacity:0},".highcharts-navigator-mask-inside":{fill:"$highlight-color-60",fillOpacity:.25,cursor:"ew-resize"},".highcharts-navigator-outline":{stroke:"$neutral-color-20",fill:"none"},".highcharts-navigator-handle":{stroke:"$neutral-color-20",fill:"$neutral-color-5",cursor:"ew-resize"},".highcharts-navigator-series":{fill:"$navigator-series-fill",stroke:"$navigator-series-border"},".highcharts-navigator-series .highcharts-graph":{strokeWidth:"1px"},".highcharts-navigator-series .highcharts-area":{fillOpacity:.05},".highcharts-navigator-xaxis .highcharts-axis-line":{strokeWidth:0},".highcharts-navigator-xaxis .highcharts-grid-line":{strokeWidth:"1px",stroke:"$neutral-color-10"},".highcharts-navigator-xaxis.highcharts-axis-labels":{fill:"currentColor"},".highcharts-navigator-yaxis .highcharts-grid-line":{strokeWidth:0},".highcharts-scrollbar-thumb":{fill:"$neutral-color-20",stroke:"$neutral-color-20",strokeWidth:"1px"},".highcharts-scrollbar-button":{fill:"$neutral-color-10",stroke:"$neutral-color-20",strokeWidth:"1px"},".highcharts-scrollbar-arrow":{fill:"$neutral-color-60"},".highcharts-scrollbar-rifles":{stroke:"$neutral-color-60",strokeWidth:"1px"},".highcharts-scrollbar-track":{fill:"$scrollbar-track-background",stroke:"$scrollbar-track-border",strokeWidth:"1px"},".highcharts-button":{fill:"$highcharts-button-background",stroke:"$highcharts-button-border",cursor:"default",strokeWidth:"1px",transition:"fill 250ms"},".highcharts-button text":{fill:"$highcharts-button-text"},".highcharts-button-hover":{transition:"fill 0ms",fill:"$highcharts-button-hover-background",stroke:"$highcharts-button-hover-border"},".highcharts-button-hover text":{fill:"$highcharts-button-hover-text"},".highcharts-button-pressed":{fontWeight:"bold",fill:"$highcharts-button-pressed-background",stroke:"$highcharts-button-pressed-border"},".highcharts-button-pressed text":{fill:"$highcharts-button-pressed-text",fontWeight:"bold"},".highcharts-button-disabled text":{fill:"$highcharts-button-text"},".highcharts-range-selector-buttons .highcharts-button":{strokeWidth:"$range-selector-button-border"},".highcharts-range-label rect":{fill:"none"},".highcharts-range-label text":{fill:"$neutral-color-60"},".highcharts-range-input rect":{fill:"none"},".highcharts-range-input text":{fill:"$range-selector-input-text"},".highcharts-range-input":{strokeWidth:"1px",stroke:"$range-selector-input-border"},"input.highcharts-range-selector":{position:"absolute",border:"0",width:"1px",height:"1px",padding:"0",textAlign:"center",left:"-9em"},".highcharts-crosshair-label text":{fill:"$background-color",fontSize:"1.1em"},".highcharts-crosshair-label .highcharts-label-box":{fill:"inherit"},".highcharts-candlestick-series .highcharts-point":{stroke:"$neutral-color-100",strokeWidth:"1px"},".highcharts-candlestick-series .highcharts-point-up":{fill:"$background-color"},".highcharts-ohlc-series .highcharts-point-hover":{strokeWidth:"3px"},".highcharts-flags-series .highcharts-point .highcharts-label-box":{stroke:"$neutral-color-40",fill:"$background-color",transition:"fill 250ms"},".highcharts-flags-series .highcharts-point-hover .highcharts-label-box":{stroke:"$neutral-color-100",fill:"$highlight-color-20"},".highcharts-flags-series .highcharts-point text":{fill:"$neutral-color-100",fontSize:"0.9em",fontWeight:"bold"},".highcharts-map-series .highcharts-point":{transition:"fill 500ms, fill-opacity 500ms, stroke-width 250ms",stroke:"$neutral-color-20"},".highcharts-map-series .highcharts-point-hover":{transition:"fill 0ms, fill-opacity 0ms",fillOpacity:.5,strokeWidth:"2px"},".highcharts-mapline-series .highcharts-point":{fill:"none"},".highcharts-heatmap-series .highcharts-point":{strokeWidth:0},".highcharts-map-navigation":{fontSize:"1.3em",fontWeight:"bold",textAlign:"center"},".highcharts-coloraxis":{strokeWidth:0},".highcharts-coloraxis-marker":{fill:"$neutral-color-40"},".highcharts-null-point":{fill:"$neutral-color-3"},".highcharts-3d-frame":{fill:"transparent"},".highcharts-contextbutton":{fill:"$context-button-background",stroke:"none",strokeLinecap:"round"},".highcharts-contextbutton:hover":{fill:"$neutral-color-10",stroke:"$neutral-color-10"},".highcharts-button-symbol":{stroke:"$neutral-color-60",strokeWidth:"3px"},".highcharts-menu":{border:"1px solid '$neutral-color-40'",background:"$background-color",padding:"5px 0",boxShadow:"3px 3px 10px #888"},".highcharts-menu-item":{padding:"0.5em 1em",background:"none",color:"$neutral-color-80",cursor:"pointer",transition:"background 250ms, color 250ms"},".highcharts-menu-item:hover":{background:"$highlight-color-80",color:"$background-color"},".highcharts-drilldown-point":{cursor:"pointer"},".highcharts-drilldown-data-label text,\ntext.highcharts-drilldown-data-label,\n.highcharts-drilldown-axis-label":{cursor:"pointer",fill:"$highlight-color-100",fontWeight:"bold",textDecoration:"underline"},".highcharts-no-data text":{fontWeight:"bold",fontSize:"12px",fill:"$neutral-color-60"},".highcharts-axis-resizer":{cursor:"ns-resize",stroke:"black",strokeWidth:"2px"},".highcharts-bullet-target":{strokeWidth:0},".highcharts-lineargauge-target":{strokeWidth:"1px",stroke:"$neutral-color-80"},".highcharts-lineargauge-target-line":{strokeWidth:"1px",stroke:"$neutral-color-80"},".highcharts-annotation-label-box":{strokeWidth:"1px",stroke:"$neutral-color-100",fill:"$neutral-color-100",fillOpacity:.75},".highcharts-annotation-label text":{fill:"''$neutral-color-10''"},".highcharts-treegrid-node-collapsed, .highcharts-treegrid-node-expanded":{cursor:"pointer"},".highcharts-point-connecting-path":{fill:"none"},".highcharts-grid-axis .highcharts-tick":{strokeWidth:"1px"},".highcharts-grid-axis .highcharts-axis-line":{strokeWidth:"1px"}},Bf=a.exports.memo(function({state:{appState:e,tables:n}}){const o=a.exports.useRef(),r={name:"Foo",data:[[2012,2],[2013,1],[2014,5],[2015,4],[2016,3]].map(([s,c])=>[+new Date(Date.UTC(s)),c])};return i(J,{ref:o,css:l({width:"100%",height:"100%"},Pf),children:i(ll,{highcharts:ul,options:{chart:{styledMode:!0},title:{text:""},xAxis:{type:"datetime",crosshair:!0},yAxis:{title:{text:""}},series:[r],plotOptions:{series:{stickyTracking:!1,marker:{enabled:!1}}},credits:{enabled:!1}}})})});function Wf({executedSql:t,execQuery:e,useAppContext:n}){var c;const o=n(),r=ct(o),s=U(r);return(c=s!=null?Fu(o,s):null)!=null?c:i(zf,{executedSql:t,execQuery:e,useAppContext:n})}function zf({executedSql:t,execQuery:e,useAppContext:n}){const o=n(),[r,s]=a.exports.useState(null),[c,u]=a.exports.useState(),[h,d]=a.exports.useState(!1);return a.exports.useEffect(()=>{var k;const p=ct(o),f=p.length>0,x=U(Uo(o));if(x==null&&!f){s(null);return}const g=(k=U(p))!=null?k:x,C=p.length===1,b=(f?p:[g]).map($=>(C?Hu:Pt)(o,$)).concat(C?Uu(o,g):[]).filter($=>$!=null).slice(0,2),E=[C?qu(o,g):null].filter($=>$!=null);b.length>0&&d(!0);let w=!1;return w?void 0:(d(!1),b.length>0&&(s({queries:b,tables:b.map($=>e($)),additionalValues:E.map($=>e($)).filter($=>!($ instanceof co)),appState:o}),u(x!=null&&g!=null&&!Oe(g,x))),_f(1e3).then(()=>{w||u(!1)}),()=>{w=!0})},[o,e]),h&&r==null?i("div",{style:{padding:12},children:"Loading..."}):r==null?null:i(Ff,{updated:c,state:r,executedSql:t})}function Ff({updated:t,state:e,executedSql:n}){const[o,r]=a.exports.useState("table"),s=jf(e.tables),c=i(Gf,{view:o,setView:r});return s==null&&(o==="table"||o==="chart")?o==="table"?i(Hf,{controls:c,tables:i(Zf,{state:e}),updated:t}):i(Uf,{controls:c,chart:i(Bf,{state:e}),updated:t}):i(qf,{controls:c,sql:o!=="sql"?s:i(ao,{background:"$slate2",children:n(e.queries[0])}),updated:t})}function Hf({tables:t,controls:e,updated:n}){return S(rt,{css:{overflow:"scroll",padding:"0 $8",maxHeight:"100%"},children:[i(J,{css:{display:"inline-flex",table:{animation:ei(n)}},children:t}),i(J,{css:{paddingLeft:"$8",flexGrow:1},children:i(rt,{justify:"end",children:e})}),i(J,{css:{padding:"$8",top:0,right:0,position:"absolute",background:"$panel",borderBottomLeftRadius:"$4"},children:i(rt,{justify:"end",children:e})})]})}function Uf({controls:t,chart:e}){return S(rt,{css:{height:"100%",overflow:"hidden",padding:"$8"},justify:"end",children:[e,t]})}function qf({sql:t,controls:e,updated:n}){return S(rt,{css:{overflow:"scroll",maxHeight:"100%"},children:[i(J,{css:{display:"inline-flex",animation:ei(n)},children:t}),i(J,{css:{paddingLeft:"$8",flexGrow:1},children:i(rt,{justify:"end",children:e})}),i(J,{css:{padding:"$8",top:0,right:0,position:"absolute",background:"$panel",borderBottomLeftRadius:"$4"},children:i(rt,{justify:"end",children:e})})]})}function Gf({view:t,setView:e}){return S(ft,{children:[i(Ct,{disabled:t==="table",onClick:()=>{e("table")},children:"Table"}),i(gt,{}),i(Ct,{disabled:t==="chart",onClick:()=>{e("chart")},children:"Chart"}),i(gt,{}),i(Ct,{disabled:t==="sql",onClick:()=>{e("sql")},children:"SQL"})]})}function ei(t){return t?`${Vf} 1s ease-out`:null}const Vf=or({from:{background:"$lime3"},to:{}});function jf(t){if(t[0]instanceof co)return i(ao,{background:"$yellow3",label:"No results from:",children:t[0].sql});const e=t.find(n=>n instanceof oi);return e!=null?i(ao,{background:"$red3",label:e.error.toString()+" in:",children:e.sql}):null}const Zf=a.exports.memo(function({state:{appState:e,tables:n,additionalValues:o}}){console.log("rendering",n);const r=U(ct(e));return n.map(({columns:s,values:c},u)=>{const h=u===0,d=o[u];return S(Yf,{css:{textAlign:"start",whiteSpace:"nowrap",th:{fontWeight:600,height:"36px"},color:h?null:"$slate11"},children:[i("thead",{children:i("tr",{children:s.map((p,f)=>i("th",{children:r==null?p:Qf(e,r,p,h,f)},f))})}),i(ni,{values:c}),d!=null?i(ni,{css:{color:"$slate11"},values:d.values}):null]},u)})});function Qf(t,e,n,o,r){const s=Gu(t,e);return i(s,{appState:t,node:e,columnName:n,isPrimary:o,columnIndex:r})}function ni({css:t,values:e}){return i(Kf,{css:t,children:e.map((n,o)=>i("tr",{children:n.map((r,s)=>i("td",{children:r},s))},o))})}const Kf=j("tbody"),Yf=j("table",{borderCollapse:"collapse",height:"fit-content",th:{position:"sticky",top:"0",background:"$panel",whiteSpace:"nowrap",textAlign:"start",padding:"$8 $4 0 $4",boxShadow:"inset 0 -1px 0 $colors$slate7"},td:{padding:"0 4px",whiteSpace:"nowrap"},"tbody tr":{borderBottom:"1px solid $slate3"}});class oi{constructor(e,n){this.sql=e,this.error=n}}class co{constructor(e){this.sql=e}}function ao({background:t,label:e,children:n}){return i(rt,{css:{padding:"$8"},children:S(Ue,{css:{background:t,padding:"$12",borderRadius:"$4"},children:[e,e!=null?i(xn,{}):null,i(Xf,{children:n})]})})}const Xf=j(n=>{var o=n,{children:t}=o,e=ut(o,["children"]);return i("pre",I(l({},e),{children:dl(t!=null?t:"",{language:"postgresql"})}))},{lineHeight:1,fontFamily:"Menlo, Consolas, Monaco, monospace",fontSize:"12px"});function ri(){const t=we(),e=a.exports.useCallback(n=>Jf(t.db,n),[t.db]);return i(Wf,{execQuery:e,executedSql:si,useAppContext:bh})}function Jf(t,e){let n=null;try{n=t.exec(si(e))}catch(o){return new oi(e,o)}return n.length===0?new co(e):n[0]}function si(t){return t+(/limit \d+\s*$/i.test(t)?"":" LIMIT 100")}const lo=j("div",{position:"absolute",zIndex:"inherit",variants:{top:{true:{top:0}},right:{true:{right:0}},left:{true:{left:0}},bottom:{true:{bottom:0}},center:{true:{}}},compoundVariants:[{top:!0,center:!0,css:{left:"50%",transform:"translate(-50%, 0)"}},{bottom:!0,center:!0,css:{left:"50%",transform:"translate(-50%, 0)"}},{left:!0,center:!0,css:{top:"50%",transform:"translate(0, -50%)"}},{right:!0,center:!0,css:{top:"50%",transform:"translate(0, -50%)"}}]}),ii=a.exports.createContext();function Ze(o){var r=o,{children:t,content:e}=r,n=ut(r,["children","content"]);var c;const s=(c=a.exports.useContext(ii))!=null?c:{};return S(fl,{children:[i(gl,{asChild:!0,children:t}),S(eg,I(l(l({sideOffset:3},s),n),{children:[e,i(tg,{css:{color:"$transparentPanel"},children:i(pl,{offset:7,width:11,height:5,style:{fill:"currentColor"}})})]}))]})}function ci(n){var o=n,{children:t}=o,e=ut(o,["children"]);return i(ii.Provider,{value:e,children:t})}const tg=j("div"),eg=j(hl,{backgroundColor:"$transparentPanel",borderRadius:"$4",padding:"$4 $8",color:"$loContrast",font:"$detail"});function ng(){const{zoomIn:t,zoomOut:e,resetZoom:n}=bn();return S(ft,{children:[i(Ze,{content:"Zoom in",children:i(Xt,{onClick:t,children:i(ml,{})})}),i(Ze,{content:"Zoom out",children:i(Xt,{onClick:e,children:i(xl,{})})}),i(og,{}),i(xn,{}),i(xn,{}),i(Ze,{content:"Reset zoom",children:i(Ct,{ghost:!0,onClick:n,children:i(rg,{})})})]})}function og({tooltipProps:t}){const{fitView:e}=bn(),n=a.exports.useContext(fn.positions);return i(Ze,{content:"Fit view",children:i(Xt,{onClick:()=>e(n),children:i(bl,{})})})}function rg(){const[,,t]=M(e=>e.transform);return Math.floor(t*10)*10+"%"}function Tn(t,e,n){a.exports.useEffect(()=>(t.addEventListener(e,n),()=>{t.removeEventListener(e,n)}),[t,e,n])}function sg(t){const e=To.of(t.map(r=>I(l({},r),{run:({value:s,event:c})=>r.run(s,c)}))),n=e.facet.extensions.fields[0].get().handlers.keydown,o={facet:()=>e.value};return(r,s)=>n(s,{state:o,value:r,event:s})}const ig=j("svg");function cg(){const[t,e,n]=M(f=>f.transform),o=a.exports.useMemo(()=>`pattern-${Math.floor(Math.random()*1e5)}`,[]),r=.5,c=15*n,u=t%c,h=e%c,d="#81818a",p=ag(r*n,d);return S(ig,{style:{width:"100%",height:"100%",position:"absolute",top:0,left:0},children:[i("pattern",{id:o,x:u,y:h,width:c,height:c,patternUnits:"userSpaceOnUse",children:p}),i("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${o})`})]})}function ag(t,e){return i("circle",{cx:t,cy:t,r:t,fill:e})}function lg({children:t}){const e=a.exports.useMemo(()=>Br(Gn),[]);return i(yl,{store:e,children:t})}const ai=[H.Left,H.Right],ug=({sourceX:t,sourceY:e,targetX:n,targetY:o,sourcePosition:r=H.Bottom,targetPosition:s=H.Top})=>{const c=ai.includes(r),u=ai.includes(s);if(c&&!u||u&&!c){const g=c?Math.abs(n-t):0,C=t>n?t-g:t+g,b=c?0:Math.abs(o-e),E=e<o?e+b:e-b;return[C,E,g,b]}const d=Math.abs(n-t)/2,p=n<t?n+d:n-d,f=Math.abs(o-e)/2,x=o<e?o+f:o-f;return[p,x,d,f]},li=j("g"),dg=j("path"),ui=a.exports.memo(function({sourceX:e,sourceY:n,targetX:o,targetY:r,sourcePosition:s=H.Bottom,targetPosition:c=H.Top,isDragged:u}){return i(ft,{children:S(li,{css:l({color:"$slate9"},u?{}:{".updating &":{color:"$slate12"}}),children:[i(dg,{css:u?{strokeDasharray:5,animation:`${fg} 0.5s linear infinite`}:{},fill:"none",stroke:"currentColor",strokeWidth:1,d:hg({sourceX:e,sourceY:n,sourcePosition:s,targetX:o,targetY:r,targetPosition:c})}),i("g",{transform:`translate(${o},${r})`,children:i("polygon",{stroke:"currentColor",fill:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1",points:"-4,-3 0,0 -4,3"})})]})})});function hg({sourceX:t,sourceY:e,sourcePosition:n=H.Bottom,targetX:o,targetY:r,targetPosition:s=H.Top,centerX:c,centerY:u}){const[h,d]=ug({sourceX:t,sourceY:e,targetX:o,targetY:r}),p=[H.Left,H.Right],f=typeof c!="undefined"?c:h,x=typeof u!="undefined"?u:d;if(p.includes(n)&&p.includes(s)){const g=Math.min(100,Math.abs(r-e)),C=Math.max(0,t-o+g),b=Math.max(f,t+C+0),E=Math.min(f,o-C-0);return`M${t},${e} C${b},${e} ${E},${r} ${o},${r}`}else return p.includes(s)?`M${t},${e} Q${t},${r} ${o},${r}`:p.includes(n)?`M${t},${e} Q${o},${e} ${o},${r}`:`M${t},${e} C${t},${x} ${o},${x} ${o},${r}`}const fg=or({from:{strokeDashoffset:10}}),di=({position:t,centerX:e,centerY:n,radius:o=10})=>i(gg,{css:{cursor:"move",pointerEvents:"all"},cx:pg(e,o,t),cy:mg(n,o,t),r:o,stroke:"transparent",fill:"transparent"}),gg=j("circle"),pg=(t,e,n)=>n===H.Left?t-e:n===H.Right?t+e:t,mg=(t,e,n)=>n===H.Top?t-e:n===H.Bottom?t+e:t;function xg(t){const e=({id:n,type:o,data:r,onClick:s,onEdgeDoubleClick:c,selected:u,animated:h,label:d,labelStyle:p,labelShowBg:f,labelBgStyle:x,labelBgPadding:g,labelBgBorderRadius:C,style:b,arrowHeadType:E,source:w,target:y,sourceX:k,sourceY:$,targetX:O,targetY:G,sourcePosition:z,targetPosition:L,elementsSelectable:T,markerEndId:m,isHidden:v,sourceHandleId:D,targetHandleId:P,handleEdgeUpdate:Z,isValidConnection:K,onConnectEdge:tt,onContextMenu:R,onMouseEnter:pt,onMouseMove:nt,onMouseLeave:at,edgeUpdaterRadius:Et})=>{const[mt,Bt]=a.exports.useState(!1),xt=Q(A=>A.setConnectionNodeId),St=Q(A=>A.setConnectionPosition),Wt=M(A=>A.connectionMode),[vt,ot]=a.exports.useState(!1),te=On([{selected:u,animated:h,inactive:!T&&!s,updating:vt}]),et=a.exports.useMemo(()=>{const A={id:n,source:w,target:y,type:o};return D&&(A.sourceHandle=D),P&&(A.targetHandle=P),typeof r!="undefined"&&(A.data=r),A},[n,w,y,o,D,P,r]),ee=a.exports.useCallback(A=>{s==null||s(A,et)},[T,et,s]),ne=a.exports.useCallback(A=>{c==null||c(A,et)},[et,c]),oe=a.exports.useCallback(A=>{R==null||R(A,et)},[et,R]),re=a.exports.useCallback(A=>{pt==null||pt(A,et)},[et,R]),se=a.exports.useCallback(A=>{nt==null||nt(A,et)},[et,R]),ie=a.exports.useCallback(A=>{at==null||at(A,et)},[et,R]),At=a.exports.useCallback((A,It)=>{const N=It?y:w,V=It?P:D,Ot=It;Bt(!0),Hr(A,V,N,xt,St,tt,Ot,K,Wt,It?"target":"source",()=>{Bt(!1)})},[n,w,y,o,D,P,xt,St,et,tt,K]),ce=a.exports.useCallback(A=>{At(A,!0)},[n,w,D,At]),zt=a.exports.useCallback(A=>{At(A,!1)},[n,y,P,At]),Vt=a.exports.useCallback(()=>ot(!0),[ot]),jt=a.exports.useCallback(()=>ot(!1),[ot]);return v?null:S(li,{css:{pointerEvents:"visibleStroke","&.inactive":{pointerEvents:"none"}},className:te,onClick:ee,onDoubleClick:ne,onContextMenu:oe,onMouseEnter:re,onMouseMove:se,onMouseLeave:ie,children:[i(t,{id:n,source:w,target:y,selected:u,animated:h,isDragged:mt,label:d,labelStyle:p,labelShowBg:f,labelBgStyle:x,labelBgPadding:g,labelBgBorderRadius:C,data:r,style:b,arrowHeadType:E,sourceX:k,sourceY:$,targetX:O,targetY:G,sourcePosition:z,targetPosition:L,markerEndId:m,sourceHandleId:D,targetHandleId:P}),Z&&i("g",{onMouseDown:ce,onMouseEnter:Vt,onMouseOut:jt,children:i(di,{position:z,centerX:k,centerY:$,radius:Et})}),Z&&i("g",{onMouseDown:zt,onMouseEnter:Vt,onMouseOut:jt,children:i(di,{position:L,centerX:O,centerY:G,radius:Et})})]})};return e.displayName="EdgeWrapper",a.exports.memo(e)}const uo=j("div",{width:"100%",height:"100%",position:"relative",overflow:"hidden"}),bg=j("div",{position:"absolute",top:0,left:0,width:"100%",height:"100%"}),yg=a.exports.memo(function({selectionKeyPressed:e}){const n=M(p=>p.transform),[o,r]=a.exports.useState(null),s=ku(),c=zr();if(!(o!=null||e))return null;const u=p=>{const f=hi(p);!f||r({width:0,height:0,startX:f.x,startY:f.y,x:f.x,y:f.y})},h=p=>{var E,w;if(!e||o==null)return;const f=hi(p);if(!f)return;const x=(E=o.startX)!=null?E:0,g=(w=o.startY)!=null?w:0,C=I(l({},o),{x:f.x<x?f.x:o.x,y:f.y<g?f.y:o.y,width:Math.abs(f.x-x),height:Math.abs(f.y-g)}),b=Vr(s,C,n,!1,!0);c(b),r(C)},d=()=>{r(null)};return i(bg,{css:{zIndex:"$uiAboveNodes"},onMouseDown:u,onMouseMove:h,onMouseUp:d,onMouseLeave:d,children:i($g,{rect:o})})}),$g=({rect:t})=>t==null?null:i(J,{css:{position:"absolute",top:0,left:0,background:"rgba(0, 89, 220, 0.08)",border:"1px dotted rgba(0, 89, 220, 0.8)",width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}});function hi(t){const e=t.target.closest(".react-flow");if(!e)return;const n=e.getBoundingClientRect();return{x:t.clientX-n.left,y:t.clientY-n.top}}var vn=t=>{const[e,n]=a.exports.useState(!1);return a.exports.useEffect(()=>{if(typeof t!="undefined"){const o=c=>{!Rr(c)&&(c.key===t||c.keyCode===t)&&(c.preventDefault(),n(!0))},r=c=>{!Rr(c)&&(c.key===t||c.keyCode===t)&&n(!1)},s=()=>n(!1);return window.addEventListener("keydown",o),window.addEventListener("keyup",r),window.addEventListener("blur",s),()=>{window.removeEventListener("keydown",o),window.removeEventListener("keyup",r),window.removeEventListener("blur",s)}}},[t,n]),e};function Cg({deleteKeyCode:t,multiSelectionKeyCode:e,onElementsRemove:n}){const o=le(),r=Q(h=>h.setMultiSelectionActive),s=Fr(),c=vn(t),u=vn(e);a.exports.useEffect(()=>{const{edges:h,selectedElements:d}=o.getState();if(n&&c&&d){const p=d.filter(Ad),f=_d(p,h),x=[...d,...f].reduce((g,C)=>g.set(C.id,C),new Map);n(Array.from(x.values())),s()}},[c]),a.exports.useEffect(()=>{r(u)},[u])}function Eg(t){const e=Q(n=>n.updateSize);a.exports.useEffect(()=>{let n;const o=()=>{if(!t.current)return;const r=qn(t.current);(r.height===0||r.width===0)&&console.warn("The React Flow parent container needs a width and a height to render the graph."),e(r)};return o(),window.onresize=o,t.current&&(n=new ResizeObserver(()=>o()),n.observe(t.current)),()=>{window.onresize=null,n&&t.current&&n.unobserve(t.current)}},[])}function Sg({onMove:t,onMoveStart:e,onMoveEnd:n,zoomOnScroll:o=!0,zoomOnPinch:r=!0,panOnScroll:s=!1,panOnScrollSpeed:c=.5,panOnScrollMode:u=$e.Free,selectionKeyPressed:h,elementsSelectable:d,paneMoveable:p=!0,defaultPosition:f=[0,0],defaultZoom:x=1,translateExtent:g,zoomActivationKeyCode:C,preventScrolling:b=!0,children:E}){const w=a.exports.useRef(null),y=a.exports.useRef({x:0,y:0,zoom:0}),k=le(),$=M(m=>m.d3Zoom),O=M(m=>m.d3Selection),G=M(m=>m.d3ZoomHandler),z=Q(m=>m.initD3Zoom),L=Q(m=>m.updateTransform),T=vn(C);return Eg(w),a.exports.useEffect(()=>{if(w.current){const m=k.getState(),v=typeof g!="undefined"?g:m.translateExtent,D=$l().scaleExtent([m.minZoom,m.maxZoom]).translateExtent(v),P=Cl(w.current).call(D),Z=ye(f[0],v[0][0],v[1][0]),K=ye(f[1],v[0][1],v[1][1]),tt=ye(x,m.minZoom,m.maxZoom),R=Ie.translate(Z,K).scale(tt);D.transform(P,R),z({d3Zoom:D,d3Selection:P,d3ZoomHandler:P.on("wheel.zoom"),transform:[Z,K,tt]})}},[]),a.exports.useEffect(()=>{O&&$&&(s&&!T?O.on("wheel",m=>{if(fo(m))return!1;m.preventDefault(),m.stopImmediatePropagation();const v=O.property("__zoom").k||1;if(m.ctrlKey&&r){const K=El(m),tt=-m.deltaY*(m.deltaMode===1?.05:m.deltaMode?1:.002)*10,R=v*Math.pow(2,tt);$.scaleTo(O,R,K);return}const D=m.deltaMode===1?20:1,P=u===$e.Vertical?0:m.deltaX*D,Z=u===$e.Horizontal?0:m.deltaY*D;$.translateBy(O,-(P/v)*c,-(Z/v)*c)}).on("wheel.zoom",null):typeof G!="undefined"&&O.on("wheel",m=>{if(!b||fo(m))return null;m.preventDefault()}).on("wheel.zoom",G))},[s,u,O,$,G,T,r,b,c]),a.exports.useEffect(()=>{$&&(h?$.on("zoom",null):$.on("zoom",m=>{if(L([m.transform.x,m.transform.y,m.transform.k]),t){const v=ho(m.transform);t(v)}}))},[h,$,L,t]),a.exports.useEffect(()=>{$&&(e?$.on("start",m=>{const v=ho(m.transform);y.current=v,e(v)}):$.on("start",null))},[$,e]),a.exports.useEffect(()=>{$&&(n?$.on("end",m=>{if(wg(y.current,m.transform)){const v=ho(m.transform);y.current=v,n(v)}}):$.on("end",null))},[$,n]),a.exports.useEffect(()=>{$&&$.filter(m=>{const v=T||o,D=r&&m.ctrlKey;return h||m.type==="dblclick"||fo(m)&&m.type==="wheel"||!r&&m.ctrlKey&&m.type==="wheel"||!v&&!s&&!D&&m.type==="wheel"||!p&&(m.type==="mousedown"||m.type==="touchstart")?!1:(!m.ctrlKey||m.type==="wheel")&&!m.button})},[$,o,r,s,p,h,d,T]),i(uo,{css:{zIndex:4},ref:w,children:E})}const wg=(t,e)=>t.x!==e.x||t.y!==e.y||t.zoom!==e.k,ho=t=>({x:t.x,y:t.y,zoom:t.k}),fo=t=>t.target.closest(".nowheel"),kg=a.exports.memo(function({children:t,onPaneClick:e,onPaneDoubleClick:n,onPaneContextMenu:o,onPaneScroll:r,onElementsRemove:s,deleteKeyCode:c,onMove:u,onMoveStart:h,onMoveEnd:d,selectionKeyCode:p,multiSelectionKeyCode:f,zoomActivationKeyCode:x,elementsSelectable:g,zoomOnScroll:C,zoomOnPinch:b,panOnScroll:E,panOnScrollSpeed:w,panOnScrollMode:y,paneMoveable:k,defaultPosition:$,defaultZoom:O,translateExtent:G,preventScrolling:z,onSelectionDragStart:L,onSelectionDrag:T,onSelectionDragStop:m,onSelectionContextMenu:v}){const D=Fr(),P=vn(p);Cg({onElementsRemove:s,deleteKeyCode:c,multiSelectionKeyCode:f});const Z=a.exports.useCallback(R=>{e==null||e(R),D()},[e]),K=a.exports.useCallback(R=>{o==null||o(R)},[o]),tt=a.exports.useCallback(R=>{r==null||r(R)},[r]);return S(Sg,{onMove:u,onMoveStart:h,onMoveEnd:d,selectionKeyPressed:P,elementsSelectable:g,zoomOnScroll:C,zoomOnPinch:b,panOnScroll:E,panOnScrollSpeed:w,panOnScrollMode:y,paneMoveable:k,defaultPosition:$,defaultZoom:O,translateExtent:G,zoomActivationKeyCode:x,preventScrolling:z,children:[t,i(yg,{selectionKeyPressed:P}),i(uo,{css:{zIndex:"$background"},onClick:Z,onDoubleClick:n,onContextMenu:K,onWheel:tt})]})}),Ng=a.exports.memo(function(t){const e=M(g=>g.transform),n=M(g=>g.nodesDraggable),o=M(g=>g.nodesConnectable),r=M(g=>g.elementsSelectable),s=Wr(),c=M(g=>g.width),u=M(g=>g.height),h=be(),d=Array.from(h.nodes.values()),p=t.onlyRenderVisibleElements?Vr(d,{x:0,y:0,width:c,height:u},e,!0):d,f=a.exports.useMemo(()=>({transform:`translate(${e[0]}px,${e[1]}px) scale(${e[2]})`}),[e[0],e[1],e[2]]),x=a.exports.useMemo(()=>typeof ResizeObserver=="undefined"?null:new ResizeObserver(g=>{const C=g.map(b=>({id:b.target.getAttribute("data-id"),nodeElement:b.target}));s(C)}),[s]);return i(J,{css:{position:"absolute",width:"100%",height:"100%",pointerEvents:"none",transformOrigin:"0 0",zIndex:"$nodeEditor"},style:f,children:p.map(g=>{const C=ht(h,g),b=g.type||"default",E=t.nodeTypes[b]||t.nodeTypes.default;t.nodeTypes[b]||console.warn(`Node type "${b}" not found. Using fallback type "default".`);const w=!!(g.draggable||n&&typeof g.draggable=="undefined"),y=!!(g.selectable||r&&typeof g.selectable=="undefined"),k=!!(g.connectable||o&&typeof g.connectable=="undefined");return i(E,{id:g.id,className:g.className,style:g.style,type:b,data:g.data,sourcePosition:g.sourcePosition,targetPosition:g.targetPosition,isHidden:g.isHidden,xPos:C.x,yPos:C.y,isDragging:C.isDragging,edited:C.edited,isInitialized:C.width!==null&&C.height!==null,snapGrid:t.snapGrid,snapToGrid:t.snapToGrid,selectNodesOnDrag:t.selectNodesOnDrag,onClick:t.onElementClick,onMouseEnter:t.onNodeMouseEnter,onMouseMove:t.onNodeMouseMove,onMouseLeave:t.onNodeMouseLeave,onContextMenu:t.onNodeContextMenu,onNodeDoubleClick:t.onNodeDoubleClick,onNodeDragStart:t.onNodeDragStart,onNodeDrag:t.onNodeDrag,onNodeDragStop:t.onNodeDragStop,scale:e[2],selected:qo(h,g),onlySelected:qo(h,g)&&sn(h)===1,wasOnlySelected:ql(h,g),isAnySelected:Ul(h),highlight:h.highlightedNodeIDs.has(g.id),isDraggable:w,isSelectable:y,isConnectable:k,resizeObserver:x,dragHandle:g.dragHandle},g.id)})})});function Tg({connectionNodeId:t,connectionHandleId:e,connectionHandleType:n,connectionPositionX:o,connectionPositionY:r,sourceNode:s,transform:c,isConnectable:u}){const h=e;if(s==null||!u)return null;const d=Ag(h,s,n),p=n==="source",f=d?d.x+(p?0:d.width):s.width/2,x=d?d.y+d.height/2:s.height,g=s.x+f,C=s.y+x,b=(o-c[0])/c[2],E=(r-c[1])/c[2],w=(d==null?void 0:d.position)===H.Left||(d==null?void 0:d.position)===H.Right;return i(vg,{source:[g,C,d==null?void 0:d.position],target:[b,E,w?H.Left:H.Top],connectionHandleType:n})}function vg({source:t,target:e,connectionHandleType:n}){const[[o,r,s],[c,u,h]]=n==="source"?[t,e]:[e,t];return i(ui,{sourceX:o,sourceY:r,sourcePosition:s,targetX:c,targetY:u,targetPosition:h})}const Ag=(t,e,n)=>{const o=n==="source"?"target":"source",r=e.handleBounds[n]||e.handleBounds[o];return t?r.find(s=>s.id===t):r[0]},Ig=a.exports.memo(function(e){const n=M(y=>y.transform),o=be(),r=a.exports.useContext(fn.edges),s=M(y=>y.connectionNodeId),c=M(y=>y.connectionHandleId),u=M(y=>y.connectionHandleType),h=M(y=>y.connectionPosition),d=M(y=>y.selectedElements),p=M(y=>y.nodesConnectable),f=M(y=>y.elementsSelectable),x=M(y=>y.width),g=M(y=>y.height),C=a.exports.useCallback(({source:y,target:k})=>!Ln(o,Y(y),Y(k))&&!Ln(o,Y(k),Y(y))&&!Oe(Y(k),Y(y)),[o]);if(!x)return null;const{onlyRenderVisibleElements:b}=e,E=`translate(${n[0]},${n[1]}) scale(${n[2]})`,w=s&&u;return S(ft,{children:[i(fi,{width:x,height:g,pointerEvents:"none",transform:E,zIndex:2,children:Array.from(r.values()).map(y=>i(Dg,{edge:y,props:e,appState:o,selectedElements:d,elementsSelectable:f,transform:n,width:x,height:g,onlyRenderVisibleElements:b,isValidConnection:C},y.id))}),w&&i(fi,{width:x,height:g,transform:E,zIndex:11,children:i(Tg,{sourceNode:ht(o,Y(s)),connectionNodeId:s,connectionHandleId:c,connectionHandleType:u,connectionPositionX:h.x,connectionPositionY:h.y,transform:n,isConnectable:p})})]})});function fi({width:t,height:e,transform:n,pointerEvents:o,zIndex:r,children:s}){return i(Og,{width:t,height:e,css:{position:"absolute",top:0,left:0,pointerEvents:o,zIndex:r},children:i("g",{transform:n,children:s})})}const Og=j("svg");function Dg({edge:t,props:e,appState:n,selectedElements:o,elementsSelectable:r,transform:s,width:c,height:u,onlyRenderVisibleElements:h,connectionMode:d,isValidConnection:p}){const f=t.sourceHandle||null,x=t.targetHandle||null,g=nn(n,t),C=zo(n,t),{onEdgeUpdate:b}=e,E=a.exports.useCallback(R=>{b==null||b(t,R)},[t,b]);if(!g)return console.warn(`couldn't create edge for parent id: ${t.parentID}; edge id: ${t.id}`),null;if(!C)return console.warn(`couldn't create edge for child id: ${t.childID}; edge id: ${t.id}`),null;const w=ht(n,g),y=ht(n,C);if(!w.width||!y.width)return null;const k=t.type||"default",$=e.edgeTypes[k]||e.edgeTypes.default,G=y.handleBounds.target,z=gi(w.handleBounds.source,f),L=gi(G,x),T=z?z.position:H.Bottom,m=L?L.position:H.Top;if(!z)return console.warn(`couldn't create edge for source handle id: ${f}; edge id: ${t.id}`),null;if(!L)return console.warn(`couldn't create edge for target handle id: ${x}; edge id: ${t.id}`),null;const{sourceX:v,sourceY:D,targetX:P,targetY:Z}=Mg(z,w,T,L,y,m);if(!(h?Lg({sourcePos:{x:v,y:D},targetPos:{x:P,y:Z},width:c,height:u,transform:s}):!0))return null;const tt=(o==null?void 0:o.some(R=>vd(R)&&R.id===t.id))||!1;return i($,{id:t.id,className:t.className,type:t.type,data:t.data,onClick:e.onElementClick,selected:tt,animated:t.animated,label:t.label,labelStyle:t.labelStyle,labelShowBg:t.labelShowBg,labelBgStyle:t.labelBgStyle,labelBgPadding:t.labelBgPadding,labelBgBorderRadius:t.labelBgBorderRadius,arrowHeadType:t.arrowHeadType,source:t.parentID,target:t.childID,sourceHandleId:f,targetHandleId:x,sourceX:v,sourceY:D,targetX:P,targetY:Z,sourcePosition:T,targetPosition:m,elementsSelectable:r,markerEndId:e.markerEndId,isHidden:t.isHidden||t.type==="tight",onConnectEdge:E,handleEdgeUpdate:typeof e.onEdgeUpdate!="undefined",isValidConnection:p,onContextMenu:e.onEdgeContextMenu,onMouseEnter:e.onEdgeMouseEnter,onMouseMove:e.onEdgeMouseMove,onMouseLeave:e.onEdgeMouseLeave,edgeUpdaterRadius:e.edgeUpdaterRadius,onEdgeDoubleClick:e.onEdgeDoubleClick},t.id)}function gi(t,e){if(!t)return null;let n=null;return t.length===1||!e?n=t[0]:e&&(n=t.find(o=>o.id===e)),typeof n=="undefined"?null:n}const Mg=(t,e,n,o,r,s)=>{const c=pi(n,e,t),u=pi(s,r,o);return{sourceX:c.x,sourceY:c.y,targetX:u.x,targetY:u.y}};function pi(t,e,n=null){const o=((n==null?void 0:n.x)||0)+e.x,r=((n==null?void 0:n.y)||0)+e.y,s=(n==null?void 0:n.width)||e.width,c=(n==null?void 0:n.height)||e.height;switch(t){case H.Top:return{x:o+s/2,y:r};case H.Right:return{x:o+s,y:r+c/2};case H.Bottom:return{x:o+s/2,y:r+c};case H.Left:return{x:o+s,y:r+c/2}}}function Lg({sourcePos:t,targetPos:e,width:n,height:o,transform:r}){const s={x:Math.min(t.x,e.x),y:Math.min(t.y,e.y),x2:Math.max(t.x,e.x),y2:Math.max(t.y,e.y)};s.x===s.x2&&(s.x2+=1),s.y===s.y2&&(s.y2+=1);const c=Ce({x:(0-r[0])/r[2],y:(0-r[1])/r[2],width:n/r[2],height:o/r[2]}),u=Math.max(0,Math.min(c.x2,s.x2)-Math.max(c.x,s.x)),h=Math.max(0,Math.min(c.y2,s.y2)-Math.max(c.y,s.y));return Math.ceil(u*h)>0}const Rg=a.exports.memo(function({nodeTypes:t,edgeTypes:e,onMove:n,onMoveStart:o,onMoveEnd:r,onLoad:s,onElementClick:c,onNodeDoubleClick:u,onEdgeDoubleClick:h,onNodeMouseEnter:d,onNodeMouseMove:p,onNodeMouseLeave:f,onNodeContextMenu:x,onNodeDragStart:g,onNodeDrag:C,onNodeDragStop:b,onSelectionDragStart:E,onSelectionDrag:w,onSelectionDragStop:y,onSelectionContextMenu:k,connectionMode:$,selectionKeyCode:O,multiSelectionKeyCode:G,zoomActivationKeyCode:z,onElementsRemove:L,deleteKeyCode:T,onConnect:m,onConnectStart:v,onConnectStop:D,onConnectEnd:P,snapToGrid:Z,snapGrid:K,onlyRenderVisibleElements:tt,nodesDraggable:R,nodesConnectable:pt,elementsSelectable:nt,selectNodesOnDrag:at,minZoom:Et,maxZoom:mt,defaultZoom:Bt,defaultPosition:xt,translateExtent:St,preventScrolling:Wt,nodeExtent:vt,markerEndId:ot,zoomOnScroll:X,zoomOnPinch:te,panOnScroll:et,panOnScrollSpeed:ee,panOnScrollMode:ne,paneMoveable:oe,onPaneClick:re,onPaneDoubleClick:se,onPaneScroll:ie,onPaneContextMenu:At,onEdgeUpdate:ce,onEdgeContextMenu:zt,onEdgeMouseEnter:Vt,onEdgeMouseMove:jt,onEdgeMouseLeave:A,edgeUpdaterRadius:It}){const N=a.exports.useRef(!1),V=Q(B=>B.setOnConnect),Ot=Q(B=>B.setOnConnectStart),wt=Q(B=>B.setOnConnectStop),_=Q(B=>B.setOnConnectEnd),he=Q(B=>B.setSnapGrid),kt=Q(B=>B.setSnapToGrid),bt=Q(B=>B.setNodesDraggable),Dt=Q(B=>B.setNodesConnectable),Ke=Q(B=>B.setElementsSelectable),Nt=Q(B=>B.setMinZoom),Mt=Q(B=>B.setMaxZoom),Ae=Q(B=>B.setTranslateExtent),Ye=Q(B=>B.setNodeExtent),An=Q(B=>B.setConnectionMode),In=le(),{zoomIn:go,zoomOut:po,zoomTo:mo,transform:xo,fitView:bo,initialized:yo}=bn();return a.exports.useEffect(()=>{!N.current&&yo&&(s&&s({fitView:(B={padding:.1})=>bo(B),zoomIn:go,zoomOut:po,zoomTo:mo,setTransform:xo,project:Od(In),getElements:Pd(In),toObject:Bd(In)}),N.current=!0)},[s,go,po,mo,xo,bo,yo]),a.exports.useEffect(()=>{m&&V(m)},[m]),a.exports.useEffect(()=>{v&&Ot(v)},[v]),a.exports.useEffect(()=>{D&&wt(D)},[D]),a.exports.useEffect(()=>{P&&_(P)},[P]),a.exports.useEffect(()=>{typeof Z!="undefined"&&kt(Z)},[Z]),a.exports.useEffect(()=>{typeof K!="undefined"&&he(K)},[K]),a.exports.useEffect(()=>{typeof R!="undefined"&&bt(R)},[R]),a.exports.useEffect(()=>{typeof pt!="undefined"&&Dt(pt)},[pt]),a.exports.useEffect(()=>{typeof nt!="undefined"&&Ke(nt)},[nt]),a.exports.useEffect(()=>{typeof Et!="undefined"&&Nt(Et)},[Et]),a.exports.useEffect(()=>{typeof mt!="undefined"&&Mt(mt)},[mt]),a.exports.useEffect(()=>{typeof St!="undefined"&&Ae(St)},[St]),a.exports.useEffect(()=>{typeof vt!="undefined"&&Ye(vt)},[vt]),a.exports.useEffect(()=>{typeof $!="undefined"&&An($)},[$]),S(kg,{onPaneClick:re,onPaneDoubleClick:se,onPaneContextMenu:At,onPaneScroll:ie,onElementsRemove:L,deleteKeyCode:T,selectionKeyCode:O,multiSelectionKeyCode:G,zoomActivationKeyCode:z,elementsSelectable:nt,onMove:n,onMoveStart:o,onMoveEnd:r,zoomOnScroll:X,zoomOnPinch:te,panOnScroll:et,panOnScrollSpeed:ee,panOnScrollMode:ne,paneMoveable:oe,defaultPosition:xt,defaultZoom:Bt,translateExtent:St,onSelectionDragStart:E,onSelectionDrag:w,onSelectionDragStop:y,onSelectionContextMenu:k,preventScrolling:Wt,children:[i(Ng,{nodeTypes:t,onElementClick:c,onNodeDoubleClick:u,onNodeMouseEnter:d,onNodeMouseMove:p,onNodeMouseLeave:f,onNodeContextMenu:x,onNodeDragStop:b,onNodeDrag:C,onNodeDragStart:g,selectNodesOnDrag:at,snapToGrid:Z,snapGrid:K,onlyRenderVisibleElements:tt}),i(Ig,{edgeTypes:e,onElementClick:c,onEdgeDoubleClick:h,connectionMode:$,markerEndId:ot,onEdgeUpdate:ce,onlyRenderVisibleElements:tt,onEdgeContextMenu:zt,onEdgeMouseEnter:Vt,onEdgeMouseMove:jt,onEdgeMouseLeave:A,edgeUpdaterRadius:It})]})}),_g=[15,15],Pg=a.exports.forwardRef(function(he,_){var kt=he,{elements:e=[],nodeTypes:n,edgeTypes:o,onElementClick:r,onLoad:s,onMove:c,onMoveStart:u,onMoveEnd:h,onElementsRemove:d,onConnect:p,onConnectStart:f,onConnectStop:x,onConnectEnd:g,onNodeMouseEnter:C,onNodeMouseMove:b,onNodeMouseLeave:E,onNodeContextMenu:w,onNodeDoubleClick:y,onNodeDragStart:k,onNodeDrag:$,onNodeDragStop:O,onSelectionDragStart:G,onSelectionDrag:z,onSelectionDragStop:L,onSelectionContextMenu:T,connectionMode:m=pn.Strict,deleteKeyCode:v="Backspace",selectionKeyCode:D="Shift",multiSelectionKeyCode:P="Meta",zoomActivationKeyCode:Z="Meta",snapToGrid:K=!1,snapGrid:tt=_g,onlyRenderVisibleElements:R=!1,selectNodesOnDrag:pt=!0,nodesDraggable:nt,nodesConnectable:at,elementsSelectable:Et,minZoom:mt,maxZoom:Bt,defaultZoom:xt=1,defaultPosition:St=[0,0],translateExtent:Wt,preventScrolling:vt=!0,nodeExtent:ot,markerEndId:X,zoomOnScroll:te=!0,zoomOnPinch:et=!0,panOnScroll:ee=!1,panOnScrollSpeed:ne=.5,panOnScrollMode:oe=$e.Free,paneMoveable:re=!0,onPaneClick:se,onPaneDoubleClick:ie,onPaneScroll:At,onPaneContextMenu:ce,children:zt,onEdgeUpdate:Vt,onEdgeContextMenu:jt,onEdgeDoubleClick:A,onEdgeMouseEnter:It,onEdgeMouseMove:N,onEdgeMouseLeave:V,edgeUpdaterRadius:Ot=10}=kt,wt=ut(kt,["elements","nodeTypes","edgeTypes","onElementClick","onLoad","onMove","onMoveStart","onMoveEnd","onElementsRemove","onConnect","onConnectStart","onConnectStop","onConnectEnd","onNodeMouseEnter","onNodeMouseMove","onNodeMouseLeave","onNodeContextMenu","onNodeDoubleClick","onNodeDragStart","onNodeDrag","onNodeDragStop","onSelectionDragStart","onSelectionDrag","onSelectionDragStop","onSelectionContextMenu","connectionMode","deleteKeyCode","selectionKeyCode","multiSelectionKeyCode","zoomActivationKeyCode","snapToGrid","snapGrid","onlyRenderVisibleElements","selectNodesOnDrag","nodesDraggable","nodesConnectable","elementsSelectable","minZoom","maxZoom","defaultZoom","defaultPosition","translateExtent","preventScrolling","nodeExtent","markerEndId","zoomOnScroll","zoomOnPinch","panOnScroll","panOnScrollSpeed","panOnScrollMode","paneMoveable","onPaneClick","onPaneDoubleClick","onPaneScroll","onPaneContextMenu","children","onEdgeUpdate","onEdgeContextMenu","onEdgeDoubleClick","onEdgeMouseEnter","onEdgeMouseMove","onEdgeMouseLeave","edgeUpdaterRadius"]);const bt=a.exports.useMemo(()=>ze(n,Wd),[n]),Dt=a.exports.useMemo(()=>ze(o,xg),[o]);return S(uo,I(l({className:"react-flow"},wt),{ref:_,children:[i(Rg,{onLoad:s,onMove:c,onMoveStart:u,onMoveEnd:h,onElementClick:r,onNodeMouseEnter:C,onNodeMouseMove:b,onNodeMouseLeave:E,onNodeContextMenu:w,onNodeDoubleClick:y,onNodeDragStart:k,onNodeDrag:$,onNodeDragStop:O,nodeTypes:bt,edgeTypes:Dt,connectionMode:m,selectionKeyCode:D,onElementsRemove:d,deleteKeyCode:v,multiSelectionKeyCode:P,zoomActivationKeyCode:Z,onConnect:p,onConnectStart:f,onConnectStop:x,onConnectEnd:g,snapToGrid:K,snapGrid:tt,onlyRenderVisibleElements:R,nodesDraggable:nt,nodesConnectable:at,elementsSelectable:Et,selectNodesOnDrag:pt,minZoom:mt,maxZoom:Bt,defaultZoom:xt,defaultPosition:St,translateExtent:Wt,preventScrolling:vt,nodeExtent:ot,markerEndId:X,zoomOnScroll:te,zoomOnPinch:et,panOnScroll:ee,panOnScrollSpeed:ne,panOnScrollMode:oe,paneMoveable:re,onPaneClick:se,onPaneDoubleClick:ie,onPaneScroll:At,onPaneContextMenu:ce,onSelectionDragStart:G,onSelectionDrag:z,onSelectionDragStop:L,onSelectionContextMenu:T,onEdgeUpdate:Vt,onEdgeContextMenu:jt,onEdgeDoubleClick:A,onEdgeMouseEnter:It,onEdgeMouseMove:N,onEdgeMouseLeave:V,edgeUpdaterRadius:Ot}),zt]}))});function Qe({initialState:t,children:e}){return i(yu,{initialState:t,children:e})}Qe.NodeEditor=function({nodeTypes:e,onDoubleClick:n,onKeyDown:o,children:r}){return i(lg,{children:i(Wg,{nodeTypes:e,onDoubleClick:n,onKeyDown:o,children:r})})};Qe.NodeEditor.PaneControls=ng;const Bg={MAC:{panOnScroll:!0,paneMoveable:!1},WINDOWS:{}};function Wg({nodeTypes:t,onKeyDown:e,onDoubleClick:n,children:o}){const r=Rt(),s=le(),c=qg();Ug(c,e);const[u,h]=Fg();return Hg(u),i(Yo.Provider,{value:c,children:S(Pg,I(l(I(l({},h),{nodeTypes:t,edgeTypes:zg,onPaneDoubleClick:d=>{r(p=>{const f=Id(s,d);c(n(p,f))})}}),Bg.MAC),{onEdgeUpdate:(d,p)=>{r(f=>{Gg(f,d,p)})},onConnect:d=>{r(p=>{jg(p,d)})},children:[i("div",{style:{zIndex:5},children:o}),i(cg,{color:"#aaa",gap:16})]}))})}const zg={default:ui,tight:function(){return i(ft,{})}};function Fg(){const[t,e]=a.exports.useState(null);return[t,{onMouseMove:r=>{e({x:r.clientX,y:r.clientY})},onMouseLeave:()=>{e(null)}}]}function Hg(t){const e=le(),n=be(),o=Rt();Tn(document,"copy",a.exports.useCallback(r=>{Kg(r,n)},[n])),Tn(document,"paste",a.exports.useCallback(r=>{o(s=>{Yg(r,s,Gr(e,t!=null?t:{x:100,y:100}))})},[t,o,e]))}function Ug(t,e){const n=cs(),o=as(),r=be(),s=Rt(),c=a.exports.useMemo(()=>sg([{key:"Backspace",run:Zg},{key:"ArrowUp",run:mi},{key:"ArrowDown",run:mi},{key:"Mod-a",run:Qg},{key:"Mod-z",run:n},{key:"Mod-y",mac:"Mod-Shift-z",run:o}]),[o,n]);return Tn(document,"keydown",a.exports.useCallback(u=>{const h=c({setAppState:s},u);h||s(d=>{u.key==="Alt"?d.modes.alt=!0:h||t(e(d,u))})},[e,c,t,s])),Tn(document,"keyup",a.exports.useCallback(u=>{s(h=>{u.key==="Alt"&&(h.modes.alt=!1)})},[s])),{appState:r,setAppState:s}}function qg(){const t=be(),e=Rt(),n=a.exports.useRef(null);return a.exports.useLayoutEffect(()=>{if(n.current!=null){const o=n.current;e(r=>{const[s,c]=o;if(Vo(r,s).height!=null){const u=Pe(r,s);c(r,u)}}),n.current=null}},[t,e]),a.exports.useCallback(o=>{o!=null&&(n.current=o)},[])}function Gg(t,e,{source:n,target:o,targetHandle:r}){Tt(t),n===Qt(e)&&o===Lt(e)&&Me(e)!=null?Vg(t,Y(o)):(on(t,e),_e(t,Y(n),Y(o),r)),yt(t)}function Vg(t,e){Wl(t,e).forEach(n=>{on(t,n),_e(t,Y(Qt(n)),Y(Lt(n)),Me(n)==="0"?"1":"0")})}function jg(t,{source:e,target:n,targetHandle:o}){Tt(t),_e(t,Y(e),Y(n),o),yt(t)}function Zg({setAppState:t}){t(e=>{if(sn(e)===0)return;Tt(e);const o=Wn(ct(e),r=>Yt(e,r)).map(r=>Bn(e,r)).map(r=>{const s=st(r),c=Ol(r.map(f=>Bl(e,f))),u=ln(e,s),h=Oo(r),d=We(e,h);r.forEach(f=>Xl(e,f)),u!=null&&d!=null&&(rn(e,u,d),Ht(e,u));const p=u!=null?u:d;return p!=null&&c.forEach(f=>{_e(e,p,Y(Lt(f)),Me(f))}),d!=null?d:u});dt(e,o.filter(r=>r!=null)),yt(e)})}function mi({setAppState:t},e){t(n=>{dt(n,ct(n).map(e.key==="ArrowUp"?o=>{var r;return(r=ln(n,o))!=null?r:o}:o=>{var r;return(r=We(n,o))!=null?r:o}).filter(o=>o!=null))})}function Qg({setAppState:t},e){t(n=>{dt(n,Gl(n))}),e.preventDefault()}function Kg(t,e){(async()=>{const n=ct(e);if(n.length===0)return;const o=Fl(e,n),r=jl(e,n);t.clipboardData.setData("text/plain",Ks({type:"seaqull/clipboard",nodes:n,edges:o,positions:r})),t.preventDefault()})()}function Yg(t,e,n){const o=t.clipboardData.getData("text/plain");let r=null;try{r=Ys(o)}catch{return}if((r==null?void 0:r.type)!=="seaqull/clipboard")return;const{nodes:s,edges:c,positions:u}=r,h=u.get(q(st(s))),d={x:n.x-h.x,y:n.y-h.y};Tt(e);const p=new Map(s.map(f=>{const x=Zl(e,f),g=u.get(q(f));return Be(e,x),De(e,x,g.x+d.x-10,g.y+d.y-10),[q(f),x]}));c.forEach(f=>{_n(e,_l(f,p))}),dt(e,Ao(p)),yt(e)}function Xg(){const[t,e]=Xd();return a.exports.useEffect(()=>{document.documentElement.classList.toggle(Ou.className,t==="dark"),document.documentElement.style.setProperty("color-scheme",t)},[t]),i(Ze,{content:"Toggle theme",children:i(Xt,{onClick:()=>{e(t==="dark"?"light":"dark")},"aria-label":"toggle a light and dark color scheme",children:i(Sl,{})})})}function Jg({children:t}){const[e,n]=a.exports.Children.toArray(t);return S(J,{css:{display:"flex",flexDirection:"column",height:"100%"},children:[i(J,{css:{height:"65%",borderBottom:"1px solid $slate7",position:"relative"},children:e}),i(J,{css:{flexGrow:1,maxHeight:"50%",position:"relative"},children:n})]})}const tp=ze(ve,t=>t.Component);function ep(){return i(zu,{value:ve,children:i(xh,{children:S(np,{topRightUI:i(op,{}),topUI:i(Zd,{}),nodeTypes:tp,onDoubleClick:rp,onKeyDown:Kd(ve),children:[i(ti,{}),i(ri,{})]})})})}function np({topRightUI:t,topUI:e,nodeTypes:n,onDoubleClick:o,onKeyDown:r,children:s}){return i(Jd,{children:S(Qe,{children:[S(Jg,{children:[S(Qe.NodeEditor,{nodeTypes:n,onDoubleClick:o,onKeyDown:r,children:[i(lo,{top:!0,center:!0,children:i(J,{css:{padding:"$12"},children:e})}),i(lo,{top:!0,right:!0,children:S(rt,{css:{padding:"$12"},children:[t,i(ci,{side:"bottom",align:"end",children:i(Xg,{})})]})}),i(lo,{bottom:!0,left:!0,children:i(Ue,{css:{padding:"$12"},children:i(ci,{side:"right",align:"center",children:i(Qe.NodeEditor.PaneControls,{})})})})]}),i(ri,{})]}),i(ti,{})]})})}function op(){const t=a.exports.useContext(Qn.source);return i(Xs,{children:i(yf,{asChild:!0,children:S(rt,{align:"center",children:[t!=null?i(Ct,{children:t.name}):null,i(Xt,{children:i(wl,{})})]})})})}function rp(t,e){return _u(t,He({nodeConfigs:ve},"from"),e)}Nl(i(ep,{}));
