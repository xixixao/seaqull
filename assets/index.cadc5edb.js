var zi=Object.defineProperty,ji=Object.defineProperties;var Zi=Object.getOwnPropertyDescriptors;var Wt=Object.getOwnPropertySymbols;var Ro=Object.prototype.hasOwnProperty,Io=Object.prototype.propertyIsEnumerable;var Mo=(e,t,n)=>t in e?zi(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,u=(e,t)=>{for(var n in t||(t={}))Ro.call(t,n)&&Mo(e,n,t[n]);if(Wt)for(var n of Wt(t))Io.call(t,n)&&Mo(e,n,t[n]);return e},H=(e,t)=>ji(e,Zi(t));var de=(e,t)=>{var n={};for(var o in e)Ro.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&Wt)for(var o of Wt(e))t.indexOf(o)<0&&Io.call(e,o)&&(n[o]=e[o]);return n};import{e as Qi,j as c,R as Ki,C as Ji,T as Xi,f as qt,c as Yi,p as Oo,r as a,q as ec,g as tc,m as nc,s as oc,a as rc,o as sc,b as ic,t as cc,d as ac,h as lc,i as uc,k as dc,l as fc,v as hc,n as pc,u as mc,w as gc,x as xc,y as bc,z as yc,A as $c,B as Cc,D as Ec,E as wc,F as Sc,G as Nc,H as Tc,I as Ac,J as kc,K as _c,L as vc,M as Rc,N as Ic,O as Mc,P as Oc,Q as Dc,S as Lc,U as Bc,V as Pc,W as Uc,X as Hc,Y as Fc,Z as Wc,_ as qc,$ as Gc,a0 as Vc,a1 as zc,a2 as jc,a3 as Zc,a4 as Qc,a5 as Kc,a6 as Jc,a7 as Xc,a8 as Yc,a9 as ea,aa as ta,ab as na,ac as oa,ad as ra,ae as sa,af as ia,ag as ca,ah as aa,ai as la,aj as ua,ak as da,al as fa,am as ha,an as pa,ao as ma,ap as ga,aq as xa,ar as ba,as as ya,at as $a,au as Ca,av as Ea,aw as wa,ax as Sa,ay as Na,az as Ta,aA as Aa,aB as ka,aC as _a,aD as va,aE as Ra,aF as Ia,aG as Ma,aH as Oa,aI as Da,aJ as La,aK as Ba,aL as Pa,aM as Ua,aN as Ha,aO as Fa,aP as Wa,aQ as qa,aR as Ga,aS as Va,aT as za,aU as ja,aV as Za,aW as Qa,aX as Ka,aY as Ja,aZ as Xa,a_ as Ya,a$ as el,b0 as tl,b1 as nl,b2 as ol,b3 as rl,b4 as sl,b5 as il,b6 as A,b7 as Oe,b8 as ie,b9 as cl,ba as Do,bb as al,bc as ll,bd as ul,be as dl,bf as fl,bg as Et,bh as hl,bi as pl,bj as ml,bk as gl,bl as Lo,bm as xl,bn as bl,bo as yl,bp as $l,bq as Cl,br as El,bs as wl,bt as Bo,bu as Sl,bv as Nn,bw as Nl,bx as Po,by as Tl,bz as Al,bA as kl,bB as _l,bC as vl,bD as Rl,bE as Il,bF as Ml,bG as Ol,bH as Dl,bI as Ll,bJ as Bl,bK as Pl,bL as Ul,bM as Hl,bN as Fl,bO as Gt,bP as Vt,bQ as Uo,bR as Ho,bS as Wl,bT as ql,bU as Gl,bV as Vl,bW as zl,bX as jl,bY as Zl,bZ as Ql}from"./vendor.fc8b8889.js";const Kl=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&o(i)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerpolicy&&(s.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?s.credentials="include":r.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function o(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}};Kl();function Jl(e){Qi.render(c(Ki.StrictMode,{children:e}),document.getElementById("root"))}const Fo=e=>{const t=e==null?void 0:e.target;return["INPUT","SELECT","TEXTAREA","BUTTON"].includes(t==null?void 0:t.nodeName)||(t==null?void 0:t.hasAttribute("contenteditable"))},Tn=e=>({width:e.offsetWidth,height:e.offsetHeight}),ct=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),Xl=(e,t)=>({x:ct(e.x,t[0][0],t[1][0]),y:ct(e.y,t[0][1],t[1][1])}),Wo=e=>{var t;return((t=e.getRootNode)==null?void 0:t.call(e))||(window==null?void 0:window.document)};var I;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(I||(I={}));var qo;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(qo||(qo={}));var at;(function(e){e.Lines="lines",e.Dots="dots"})(at||(at={}));var wt;(function(e){e.Strict="strict",e.Loose="loose"})(wt||(wt={}));var ot;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep"})(ot||(ot={}));var lt;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(lt||(lt={}));function Yl(e,t){const o=Wo(t.target).querySelector(`.react-flow__node[data-id="${e.id}"]`);return(o==null?void 0:o.querySelector(".react-flow__handle.target"))!=null}function Go(e,t,n,o,r,s,i,l,d,f,x,m,p,h){const y=e.target.closest(".react-flow"),g=Wo(e.target);if(!g)return;const b=g.elementFromPoint(e.clientX,e.clientY),$=b==null?void 0:b.classList.contains("target"),C=b==null?void 0:b.classList.contains("source");if(!y||!$&&!C&&!f)return;const S=f||($?"target":"source"),k=y.getBoundingClientRect();let E;r({x:e.clientX-k.left,y:e.clientY-k.top}),o({connectionNodeId:n,connectionHandleId:t,connectionHandleType:S}),m==null||m(e,{nodeId:n,handleId:t,handleType:S});function v(_){r({x:_.clientX-k.left,y:_.clientY-k.top});const{connection:T,elementBelow:P,isValid:w,isHoveringHandle:B}=zo(_,d,i,n,t,l,g);if(!B)return Vo(E);!(T.source===T.target)&&P&&(E=P,P.classList.add("react-flow__handle-connecting"),P.classList.toggle("react-flow__handle-valid",w))}function N(_){const{connection:T,isValid:P}=zo(_,d,i,n,t,l,g);p==null||p(_),P&&(s==null||s(T)),h==null||h(_),f&&x&&x(_),Vo(E),o({connectionNodeId:null,connectionHandleId:null,connectionHandleType:null}),g.removeEventListener("mousemove",v),g.removeEventListener("mouseup",N)}g.addEventListener("mousemove",v),g.addEventListener("mouseup",N)}function Vo(e){e==null||e.classList.remove("react-flow__handle-valid"),e==null||e.classList.remove("react-flow__handle-connecting")}function zo(e,t,n,o,r,s,i){const l=i.elementFromPoint(e.clientX,e.clientY),d=(l==null?void 0:l.classList.contains("target"))||!1,f=(l==null?void 0:l.classList.contains("source"))||!1,x={elementBelow:l,isValid:!1,connection:{source:null,target:null,sourceHandle:null,targetHandle:null},isHoveringHandle:!1};if(l&&(d||f)&&(x.isHoveringHandle=!0,t===wt.Strict?n&&f||!n&&d:!0)){const h=l.getAttribute("data-nodeid"),y=l.getAttribute("data-handleid"),g=n?{source:h,sourceHandle:y,target:o,targetHandle:r}:{source:o,sourceHandle:r,target:h,targetHandle:y};x.connection=g,x.isValid=s(g)}const m=l.closest("[data-id]");if(m!=null){const p=m.getAttribute("data-id"),h=n?{source:p,target:o}:{source:o,target:p};x.connection=h,x.isValid=s(h)}return x}function eu(e){if(!e)throw new Error("invariant violated")}function tu(e,t){e&&console.error(t)}function*nu(e,t){for(const[n,o]of e.entries())yield t(o,n)}function*ou(e,t){for(const[n,o]of e.entries())t(o,n)&&(yield o)}function ve(e,t){return Array.from(nu(e,t))}function ut(e,t){return Array.from(ou(e,t))}function dt(e,t){return ut(e,n=>!t.has(n))}function re(e){return e[0]}function jo(e){return e[1]}function Zo(e){return e[e.length-1]}function Q(e){return e.length===1?e[0]:null}function Qo(e){return tu(e.length!==1,`Expected one element, got ${e.length}`),e[0]}function Ko(e,t){return new Set(dt(e,t))}function Jo(e,t){Array.from(e).forEach(n=>{e.delete(n)}),t.forEach(n=>{e.add(n)})}const ru=e=>"id"in e&&"source"in e&&"target"in e,An=e=>"id"in e&&!("source"in e)&&!("target"in e);function su(e,t){const{transform:n,snapToGrid:o,snapGrid:r}=e.getState();return kn(t,n,o,r)}const kn=({x:e,y:t},[n,o,r],s,[i,l])=>{const d={x:(e-n)/r,y:(t-o)/r};return s?{x:i*Math.round(d.x/i),y:l*Math.round(d.y/l)}:d},iu=e=>t=>{const{transform:n,snapToGrid:o,snapGrid:r}=e.getState();return kn(t,n,o,r)},Xo=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),Fe=({x:e,y:t,width:n,height:o})=>({x:e,y:t,x2:e+n,y2:t+o}),Yo=({x:e,y:t,x2:n,y2:o})=>({x:e,y:t,width:n-e,height:o-t}),cu=(e,t)=>Yo(Xo(Fe(e),Fe(t))),er=e=>{const t=e.reduce((n,{__rf:{position:o,width:r,height:s}={}})=>Xo(n,Fe(H(u({},o),{width:r,height:s}))),{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return Yo(t)},tr=(e,t,[n,o,r]=[0,0,1],s=!1,i=!1)=>{const l=Fe({x:(t.x-n)/r,y:(t.y-o)/r,width:t.width/r,height:t.height/r});return ut(e.nodes,d=>{const f=!0,{x,y:m,width:p,height:h,isDragging:y}=he(e,d);if(i&&!f)return!1;const g=Fe({x,y:m,width:p,height:h}),b=Math.max(0,Math.min(l.x2,g.x2)-Math.max(l.x,g.x)),$=Math.max(0,Math.min(l.y2,g.y2)-Math.max(l.y,g.y)),C=Math.ceil(b*$);if(p===null||h===null||y)return!0;if(s)return C>0;const S=p*h;return C>=S})};function au(e,t,n=0){const o=Fe(e),r=Fe(t),s=Math.max(0,n+Math.min(o.x2,r.x2)-Math.max(o.x,r.x)),i=Math.max(0,n+Math.min(o.y2,r.y2)-Math.max(o.y,r.y));return s>0&&i>0}const lu=(e,t)=>{const n=e.map(o=>o.id);return t.filter(o=>n.includes(o.source)||n.includes(o.target))},nr=(e,t)=>[...e.map(n=>{const o=u({},n);return o.position=o.__rf.position,delete o.__rf,o}),...t.map(n=>u({},n))],uu=e=>()=>{const{nodes:t=[],edges:n=[]}=e.getState();return nr(t,n)},du=e=>()=>{const{nodes:t=[],edges:n=[],transform:o}=e.getState();return{elements:nr(t,n),position:[o[0],o[1]],zoom:o[2]}},or=(e,t,n,o,r,s=.1)=>{const i=t/(e.width*(1+s)),l=n/(e.height*(1+s)),d=Math.min(i,l),f=ct(d,o,r),x=e.x+e.width/2,m=e.y+e.height/2,p=t/2-x*f,h=n/2-m*f;return[p,h,f]};function fu(e){return+ee(e)}function St(e,t){return ee(e)===ee(t)}function ft(e,t){return ee(e)===t}function ee(e){return e.id}function fe(e){return{id:e}}function hu(e,t){return ht(e,t).x}function pu(e,t){return ht(e,t).y}function zt(e,t,n,o){ht(e,t).x=n,ht(e,t).y=o}function ht(e,t){return e.positions.get(t.id)}function rr(e,t,n,o){ht(e,t).x+=n,ht(e,t).y+=o}function mu(e,t){return e.data.label}function sr(e,t){const n=ee(e),o=ee(t);return{id:`e${n}${o}`,parentID:n,childID:o}}function gu(e,t){return H(u({},sr(e,t)),{type:"tight"})}function ir(e){return e.id}function jt(e){return e.parentID}function Nt(e){return e.childID}function Zt(e){return e.type==="tight"}function xu(e){e.type=null}function cr(e,t,n){return vn(e,t).some(o=>{const r=Nt(o);return ft(n,r)||cr(e,fe(r),n)})}function _n(e,t,n){const o=Tt(e,t);if(o==null)return!1;const r=Nt(o);return ft(n,r)||_n(e,fe(r),n)}function vn(e,t){return ut(At(e),n=>ft(t,jt(n)))}function Qt(e,t){return ut(At(e),n=>ft(t,Nt(n)))}function Rn(e,t){return kt(e,jt(t))}function ar(e,t){return kt(e,Nt(t))}function lr(e,t){return Q(Qt(e,t).filter(Zt))}function Tt(e,t){return Q(vn(e,t).filter(Zt))}function bu(e,t){return vn(e,t).filter(n=>!Zt(n))}function yu(e,t){return Qt(e,t).filter(n=>!Zt(n))}function $u(e,t){return ut(At(e),n=>ft(t,Nt(n))||ft(t,jt(n)))}function At(e){return e.edges}function ur(e,t){t.forEach(n=>{In(e,n)})}function In(e,t){return At(e).delete(ir(t))}function dr(e,t,n){fr(e,sr(t,n))}function Kt(e,t,n){fr(e,gu(t,n))}function fr(e,t){At(e).set(ir(t),t)}function me(e,t){Jo(e.lastSelectedNodeIDs,e.selectedNodeIDs),Jo(e.selectedNodeIDs,Dn(t))}function Cu(e,t){me(e,ve(e.selectedNodeIDs,fe).concat(t))}function Jt(e){return e.selectedNodeIDs.size}function Eu(e){return e.selectedNodeIDs.size>0}function ce(e){return Mn(e,e.selectedNodeIDs)}function hr(e){return Mn(e,e.lastSelectedNodeIDs)}function pr(e,t){return e.selectedNodeIDs.has(ee(t))}function wu(e,t){const n=Q(hr(e));return n==null?!1:St(n,t)}function Su(e){return Array.from(pt(e).values())}function Mn(e,t){return ve(t,n=>kt(e,n))}function kt(e,t){return pt(e).get(t)}function mr(e,t){return kt(e,ee(t))}function Nu(e,t){return mr(e,t)==null}function gr(e,t){return _t(e).get(t)}function he(e,t){return _t(e).get(ee(t))}function pt(e){return e.nodes}function Xt(e,t){return u({id:Du(e),data:{}},t)}function Tu(e,t,n){var o;t.type=n.type,t.data=(o=n.data)!=null?o:{}}function F(e,t){return Mn(e,Qt(e,t).map(n=>jt(n)))}function Au(e,t){return yu(e,t).length>0}function ku(e,t){return Tt(e,t)!=null}function _u(e,t){return bu(e,t).length>0}function Yt(e,t){pt(e).set(ee(t),t),_t(e).set(ee(t),{x:0,y:0})}function _t(e){return e.positions}function vu(e,t){pt(e).delete(ee(t)),_t(e).delete(ee(t)),ur(e,$u(e,t))}function en(e,t){const n=lr(e,t);return n!=null?Rn(e,n):null}function vt(e,t){const n=Tt(e,t);return n!=null?ar(e,n):null}function xr(e,t,n){const o=vt(e,t);o!=null&&(In(e,Tt(e,t)),Kt(e,n,o))}function Ru(e,t){const n=[t];let o=t;for(;o!=null;){const r=vt(e,o);r!=null&&n.push(r),o=r}return n}function On(e,t){const n=Dn(t),o=We(e,t[0]);return Ru(e,o).filter(r=>n.has(ee(r)))}function We(e,t){const n=en(e,t);return n==null?t:We(e,n)}function Iu(e,t,n){return St(We(e,t),We(e,n))}function Dn(e){return new Set(e.map(ee))}function Mu(e){return Array.from(new Set(e))}function Ln(e,t){const n=new Map;return e.forEach(o=>{var i;const r=ee(t(o)),s=(i=n.get(r))!=null?i:[];s.push(o),n.set(r,s)}),Array.from(n.values())}function br(e,t,n){if(!Yl(t,n))return!1;const o=he(e,t);return Ou(e).filter(r=>{const s=he(e,r);return!St(t,r)&&au(s,o,20)&&!cr(e,t,r)})}function Ou(e){return ut(pt(e),t=>Tt(e,t)==null)}function Du(e){return String(Math.max(0,...ve(pt(e),t=>fu(t)))+1)}function De(e,t){const{height:n}=he(e,t),o=vt(e,t);o!=null&&(zt(e,o,hu(e,t),pu(e,t)+n),De(e,o))}function Lu(e,t){const n=30,o=30,r=Math.max(...ve(_t(e),({x:s,width:i})=>s+i));zt(e,t,r+o,n)}function Bu(e,t,n){const o=30,r=Math.max(...t.map(i=>he(e,i)).map(({x:i,width:l})=>i+l)),s=Math.max(...t.map(i=>he(e,i)).map(({y:i,height:l})=>i+l));zt(e,n,r+o,s)}function Pu(e,t,n){const{width:o,height:r}=he(e,t);zt(e,t,Math.floor(n.x-o/2),Math.floor(n.y-r/2))}Ji();Xi();window.produce=qt;function Uu(){return{inProgressRecording:null,reverseCursor:0,patches:[]}}function qe(e){e.history.content.inProgressRecording=[[],[]]}function yr(e){const t=e.history.content;t.existingRecording||t.continueRecording?t.inProgressRecording=t.patches[tn(e)]:(qe(e),t.existingRecording=!0),t.continueRecording=!0}function Le(e){e.history.content.addRecording=!0}function Hu(e,t){return qt(e,t)}function Fu(e,t){const n=qt(e,d=>{d.history.content.continueRecording=!1}),[o,r,s]=Yi(n,t),[i,l]=[r.filter(({path:d})=>d[0]!=="history"),s.filter(({path:d})=>d[0]!=="history")];return qt(o,d=>{const{content:f}=d.history;f.continueRecording||(f.existingRecording=!1);const x=f.inProgressRecording!=null&&f.inProgressRecording[0].length>0;f.inProgressRecording!=null&&(f.inProgressRecording[0].push(...i),f.inProgressRecording[1].unshift(...l)),f.addRecording&&(f.reverseCursor>0&&(f.patches.splice(-f.reverseCursor),f.reverseCursor=0),f.continueRecording&&x&&f.patches.splice(-1),f.patches.push(f.inProgressRecording),f.inProgressRecording=null,f.addRecording=!1)})}function Wu(e){return tn(e)>=0}function qu(e){const{content:t}=e.history,[,n]=t.patches[tn(e)],o=Oo(e,n);return t.reverseCursor+=1,o}function Gu(e){return $r(e)<e.history.content.patches.length}function Vu(e){const{content:t}=e.history,[n]=t.patches[$r(e)],o=Oo(e,n);return t.reverseCursor-=1,o}function $r(e){return tn(e)+1}function tn(e){const{content:t}=e.history;return t.patches.length-t.reverseCursor-1}const Bn=a.exports.createContext();function Pn(e,t){const n={};return Object.keys(e).forEach(o=>{n[o]=t(e[o],o)}),n}function zu(e,t,n){return Object.keys(e).reduce((o,r)=>t(o,e[r],r),n)}function ju(e){const t={};return e.forEach((n,o)=>{t[o]=n}),t}function Zu(e,t){const n={};return e.forEach((o,r)=>{n[o]=t(o,r)}),n}function Qu(e,t){const n={};return e.forEach(([o,r])=>{n[o]=r}),n}function Cr(e,t){const n=Pn(e,i=>a.exports.createContext(i)),o=a.exports.createContext();function r({initialState:i={},children:l}){const[d,f]=a.exports.useState(u(u({},e),i));return c(o.Provider,{value:f,children:zu(n,(x,m,p)=>c(m.Provider,{value:d[p],children:x}),l)})}function s(){return a.exports.useContext(o)}return{state:n,useSetState:s,provider:r}}const Ku=e=>e;function Er(e,t=Ku){const n=Pn(e,o=>a.exports.useContext(o));return a.exports.useMemo(()=>t(n),Object.values(n))}const{state:Un,useSetState:wr,provider:Ju}=Cr({nodes:new Map,edges:new Map,positions:new Map,selectedNodeIDs:new Set,lastSelectedNodeIDs:new Set,highlightedNodeIDs:new Set,modes:{alt:!1},history:{content:Uu()}});function Hn(){const e=wr();return a.exports.useCallback(t=>{e(n=>Hu(n,t))},[e])}function Ge(){const e=wr();return a.exports.useCallback(t=>{e(n=>Fu(n,t))},[e])}function Fn(e){const t=Ge();return a.exports.useCallback((...n)=>{const o=e(...n);t(o)},[t])}const Fi=Un,{modes:Xu,history:tm}=Fi,Yu=de(Fi,["modes","history"]);function Rt(){return Er(Yu)}function ed(){return a.exports.useContext(Xu)}const Wi=Un,{positions:nm,highlightedNodeIDs:om}=Wi,td=de(Wi,["positions","highlightedNodeIDs"]);function mt(){return Er(td)}function be(e){const t=Ge();return a.exports.useCallback(n=>{t(o=>{qe(o),n(mr(o,e)),Le(o)})},[t,e])}const{styled:ae,css:rm,createTheme:nd,globalCss:od,keyframes:rd}=ec({theme:{colors:H(u(u(u(u(u(u(u(u(u(u(u(u(u(u(u(u(u(u(u(u(u(u(u(u(u(u(u(u(u(u(u(u(u(u(u(u(u(u(u(u(u(u(u(u(u(u(u(u(u(u(u(u(u(u(u(u(u(u({},tc),nc),oc),rc),sc),ic),cc),ac),lc),uc),dc),fc),hc),pc),mc),gc),xc),bc),yc),$c),Cc),Ec),wc),Sc),Nc),Tc),Ac),kc),_c),vc),Rc),Ic),Mc),Oc),Dc),Lc),Bc),Pc),Uc),Hc),Fc),Wc),qc),Gc),Vc),zc),jc),Zc),Qc),Kc),Jc),Xc),Yc),ea),ta),na),oa),ra),{hiContrast:"$slate12",loContrast:"white",canvas:"hsl(0 0% 93%)",panel:"white",transparentPanel:"hsl(0 0% 0% / 97%)",shadowLight:"hsl(206 22% 7% / 35%)",shadowDark:"hsl(206 22% 7% / 20%)"}),fonts:{os:'-apple-system, BlinkMacSystemFont, "Segoe UI", "Roboto", "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue", sans-serif',mono:"Menlo, Consolas, Monaco, monospace"},fontSizes:{hero:"56px",h1:"32px",h2:"22px",h3:"17px",body:"14px",detail:"13px"},lineHeights:{hero:"60px",h1:"38px",h2:"28px",h3:"21px",body:"22px",detail:"13px"},fontWeights:{hero:700,h1:700,h2:700,h3:700,body:400,detail:400},radii:{4:"4px",6:"6px",8:"8px",12:"12px",round:"50%",pill:"9999px"},space:{4:"4px",8:"8px",12:"12px",16:"16px",20:"20px",24:"24px",32:"32px",48:"48px",64:"64px",80:"80px"},sizes:{4:"4px",8:"8px",12:"12px",16:"16px",20:"20px",24:"24px",28:"28px",32:"32px",36:"36px",48:"48px",64:"64px",80:"80px"}},media:{bp1:"(min-width: 520px)",bp2:"(min-width: 900px)",bp3:"(min-width: 1200px)",bp4:"(min-width: 1800px)",motion:"(prefers-reduced-motion)",hover:"(any-hover: hover)",dark:"(prefers-color-scheme: dark)",light:"(prefers-color-scheme: light)"},utils:{font:e=>({fontSize:e,fontWeight:e,lineHeight:e}),paddingHori:e=>({paddingLeft:e,paddingRight:e}),paddingVert:e=>({paddingTop:e,paddingBottom:e}),marginHori:e=>({marginLeft:e,marginRight:e}),marginVert:e=>({marginTop:e,marginBottom:e}),size:e=>({width:e,height:e}),userSelect:e=>({WebkitUserSelect:e,userSelect:e}),appearance:e=>({WebkitAppearance:e,appearance:e}),backgroundClip:e=>({WebkitBackgroundClip:e,backgroundClip:e})}}),sd=nd("dark-theme",{colors:H(u(u(u(u(u(u(u(u(u(u(u(u(u(u(u(u(u(u(u(u(u(u(u(u(u(u(u(u(u(u(u(u(u(u(u(u(u(u(u(u(u(u(u(u(u(u(u(u(u(u(u(u(u(u(u(u({},sa),ia),ca),aa),la),ua),da),fa),ha),pa),ma),ga),xa),ba),ya),$a),Ca),Ea),wa),Sa),Na),Ta),Aa),ka),_a),va),Ra),Ia),Ma),Oa),Da),La),Ba),Pa),Ua),Ha),Fa),Wa),qa),Ga),Va),za),ja),Za),Qa),Ka),Ja),Xa),Ya),el),tl),nl),ol),rl),sl),il),{hiContrast:"$slate12",loContrast:"$slate1",canvas:"hsl(0 0% 15%)",panel:"$slate1",transparentPanel:"hsl(0 100% 100% / 97%)",shadowLight:"hsl(206 22% 7% / 35%)",shadowDark:"hsl(206 22% 7% / 20%)"})});od({"*, *::before, *::after":{boxSizing:"border-box"},"*":{margin:0},"html, body, #root":{height:"100%"},"input, button, textarea, select":{font:"inherit"},"p, h1, h2, h3, h4, h5, h6":{overflowWrap:"break-word"},body:{"-webkit-font-smoothing":"antialiased","-moz-osx-font-smoothing":"grayscale",fontFamily:"$os",font:"$body",background:"$panel !important"},table:{borderCollapse:"collapse",height:"fit-content"},th:{position:"sticky",top:"0",background:"$panel",whiteSpace:"nowrap",textAlign:"start",padding:"$8 $4 0 $4",boxShadow:"inset 0 -1px 0 $colors$slate7"},td:{padding:"0 4px",whiteSpace:"nowrap"},"tbody tr":{borderBottom:"1px solid $slate3"}})();const we=ae("div"),Be=ae("button",{all:"unset",alignItems:"center",boxSizing:"border-box",userSelect:"none",display:"inline-flex",flexShrink:0,justifyContent:"center",lineHeight:"1",WebkitTapHighlightColor:"rgba(0,0,0,0)",cursor:"pointer",paddingHori:"6px",fontVariantNumeric:"tabular-nums",borderRadius:"6px","&:disabled":{backgroundColor:"$slate2",boxShadow:"inset 0 0 0 1px $colors$slate7",color:"$slate8",pointerEvents:"none"},variants:{size:{body:{height:"$28",font:"$body"},detail:{height:"25px",font:"$detail"}},variant:{gray:{backgroundColor:"$slate4",color:"$slate12","@hover":{"&:hover":{backgroundColor:"$slate5"}},"&:active":{backgroundColor:"$slate6"},"&:focus":{},'&[data-radix-popover-trigger][data-state="open"], &[data-radix-dropdown-menu-trigger][data-state="open"]':{backgroundColor:"$slate4"}},blue:{backgroundColor:"$blue2",boxShadow:"inset 0 0 0 1px $colors$blue7",color:"$blue11","@hover":{"&:hover":{boxShadow:"inset 0 0 0 1px $colors$blue8"}},"&:active":{backgroundColor:"$blue3",boxShadow:"inset 0 0 0 1px $colors$blue8"},"&:focus":{boxShadow:"inset 0 0 0 1px $colors$blue8, 0 0 0 1px $colors$blue8"},'&[data-radix-popover-trigger][data-state="open"], &[data-radix-dropdown-menu-trigger][data-state="open"]':{backgroundColor:"$blue4",boxShadow:"inset 0 0 0 1px $colors$blue8"}},green:{backgroundColor:"$green2",boxShadow:"inset 0 0 0 1px $colors$green7",color:"$green11","@hover":{"&:hover":{boxShadow:"inset 0 0 0 1px $colors$green8"}},"&:active":{backgroundColor:"$green3",boxShadow:"inset 0 0 0 1px $colors$green8"},"&:focus":{boxShadow:"inset 0 0 0 1px $colors$green8, 0 0 0 1px $colors$green8"},'&[data-radix-popover-trigger][data-state="open"], &[data-radix-dropdown-menu-trigger][data-state="open"]':{backgroundColor:"$green4",boxShadow:"inset 0 0 0 1px $colors$green8"}},red:{backgroundColor:"$loContrast",boxShadow:"inset 0 0 0 1px $colors$slate7",color:"$red11","@hover":{"&:hover":{boxShadow:"inset 0 0 0 1px $colors$slate8"}},"&:active":{backgroundColor:"$red3",boxShadow:"inset 0 0 0 1px $colors$red8"},"&:focus":{boxShadow:"inset 0 0 0 1px $colors$red8, 0 0 0 1px $colors$red8"},'&[data-radix-popover-trigger][data-state="open"], &[data-radix-dropdown-menu-trigger][data-state="open"]':{backgroundColor:"$red4",boxShadow:"inset 0 0 0 1px $colors$red8"}},transparentWhite:{backgroundColor:"hsla(0,100%,100%,.2)",color:"white","@hover":{"&:hover":{backgroundColor:"hsla(0,100%,100%,.25)"}},"&:active":{backgroundColor:"hsla(0,100%,100%,.3)"},"&:focus":{boxShadow:"inset 0 0 0 1px hsla(0,100%,100%,.35), 0 0 0 1px hsla(0,100%,100%,.35)"}},transparentBlack:{backgroundColor:"hsla(0,0%,0%,.2)",color:"black","@hover":{"&:hover":{backgroundColor:"hsla(0,0%,0%,.25)"}},"&:active":{backgroundColor:"hsla(0,0%,0%,.3)"},"&:focus":{boxShadow:"inset 0 0 0 1px hsla(0,0%,0%,.35), 0 0 0 1px hsla(0,0%,0%,.35)"}}},state:{active:{backgroundColor:"$slate4",boxShadow:"inset 0 0 0 1px $colors$slate8",color:"$slate11","@hover":{"&:hover":{backgroundColor:"$slate5",boxShadow:"inset 0 0 0 1px $colors$slate8"}},"&:active":{backgroundColor:"$slate5"},"&:focus":{boxShadow:"inset 0 0 0 1px $colors$slate8, 0 0 0 1px $colors$slate8"}},waiting:{backgroundColor:"$slate4",boxShadow:"inset 0 0 0 1px $colors$slate8",color:"transparent",pointerEvents:"none","@hover":{"&:hover":{backgroundColor:"$slate5",boxShadow:"inset 0 0 0 1px $colors$slate8"}},"&:active":{backgroundColor:"$slate5"},"&:focus":{boxShadow:"inset 0 0 0 1px $colors$slate8"}}},ghost:{true:{backgroundColor:"transparent",boxShadow:"none"}}},compoundVariants:[{variant:"gray",ghost:"true",css:{backgroundColor:"transparent",color:"$hiContrast","@hover":{"&:hover":{backgroundColor:"$slateA3",boxShadow:"none"}},"&:active":{backgroundColor:"$slateA4"},"&:focus":{boxShadow:"inset 0 0 0 1px $colors$slateA8, 0 0 0 1px $colors$slateA8"},'&[data-radix-popover-trigger][data-state="open"], &[data-radix-dropdown-menu-trigger][data-state="open"]':{backgroundColor:"$slateA4",boxShadow:"none"}}},{variant:"blue",ghost:"true",css:{backgroundColor:"transparent","@hover":{"&:hover":{backgroundColor:"$blueA3",boxShadow:"none"}},"&:active":{backgroundColor:"$blueA4"},"&:focus":{boxShadow:"inset 0 0 0 1px $colors$blueA8, 0 0 0 1px $colors$blueA8"},'&[data-radix-popover-trigger][data-state="open"], &[data-radix-dropdown-menu-trigger][data-state="open"]':{backgroundColor:"$blueA4",boxShadow:"none"}}},{variant:"green",ghost:"true",css:{backgroundColor:"transparent","@hover":{"&:hover":{backgroundColor:"$greenA3",boxShadow:"none"}},"&:active":{backgroundColor:"$greenA4"},"&:focus":{boxShadow:"inset 0 0 0 1px $colors$greenA8, 0 0 0 1px $colors$greenA8"},'&[data-radix-popover-trigger][data-state="open"], &[data-radix-dropdown-menu-trigger][data-state="open"]':{backgroundColor:"$greenA4",boxShadow:"none"}}},{variant:"red",ghost:"true",css:{backgroundColor:"transparent","@hover":{"&:hover":{backgroundColor:"$redA3",boxShadow:"none"}},"&:active":{backgroundColor:"$redA4"},"&:focus":{boxShadow:"inset 0 0 0 1px $colors$redA8, 0 0 0 1px $colors$redA8"},'&[data-radix-popover-trigger][data-state="open"], &[data-radix-dropdown-menu-trigger][data-state="open"]':{backgroundColor:"$redA4",boxShadow:"none"}}}],defaultVariants:{size:"body",variant:"gray"}});function id(o){var r=o,{icon:e,children:t}=r,n=de(r,["icon","children"]);return A(Be,H(u({},n),{children:[c(we,{css:{height:18,marginRight:"$4"},children:e}),t]}))}function Wn({icon:e,children:t,onAdd:n}){const o=Ge(),r=a.exports.useContext(Bn);return c(id,{icon:e,onClick:()=>{o(s=>{r(n(s,s.modes.alt))})},children:t})}function Sr(e){return t=>{const n=Qo(ce(t));if(n==null)return;qe(t);const o=Xt(t,e);return xr(t,n,o),Kt(t,n,o),Yt(t,o),me(t,[o]),[ee(o),cd]}}function Nr(e){return t=>Tr(t,e,De)}function cd(e,t){const n=en(e,t);De(e,n),Le(e)}function ad(e){return t=>{qe(t);const n=Xt(t,e);return Yt(t,n),me(t,[n]),[ee(n),ld]}}function ld(e,t){Lu(e,t),Le(e)}function ud(e,t,n){qe(e);const o=Xt(e,t);return Yt(e,o),me(e,[o]),[ee(o),(r,s)=>{Pu(r,s,n),Le(r)}]}function dd(e){return t=>{qe(t);const n=ce(t),o=Xt(t,e);return n.forEach(r=>{dr(t,r,o)}),Yt(t,o),me(t,[o]),[ee(o),hd]}}function fd(e){return t=>Tr(t,e,De)}function hd(e,t){Bu(e,F(e,t),t),Le(e)}function Tr(e,t,n){const o=Qo(ce(e));if(o!=null)return Tu(e,o,t),[ee(o),n]}function pd(){return a.exports.useContext(Ar)}function md({children:e}){const[t,n]=a.exports.useState(gd()),o=a.exports.useCallback(r=>{n(_r(r))},[n]);return a.exports.useEffect(()=>{const r=window.matchMedia(kr);return r.addEventListener("change",o),()=>r.removeEventListener("change",o)},[o]),c(Ar.Provider,{value:[t,n],children:e})}const Ar=a.exports.createContext(),kr="(prefers-color-scheme: dark)";function gd(){return _r(window.matchMedia(kr))}function _r(e){return e.matches?"dark":"light"}const xd=m=>{var p=m,{x:e,y:t,label:n,labelStyle:o={},labelShowBg:r=!0,labelBgStyle:s={},labelBgPadding:i=[2,4],labelBgBorderRadius:l=2,children:d,className:f}=p,x=de(p,["x","y","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","children","className"]);const h=a.exports.useRef(null),[y,g]=a.exports.useState({x:0,y:0,width:0,height:0}),b=Oe(["react-flow__edge-textwrapper",f]);return a.exports.useEffect(()=>{if(h.current){const $=h.current.getBBox();g({x:$.x,y:$.y,width:$.width,height:$.height})}},[n]),typeof n=="undefined"||!n?null:A("g",H(u({transform:`translate(${e-y.width/2} ${t-y.height/2})`,className:b},x),{children:[r&&c("rect",{width:y.width+2*i[0],x:-i[0],y:-i[1],height:y.height+2*i[1],className:"react-flow__edge-textbg",style:s,rx:l,ry:l}),c("text",{className:"react-flow__edge-text",y:y.height/2,dy:"0.3em",ref:h,style:o,children:n}),d]}))};var qn=a.exports.memo(xd);const Gn=(e,t)=>typeof t!="undefined"&&t?`url(#${t})`:typeof e!="undefined"?`url(#react-flow__${e})`:"none",vr=[I.Left,I.Right],nn=({sourceX:e,sourceY:t,targetX:n,targetY:o,sourcePosition:r=I.Bottom,targetPosition:s=I.Top})=>{const i=vr.includes(r),l=vr.includes(s);if(i&&!l||l&&!i){const h=i?Math.abs(n-e):0,y=e>n?e-h:e+h,g=i?0:Math.abs(o-t),b=t<o?t+g:t-g;return[y,b,h,g]}const f=Math.abs(n-e)/2,x=n<e?n+f:n-f,m=Math.abs(o-t)/2,p=o<t?o+m:o-m;return[x,p,f,m]};function Rr({sourceX:e,sourceY:t,sourcePosition:n=I.Bottom,targetX:o,targetY:r,targetPosition:s=I.Top,centerX:i,centerY:l}){const[d,f]=nn({sourceX:e,sourceY:t,targetX:o,targetY:r}),x=[I.Left,I.Right],m=typeof i!="undefined"?i:d,p=typeof l!="undefined"?l:f;let h=`M${e},${t} C${e},${p} ${o},${p} ${o},${r}`;return x.includes(n)&&x.includes(s)?h=`M${e},${t} C${m},${t} ${m},${r} ${o},${r}`:x.includes(s)?h=`M${e},${t} Q${e},${r} ${o},${r}`:x.includes(n)&&(h=`M${e},${t} Q${o},${t} ${o},${r}`),h}var Vn=a.exports.memo(({sourceX:e,sourceY:t,targetX:n,targetY:o,sourcePosition:r=I.Bottom,targetPosition:s=I.Top,label:i,labelStyle:l,labelShowBg:d,labelBgStyle:f,labelBgPadding:x,labelBgBorderRadius:m,style:p,arrowHeadType:h,markerEndId:y})=>{const[g,b]=nn({sourceX:e,sourceY:t,targetX:n,targetY:o,sourcePosition:r,targetPosition:s}),$=Rr({sourceX:e,sourceY:t,sourcePosition:r,targetX:n,targetY:o,targetPosition:s}),C=i?c(qn,{x:g,y:b,label:i,labelStyle:l,labelShowBg:d,labelBgStyle:f,labelBgPadding:x,labelBgBorderRadius:m}):null,S=Gn(h,y);return A(ie,{children:[c("path",{style:p,d:$,className:"react-flow__edge-path",markerEnd:S}),C]})});const zn=(e,t,n)=>`L ${e},${t-n}Q ${e},${t} ${e+n},${t}`,jn=(e,t,n)=>`L ${e+n},${t}Q ${e},${t} ${e},${t-n}`,Zn=(e,t,n)=>`L ${e},${t-n}Q ${e},${t} ${e-n},${t}`,Qn=(e,t,n)=>`L ${e-n},${t}Q ${e},${t} ${e},${t-n}`,Kn=(e,t,n)=>`L ${e+n},${t}Q ${e},${t} ${e},${t+n}`,Jn=(e,t,n)=>`L ${e},${t+n}Q ${e},${t} ${e+n},${t}`,Xn=(e,t,n)=>`L ${e},${t+n}Q ${e},${t} ${e-n},${t}`,Yn=(e,t,n)=>`L ${e-n},${t}Q ${e},${t} ${e},${t+n}`;function eo({sourceX:e,sourceY:t,sourcePosition:n=I.Bottom,targetX:o,targetY:r,targetPosition:s=I.Top,borderRadius:i=5,centerX:l,centerY:d}){const[f,x,m,p]=nn({sourceX:e,sourceY:t,targetX:o,targetY:r}),h=Math.min(i,Math.abs(o-e)),y=Math.min(i,Math.abs(r-t)),g=Math.min(h,y,m,p),b=[I.Left,I.Right],$=typeof l!="undefined"?l:f,C=typeof d!="undefined"?d:x;let S=null,k=null;return e<=o?(S=t<=r?zn(e,C,g):Jn(e,C,g),k=t<=r?Yn(o,C,g):Qn(o,C,g)):(S=t<r?Zn(e,C,g):Xn(e,C,g),k=t<r?Kn(o,C,g):jn(o,C,g)),b.includes(n)&&b.includes(s)?e<=o?(S=t<=r?Yn($,t,g):Qn($,t,g),k=t<=r?zn($,r,g):Jn($,r,g)):(n===I.Right&&s===I.Left||n===I.Left&&s===I.Right||n===I.Left&&s===I.Left)&&(S=t<=r?Kn($,t,g):jn($,t,g),k=t<=r?Zn($,r,g):Xn($,r,g)):b.includes(n)&&!b.includes(s)?(e<=o?S=t<=r?Yn(o,t,g):Qn(o,t,g):S=t<=r?Kn(o,t,g):jn(o,t,g),k=""):!b.includes(n)&&b.includes(s)&&(e<=o?S=t<=r?zn(e,r,g):Jn(e,r,g):S=t<=r?Zn(e,r,g):Xn(e,r,g),k=""),`M ${e},${t}${S}${k}L ${o},${r}`}var to=a.exports.memo(({sourceX:e,sourceY:t,targetX:n,targetY:o,label:r,labelStyle:s,labelShowBg:i,labelBgStyle:l,labelBgPadding:d,labelBgBorderRadius:f,style:x,sourcePosition:m=I.Bottom,targetPosition:p=I.Top,arrowHeadType:h,markerEndId:y,borderRadius:g=5})=>{const[b,$]=nn({sourceX:e,sourceY:t,targetX:n,targetY:o,sourcePosition:m,targetPosition:p}),C=eo({sourceX:e,sourceY:t,sourcePosition:m,targetX:n,targetY:o,targetPosition:p,borderRadius:g}),S=Gn(h,y);return A(ie,{children:[c("path",{style:x,className:"react-flow__edge-path",d:C,markerEnd:S}),r?c(qn,{x:b,y:$,label:r,labelStyle:s,labelShowBg:i,labelBgStyle:l,labelBgPadding:d,labelBgBorderRadius:f}):null]})}),Ir=a.exports.memo(e=>c(to,H(u({},e),{borderRadius:0}))),Mr=a.exports.memo(({sourceX:e,sourceY:t,targetX:n,targetY:o,label:r,labelStyle:s,labelShowBg:i,labelBgStyle:l,labelBgPadding:d,labelBgBorderRadius:f,style:x,arrowHeadType:m,markerEndId:p})=>{const h=Math.abs(o-t)/2,y=o<t?o+h:o-h,g=Math.abs(n-e)/2,b=n<e?n+g:n-g,$=Gn(m,p),C=r?c(qn,{x:b,y,label:r,labelStyle:s,labelShowBg:i,labelBgStyle:l,labelBgPadding:d,labelBgBorderRadius:f}):null;return A(ie,{children:[c("path",{style:x,className:"react-flow__edge-path",d:`M ${e},${t}L ${n},${o}`,markerEnd:$}),C]})});function V(e,t){return{type:e,payload:t}}const Or="SET_ON_CONNECT",Dr="SET_ON_CONNECT_START",Lr="SET_ON_CONNECT_STOP",Br="SET_ON_CONNECT_END",bd="SET_ELEMENTS",Pr="UPDATE_NODE_DIMENSIONS",yd="UPDATE_NODE_POS",Ur="UPDATE_NODE_POS_DIFF",Hr="SET_USER_SELECTION",Fr="UPDATE_USER_SELECTION",Wr="UNSET_USER_SELECTION",$d="SET_SELECTION",qr="UNSET_NODES_SELECTION",Gr="ADD_SELECTED_ELEMENTS",Vr="UPDATE_TRANSFORM",zr="UPDATE_SIZE",jr="INIT_D3ZOOM",Zr="SET_MINZOOM",Qr="SET_MAXZOOM",Kr="SET_TRANSLATEEXTENT",Jr="SET_CONNECTION_POSITION",Xr="SET_CONNECTION_NODEID",Yr="SET_SNAPTOGRID",es="SET_SNAPGRID",ts="SET_INTERACTIVE",ns="SET_NODES_DRAGGABLE",os="SET_NODES_CONNECTABLE",rs="SET_ELEMENTS_SELECTABLE",ss="SET_MULTI_SELECTION_ACTIVE",is="SET_CONNECTION_MODE",cs="SET_NODE_EXTENT",Cd=e=>V(Or,{onConnect:e}),Ed=e=>V(Dr,{onConnectStart:e}),wd=e=>V(Lr,{onConnectStop:e}),Sd=e=>V(Br,{onConnectEnd:e}),Nd=e=>V(bd,e),Td=e=>V(Pr,e),Ad=e=>V(Ur,e),kd=e=>V(Hr,e),_d=e=>V(Fr,{userSelectionRect:e}),vd=()=>V(Wr),Rd=e=>V($d,{selectionActive:e}),Id=()=>V(qr,{nodesSelectionActive:!1}),Md=e=>V(Gr,e),Od=e=>V(Vr,{transform:e}),Dd=e=>V(zr,{width:e.width||500,height:e.height||500}),Ld=e=>V(jr,e),Bd=e=>V(Zr,e),Pd=e=>V(Qr,e),Ud=e=>V(Kr,e),Hd=e=>V(Jr,{connectionPosition:e}),Fd=e=>V(Xr,e),Wd=e=>V(Yr,{snapToGrid:e}),qd=e=>V(es,{snapGrid:e}),Gd=e=>V(ts,{nodesDraggable:e,nodesConnectable:e,elementsSelectable:e}),Vd=e=>V(ns,{nodesDraggable:e}),zd=e=>V(os,{nodesConnectable:e}),jd=e=>V(rs,{elementsSelectable:e}),Zd=e=>V(ss,{multiSelectionActive:e}),Qd=e=>V(is,{connectionMode:e}),Kd=e=>V(cs,e);var Jd=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",setOnConnect:Cd,setOnConnectStart:Ed,setOnConnectStop:wd,setOnConnectEnd:Sd,setElements:Nd,updateNodeDimensions:Td,updateNodePosDiff:Ad,setUserSelection:kd,updateUserSelection:_d,unsetUserSelection:vd,setSelection:Rd,unsetNodesSelection:Id,addSelectedElements:Md,updateTransform:Od,updateSize:Dd,initD3Zoom:Ld,setMinZoom:Bd,setMaxZoom:Pd,setTranslateExtent:Ud,setConnectionPosition:Hd,setConnectionNodeId:Fd,setSnapToGrid:Wd,setSnapGrid:qd,setInteractive:Gd,setNodesDraggable:Vd,setNodesConnectable:zd,setElementsSelectable:jd,setMultiSelectionActive:Zd,setConnectionMode:Qd,setNodeExtent:Kd});const Xd=al;function W(e){const t=cl(),n=e(Jd);return a.exports.useMemo(()=>typeof n=="function"?Do(n,t):Do(n,t),[t,n])}const R=Xd,It=()=>ll(),no=a.exports.createContext(null);no.Provider;no.Consumer;const Yd=()=>!0,as=a.exports.forwardRef((x,f)=>{var m=x,{type:e="source",position:t=I.Top,isValidConnection:n=Yd,isConnectable:o=!0,id:r,onConnect:s,children:i,className:l}=m,d=de(m,["type","position","isValidConnection","isConnectable","id","onConnect","children","className"]);const p=a.exports.useContext(no),h=W(T=>T.setConnectionPosition),y=W(T=>T.setConnectionNodeId),g=R(T=>T.onConnect),b=R(T=>T.onConnectStart),$=R(T=>T.onConnectStop),C=R(T=>T.onConnectEnd),S=R(T=>T.connectionMode),k=r||null,E=e==="target",v=a.exports.useCallback(T=>{g==null||g(T),s==null||s(T)},[g,s]),N=a.exports.useCallback(T=>{Go(T,k,p,y,h,v,E,n,S,void 0,void 0,b,$,C)},[k,p,y,h,v,E,n,S,b,$,C]),_=Oe(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",l,{source:!E,target:E,connectable:o}]);return c("div",H(u({"data-handleid":k,"data-nodeid":p,"data-handlepos":t,className:_,onMouseDown:N,ref:f},d),{children:i}))});as.displayName="Handle";var gt=a.exports.memo(as);const ls=({data:e,isConnectable:t,targetPosition:n=I.Top,sourcePosition:o=I.Bottom})=>A(ie,{children:[c(gt,{type:"target",position:n,isConnectable:t}),e.label,c(gt,{type:"source",position:o,isConnectable:t})]});ls.displayName="DefaultNode";var oo=a.exports.memo(ls);const us=({data:e,isConnectable:t,sourcePosition:n=I.Bottom})=>A(ie,{children:[e.label,c(gt,{type:"source",position:n,isConnectable:t})]});us.displayName="InputNode";var ds=a.exports.memo(us);const fs=({data:e,isConnectable:t,targetPosition:n=I.Top})=>A(ie,{children:[c(gt,{type:"target",position:n,isConnectable:t}),e.label]});fs.displayName="OutputNode";var hs=a.exports.memo(fs);const ef=(e,t,n)=>n===I.Left?e-t:n===I.Right?e+t:e,tf=(e,t,n)=>n===I.Top?e-t:n===I.Bottom?e+t:e,ps=({className:e,position:t,centerX:n,centerY:o,radius:r=10})=>c("circle",{className:Oe(["react-flow__edgeupdater",e]),cx:ef(n,r,t),cy:tf(o,r,t),r,stroke:"transparent",fill:"transparent"});function Mt(e){const t=({id:n,className:o,type:r,data:s,onClick:i,onEdgeDoubleClick:l,selected:d,animated:f,label:x,labelStyle:m,labelShowBg:p,labelBgStyle:h,labelBgPadding:y,labelBgBorderRadius:g,style:b,arrowHeadType:$,source:C,target:S,sourceX:k,sourceY:E,targetX:v,targetY:N,sourcePosition:_,targetPosition:T,elementsSelectable:P,markerEndId:w,isHidden:B,sourceHandleId:M,targetHandleId:j,handleEdgeUpdate:J,isValidConnection:Z,onConnectEdge:q,onContextMenu:G,onMouseEnter:D,onMouseMove:le,onMouseLeave:ge,edgeUpdaterRadius:se,onEdgeUpdateStart:$e,onEdgeUpdateEnd:xe})=>{W(O=>O.addSelectedElements);const te=W(O=>O.setConnectionNodeId);W(O=>O.unsetNodesSelection);const X=W(O=>O.setConnectionPosition),je=R(O=>O.connectionMode),[Te,Ae]=a.exports.useState(!1),Ie=!P&&!i,Ze=Oe(["react-flow__edge",`react-flow__edge-${r}`,o,{selected:d,animated:f,inactive:Ie,updating:Te}]),Y=a.exports.useMemo(()=>{const O={id:n,source:C,target:S,type:r};return M&&(O.sourceHandle=M),j&&(O.targetHandle=j),typeof s!="undefined"&&(O.data=s),O},[n,C,S,r,M,j,s]),Qe=a.exports.useCallback(O=>{i==null||i(O,Y)},[P,Y,i]),Ke=a.exports.useCallback(O=>{l==null||l(O,Y)},[Y,l]),Je=a.exports.useCallback(O=>{G==null||G(O,Y)},[Y,G]),Xe=a.exports.useCallback(O=>{D==null||D(O,Y)},[Y,G]),Me=a.exports.useCallback(O=>{le==null||le(O,Y)},[Y,G]),Ye=a.exports.useCallback(O=>{ge==null||ge(O,Y)},[Y,G]),ke=a.exports.useCallback((O,U)=>{const Ce=U?S:C,Ee=U?j:M,ue=U;$e==null||$e(O,Y),Go(O,Ee,Ce,te,X,q,ue,Z,je,U?"target":"source",xe?oe=>xe(oe,Y):void 0)},[n,C,S,r,M,j,te,X,Y,q,Z]),et=a.exports.useCallback(O=>{ke(O,!0)},[n,C,M,ke]),L=a.exports.useCallback(O=>{ke(O,!1)},[n,S,j,ke]),K=a.exports.useCallback(()=>Ae(!0),[Ae]),_e=a.exports.useCallback(()=>Ae(!1),[Ae]);return B?null:A("g",{className:Ze,onClick:Qe,onDoubleClick:Ke,onContextMenu:Je,onMouseEnter:Xe,onMouseMove:Me,onMouseLeave:Ye,children:[c(e,{id:n,source:C,target:S,selected:d,animated:f,label:x,labelStyle:m,labelShowBg:p,labelBgStyle:h,labelBgPadding:y,labelBgBorderRadius:g,data:s,style:b,arrowHeadType:$,sourceX:k,sourceY:E,targetX:v,targetY:N,sourcePosition:_,targetPosition:T,markerEndId:w,sourceHandleId:M,targetHandleId:j}),J&&c("g",{onMouseDown:et,onMouseEnter:K,onMouseOut:_e,children:c(ps,{position:_,centerX:k,centerY:E,radius:se})}),J&&c("g",{onMouseDown:L,onMouseEnter:K,onMouseOut:_e,children:c(ps,{position:T,centerX:v,centerY:N,radius:se})})]})};return t.displayName="EdgeWrapper",a.exports.memo(t)}function nf(e){const t={default:Mt(e.default||Vn),straight:Mt(e.bezier||Mr),step:Mt(e.step||Ir),smoothstep:Mt(e.step||to)},n={},o=Object.keys(e).filter(r=>!["default","bezier"].includes(r)).reduce((r,s)=>(r[s]=Mt(e[s]||Vn),r),n);return u(u({},t),o)}function ms(e,t,n=null){const o=((n==null?void 0:n.x)||0)+t.x,r=((n==null?void 0:n.y)||0)+t.y,s=(n==null?void 0:n.width)||t.width,i=(n==null?void 0:n.height)||t.height;switch(e){case I.Top:return{x:o+s/2,y:r};case I.Right:return{x:o+s,y:r+i/2};case I.Bottom:return{x:o+s/2,y:r+i};case I.Left:return{x:o,y:r+i/2}}}function gs(e,t){if(!e)return null;let n=null;return e.length===1||!t?n=e[0]:t&&(n=e.find(o=>o.id===t)),typeof n=="undefined"?null:n}const of=(e,t,n,o,r,s)=>{const i=ms(n,t,e),l=ms(s,r,o);return{sourceX:i.x,sourceY:i.y,targetX:l.x,targetY:l.y}};function rf({sourcePos:e,targetPos:t,width:n,height:o,transform:r}){const s={x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x,t.x),y2:Math.max(e.y,t.y)};s.x===s.x2&&(s.x2+=1),s.y===s.y2&&(s.y2+=1);const i=Fe({x:(0-r[0])/r[2],y:(0-r[1])/r[2],width:n/r[2],height:o/r[2]}),l=Math.max(0,Math.min(i.x2,s.x2)-Math.max(i.x,s.x)),d=Math.max(0,Math.min(i.y2,s.y2)-Math.max(i.y,s.y));return Math.ceil(l*d)>0}var on=e=>{const[t,n]=a.exports.useState(!1);return a.exports.useEffect(()=>{if(typeof e!="undefined"){const o=i=>{!Fo(i)&&(i.key===e||i.keyCode===e)&&(i.preventDefault(),n(!0))},r=i=>{!Fo(i)&&(i.key===e||i.keyCode===e)&&n(!1)},s=()=>n(!1);return window.addEventListener("keydown",o),window.addEventListener("keyup",r),window.addEventListener("blur",s),()=>{window.removeEventListener("keydown",o),window.removeEventListener("keyup",r),window.removeEventListener("blur",s)}}},[e,n]),t};const sf=(e,t)=>{const n=e.getBoundingClientRect();return{source:xs(".source",e,n,t),target:xs(".target",e,n,t)}},xs=(e,t,n,o)=>{const r=t.querySelectorAll(e);return!r||!r.length?null:Array.from(r).map(i=>{const l=i.getBoundingClientRect(),d=Tn(i),f=i.getAttribute("data-handleid"),x=i.getAttribute("data-handlepos");return u({id:f,position:x,x:(l.left-n.left)/o,y:(l.top-n.top)/o},d)})};function bs(e){return ul(af,e)}const ro={width:0,height:0,transform:[0,0,1],nodes:[],edges:[],selectedElements:null,selectedNodesBbox:{x:0,y:0,width:0,height:0},d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],nodeExtent:[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],nodesSelectionActive:!1,selectionActive:!1,userSelectionRect:{startX:0,startY:0,x:0,y:0,width:0,height:0,draw:!1},connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionMode:wt.Strict,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,elementsSelectable:!0,multiSelectionActive:!1,reactFlowVersion:"-"},cf=bs(ro);function ys(){return Fn(e=>t=>{e.forEach(({id:n,nodeElement:o,forceUpdate:r})=>{const s=gr(t,n),i=Tn(o);if(i.width&&i.height&&(s.width!==i.width||s.height!==i.height||r)){const d=sf(o,1);s.width=i.width,s.height=i.height,s.handleBounds=d}})})}function $s(){return Fn((e,t)=>n=>{(t?Cu:me)(n,e)})}function Cs(){return Fn(e=>t=>{me(t,[])})}function af(e=ro,t){var n,o,r;switch(t.type){case Pr:throw new Error("migrate to context");case yd:throw new Error("migrate to context");case Ur:throw new Error("migrate to context");case Hr:{const s=t.payload;return H(u({},e),{selectionActive:!0,userSelectionRect:{width:0,height:0,startX:s.x,startY:s.y,x:s.x,y:s.y,draw:!0}})}case Wr:return H(u({},e),{selectionActive:!1,userSelectionRect:H(u({},e.userSelectionRect),{draw:!1}),nodesSelectionActive:!1});case Gr:throw new Error("migrate to context");case jr:{const{d3Zoom:s,d3Selection:i,d3ZoomHandler:l,transform:d}=t.payload;return H(u({},e),{d3Zoom:s,d3Selection:i,d3ZoomHandler:l,transform:d})}case Zr:{const s=t.payload;return(n=e.d3Zoom)==null||n.scaleExtent([s,e.maxZoom]),H(u({},e),{minZoom:s})}case Qr:{const s=t.payload;return(o=e.d3Zoom)==null||o.scaleExtent([e.minZoom,s]),H(u({},e),{maxZoom:s})}case Kr:{const s=t.payload;return(r=e.d3Zoom)==null||r.translateExtent(s),H(u({},e),{translateExtent:s})}case cs:{const s=t.payload;return H(u({},e),{nodeExtent:s,nodes:e.nodes.map(i=>H(u({},i),{__rf:H(u({},i.__rf),{position:Xl(i.__rf.position,s)})}))})}case Fr:case Or:case Dr:case Lr:case Br:case qr:case Vr:case zr:case Jr:case Xr:case Yr:case es:case ts:case ns:case os:case rs:case ss:case is:return u(u({},e),t.payload);default:return e}}function lf({deleteKeyCode:e,multiSelectionKeyCode:t,onElementsRemove:n}){const o=It(),r=W(f=>f.unsetNodesSelection),s=W(f=>f.setMultiSelectionActive),i=Cs(),l=on(e),d=on(t);a.exports.useEffect(()=>{const{edges:f,selectedElements:x}=o.getState();if(n&&l&&x){const m=x.filter(An),p=lu(m,f),h=[...x,...p].reduce((y,g)=>y.set(g.id,g),new Map);n(Array.from(h.values())),r(),i()}},[l]),a.exports.useEffect(()=>{s(d)},[d])}var uf=e=>{const t=W(n=>n.updateSize);a.exports.useEffect(()=>{let n;const o=()=>{if(!e.current)return;const r=Tn(e.current);(r.height===0||r.width===0)&&console.warn("The React Flow parent container needs a width and a height to render the graph."),t(r)};return o(),window.onresize=o,e.current&&(n=new ResizeObserver(()=>o()),n.observe(e.current)),()=>{window.onresize=null,n&&e.current&&n.unobserve(e.current)}},[])};const df=(e,t)=>e.x!==t.x||e.y!==t.y||e.zoom!==t.k,so=e=>({x:e.x,y:e.y,zoom:e.k}),io=e=>e.target.closest(".nowheel"),ff=({onMove:e,onMoveStart:t,onMoveEnd:n,zoomOnScroll:o=!0,zoomOnPinch:r=!0,panOnScroll:s=!1,panOnScrollSpeed:i=.5,panOnScrollMode:l=lt.Free,zoomOnDoubleClick:d=!0,selectionKeyPressed:f,elementsSelectable:x,paneMoveable:m=!0,defaultPosition:p=[0,0],defaultZoom:h=1,translateExtent:y,zoomActivationKeyCode:g,preventScrolling:b=!0,children:$})=>{const C=a.exports.useRef(null),S=a.exports.useRef({x:0,y:0,zoom:0}),k=It(),E=R(w=>w.d3Zoom),v=R(w=>w.d3Selection),N=R(w=>w.d3ZoomHandler),_=W(w=>w.initD3Zoom),T=W(w=>w.updateTransform),P=on(g);return uf(C),a.exports.useEffect(()=>{if(C.current){const w=k.getState(),B=typeof y!="undefined"?y:w.translateExtent,M=dl().scaleExtent([w.minZoom,w.maxZoom]).translateExtent(B),j=fl(C.current).call(M),J=ct(p[0],B[0][0],B[1][0]),Z=ct(p[1],B[0][1],B[1][1]),q=ct(h,w.minZoom,w.maxZoom),G=Et.translate(J,Z).scale(q);M.transform(j,G),_({d3Zoom:M,d3Selection:j,d3ZoomHandler:j.on("wheel.zoom"),transform:[J,Z,q]})}},[]),a.exports.useEffect(()=>{v&&E&&(s&&!P?v.on("wheel",w=>{if(io(w))return!1;w.preventDefault(),w.stopImmediatePropagation();const B=v.property("__zoom").k||1;if(w.ctrlKey&&r){const Z=hl(w),q=-w.deltaY*(w.deltaMode===1?.05:w.deltaMode?1:.002)*10,G=B*Math.pow(2,q);E.scaleTo(v,G,Z);return}const M=w.deltaMode===1?20:1,j=l===lt.Vertical?0:w.deltaX*M,J=l===lt.Horizontal?0:w.deltaY*M;E.translateBy(v,-(j/B)*i,-(J/B)*i)}).on("wheel.zoom",null):typeof N!="undefined"&&v.on("wheel",w=>{if(!b||io(w))return null;w.preventDefault()}).on("wheel.zoom",N))},[s,l,v,E,N,P,r,b]),a.exports.useEffect(()=>{E&&(f?E.on("zoom",null):E.on("zoom",w=>{if(T([w.transform.x,w.transform.y,w.transform.k]),e){const B=so(w.transform);e(B)}}))},[f,E,T,e]),a.exports.useEffect(()=>{E&&(t?E.on("start",w=>{const B=so(w.transform);S.current=B,t(B)}):E.on("start",null))},[E,t]),a.exports.useEffect(()=>{E&&(n?E.on("end",w=>{if(df(S.current,w.transform)){const B=so(w.transform);S.current=B,n(B)}}):E.on("end",null))},[E,n]),a.exports.useEffect(()=>{E&&E.filter(w=>{const B=P||o,M=r&&w.ctrlKey;return!m&&!B&&!s&&!d&&!r||f||!d&&w.type==="dblclick"||io(w)&&w.type==="wheel"||(w.target.closest(".react-flow__node")||w.target.closest(".react-flow__edge"))&&w.type!=="wheel"||w.target.closest(".react-flow__nodesselection")&&w.type!=="wheel"||!r&&w.ctrlKey&&w.type==="wheel"||!B&&!s&&!M&&w.type==="wheel"||!m&&(w.type==="mousedown"||w.type==="touchstart")?!1:(!w.ctrlKey||w.type==="wheel")&&!w.button})},[E,o,r,s,d,m,f,x,P]),c("div",{className:"react-flow__renderer react-flow__zoompane",ref:C,children:$})};function Es(e){const t=e.target.closest(".react-flow");if(!t)return;const n=t.getBoundingClientRect();return{x:e.clientX-n.left,y:e.clientY-n.top}}const hf=()=>{const e=R(t=>t.userSelectionRect);return e.draw?c("div",{className:"react-flow__selection",style:{width:e.width,height:e.height,transform:`translate(${e.x}px, ${e.y}px)`}}):null};var pf=a.exports.memo(({selectionKeyPressed:e})=>{const t=R(b=>b.selectionActive),n=R(b=>b.elementsSelectable),o=W(b=>b.setUserSelection),r=W(b=>b.updateUserSelection),s=W(b=>b.unsetUserSelection),i=W(b=>b.unsetNodesSelection),l=R(b=>b.userSelectionRect),d=R(b=>b.transform),f=Rt(),x=$s();return!n||!(t||e)?null:c("div",{className:"react-flow__selectionpane",onMouseDown:b=>{const $=Es(b);!$||o($)},onMouseMove:b=>{var v,N;if(!e||!t)return;const $=Es(b);if(!$)return;const C=(v=l.startX)!=null?v:0,S=(N=l.startY)!=null?N:0,k=H(u({},l),{x:$.x<C?$.x:l.x,y:$.y<S?$.y:l.y,width:Math.abs($.x-C),height:Math.abs($.y-S)}),E=tr(f,k,d,!1,!0);x(E),r(k)},onMouseUp:()=>{s()},onMouseLeave:()=>{s(),i()},children:c(hf,{})})}),mf=({onSelectionDragStart:e,onSelectionDrag:t,onSelectionDragStop:n,onSelectionContextMenu:o})=>{const[r,s,i]=R(N=>N.transform),l=R(N=>N.selectedNodesBbox),d=R(N=>N.selectionActive),f=R(N=>N.selectedElements),x=R(N=>N.snapToGrid),m=R(N=>N.snapGrid),p=R(N=>N.nodes),h=W(N=>N.updateNodePosDiff),y=a.exports.useRef(null),g=a.exports.useMemo(()=>x?m:[1,1],[x,m]),b=a.exports.useMemo(()=>f?f.filter(An).map(N=>{const _=p.find(T=>T.id===N.id);return H(u({},_),{position:_==null?void 0:_.__rf.position})}):[],[f,p]),$=a.exports.useMemo(()=>({transform:`translate(${r}px,${s}px) scale(${i})`}),[r,s,i]),C=a.exports.useMemo(()=>({width:l.width,height:l.height,top:l.y,left:l.x}),[l]),S=a.exports.useCallback(N=>{e==null||e(N,b)},[e,b]),k=a.exports.useCallback((N,_)=>{t&&t(N,b),h({diff:{x:_.deltaX,y:_.deltaY},isDragging:!0})},[t,b,h]),E=a.exports.useCallback(N=>{h({isDragging:!1}),n==null||n(N,b)},[b,n]),v=a.exports.useCallback(N=>{const _=f?f.filter(An).map(T=>p.find(P=>P.id===T.id)):[];o==null||o(N,_)},[o]);return!f||d?null:c("div",{className:"react-flow__nodesselection",style:$,children:c(pl,{scale:i,grid:g,onStart:N=>S(N),onDrag:(N,_)=>k(N,_),onStop:N=>E(N),nodeRef:y,enableUserSelectHack:!1,children:c("div",{ref:y,className:"react-flow__nodesselection-rect",onContextMenu:v,style:C})})})};const ws=({children:e,onPaneClick:t,onPaneContextMenu:n,onPaneScroll:o,onElementsRemove:r,deleteKeyCode:s,onMove:i,onMoveStart:l,onMoveEnd:d,selectionKeyCode:f,multiSelectionKeyCode:x,zoomActivationKeyCode:m,elementsSelectable:p,zoomOnScroll:h,zoomOnPinch:y,panOnScroll:g,panOnScrollSpeed:b,panOnScrollMode:$,zoomOnDoubleClick:C,paneMoveable:S,defaultPosition:k,defaultZoom:E,translateExtent:v,preventScrolling:N,onSelectionDragStart:_,onSelectionDrag:T,onSelectionDragStop:P,onSelectionContextMenu:w})=>{const B=W(D=>D.unsetNodesSelection),M=Cs(),j=R(D=>D.nodesSelectionActive),J=on(f);lf({onElementsRemove:r,deleteKeyCode:s,multiSelectionKeyCode:x});const Z=a.exports.useCallback(D=>{t==null||t(D),B(),M()},[t]),q=a.exports.useCallback(D=>{n==null||n(D)},[n]),G=a.exports.useCallback(D=>{o==null||o(D)},[o]);return A(ff,{onMove:i,onMoveStart:l,onMoveEnd:d,selectionKeyPressed:J,elementsSelectable:p,zoomOnScroll:h,zoomOnPinch:y,panOnScroll:g,panOnScrollSpeed:b,panOnScrollMode:$,zoomOnDoubleClick:C,paneMoveable:S,defaultPosition:k,defaultZoom:E,translateExtent:v,zoomActivationKeyCode:m,preventScrolling:N,children:[e,c(pf,{selectionKeyPressed:J}),j&&c(mf,{onSelectionDragStart:_,onSelectionDrag:T,onSelectionDragStop:P,onSelectionContextMenu:w}),c("div",{className:"react-flow__pane",onClick:Z,onContextMenu:q,onWheel:G})]})};ws.displayName="FlowRenderer";var gf=a.exports.memo(ws);const Ss=e=>{const t=R(h=>h.transform),n=R(h=>h.nodesDraggable),o=R(h=>h.nodesConnectable),r=R(h=>h.elementsSelectable),s=ys(),i=R(h=>h.width),l=R(h=>h.height),d=Rt(),f=Array.from(d.nodes.values()),x=e.onlyRenderVisibleElements?tr(f,{x:0,y:0,width:i,height:l},t,!0):f,m=a.exports.useMemo(()=>({transform:`translate(${t[0]}px,${t[1]}px) scale(${t[2]})`}),[t[0],t[1],t[2]]),p=a.exports.useMemo(()=>typeof ResizeObserver=="undefined"?null:new ResizeObserver(h=>{const y=h.map(g=>({id:g.target.getAttribute("data-id"),nodeElement:g.target}));s(y)}),[s]);return c("div",{className:"react-flow__nodes",style:m,children:x.map(h=>{const y=he(d,h),g=h.type||"default",b=e.nodeTypes[g]||e.nodeTypes.default;e.nodeTypes[g]||console.warn(`Node type "${g}" not found. Using fallback type "default".`);const $=!!(h.draggable||n&&typeof h.draggable=="undefined"),C=!!(h.selectable||r&&typeof h.selectable=="undefined"),S=!!(h.connectable||o&&typeof h.connectable=="undefined");return c(b,{id:h.id,className:h.className,style:h.style,type:g,data:h.data,sourcePosition:h.sourcePosition,targetPosition:h.targetPosition,isHidden:h.isHidden,xPos:y.x,yPos:y.y,isDragging:y.isDragging,edited:y.edited,isInitialized:y.width!==null&&y.height!==null,snapGrid:e.snapGrid,snapToGrid:e.snapToGrid,selectNodesOnDrag:e.selectNodesOnDrag,onClick:e.onElementClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onNodeDoubleClick:e.onNodeDoubleClick,onNodeDragStart:e.onNodeDragStart,onNodeDrag:e.onNodeDrag,onNodeDragStop:e.onNodeDragStop,scale:t[2],selected:pr(d,h),onlySelected:pr(d,h)&&Jt(d)===1,wasOnlySelected:wu(d,h),highlight:d.highlightedNodeIDs.has(h.id),isDraggable:$,isSelectable:C,isConnectable:S,resizeObserver:p,dragHandle:h.dragHandle},h.id)})})};Ss.displayName="NodeRenderer";var xf=a.exports.memo(Ss);const bf=(e,t,n)=>{const o=n==="source"?"target":"source",r=t.handleBounds[n]||t.handleBounds[o];return e?r.find(s=>s.id===e):r[0]};function yf({connectionNodeId:e,connectionHandleId:t,connectionHandleType:n,connectionLineStyle:o,connectionPositionX:r,connectionPositionY:s,connectionLineType:i=ot.Bezier,sourceNode:l,transform:d,isConnectable:f,CustomConnectionLineComponent:x}){const m=t;if(l==null||!f)return null;const p=bf(m,l,n),h=p?p.x+p.width/2:l.width/2,y=p?p.y+p.height/2:l.height,g=l.x+h,b=l.y+y,$=(r-d[0])/d[2],C=(s-d[1])/d[2],k=(p==null?void 0:p.position)===I.Left||(p==null?void 0:p.position)===I.Right?I.Left:I.Top;if(x)return c("g",{className:"react-flow__connection",children:c(x,{sourceX:g,sourceY:b,sourcePosition:p==null?void 0:p.position,targetX:$,targetY:C,targetPosition:k,connectionLineType:i,connectionLineStyle:o,sourceNode:l,sourceHandle:p})});let E="";return i===ot.Bezier?E=Rr({sourceX:g,sourceY:b,sourcePosition:p==null?void 0:p.position,targetX:$,targetY:C,targetPosition:k}):i===ot.Step?E=eo({sourceX:g,sourceY:b,sourcePosition:p==null?void 0:p.position,targetX:$,targetY:C,targetPosition:k,borderRadius:0}):i===ot.SmoothStep?E=eo({sourceX:g,sourceY:b,sourcePosition:p==null?void 0:p.position,targetX:$,targetY:C,targetPosition:k}):E=`M${g},${b} ${$},${C}`,c("g",{className:"react-flow__connection",children:c("path",{d:E,className:"react-flow__connection-path",style:o})})}const Ns=({id:e,children:t})=>c("marker",{className:"react-flow__arrowhead",id:e,markerWidth:"12.5",markerHeight:"12.5",viewBox:"-10 -10 20 20",orient:"auto",refX:"0",refY:"0",children:t}),Ts=({color:e})=>A("defs",{children:[c(Ns,{id:"react-flow__arrowclosed",children:c("polyline",{stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1",fill:e,points:"-5,-4 0,0 -5,4 -5,-4"})}),c(Ns,{id:"react-flow__arrow",children:c("polyline",{stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",fill:"none",points:"-5,-4 0,0 -5,4"})})]});Ts.displayName="MarkerDefinitions";const As=e=>{const t=R(E=>E.transform),n=Rt(),o=a.exports.useContext(Un.edges),r=R(E=>E.connectionNodeId),s=R(E=>E.connectionHandleId),i=R(E=>E.connectionHandleType),l=R(E=>E.connectionPosition),d=R(E=>E.selectedElements),f=R(E=>E.nodesConnectable),x=R(E=>E.elementsSelectable),m=R(E=>E.width),p=R(E=>E.height),h=a.exports.useCallback(({source:E,target:v})=>!_n(n,fe(E),fe(v))&&!_n(n,fe(v),fe(E))&&!St(fe(v),fe(E)),[n]);if(!m)return null;const{connectionLineType:y,arrowHeadColor:g,connectionLineStyle:b,connectionLineComponent:$,onlyRenderVisibleElements:C}=e,S=`translate(${t[0]},${t[1]}) scale(${t[2]})`,k=r&&i;return A("svg",{width:m,height:p,className:"react-flow__edges",children:[c(Ts,{color:g}),A("g",{transform:S,children:[Array.from(o.values()).map(E=>c(Cf,{edge:E,props:e,appState:n,selectedElements:d,elementsSelectable:x,transform:t,width:m,height:p,onlyRenderVisibleElements:C,isValidConnection:h},E.id)),k&&c(yf,{sourceNode:he(n,fe(r)),connectionNodeId:r,connectionHandleId:s,connectionHandleType:i,connectionPositionX:l.x,connectionPositionY:l.y,transform:t,connectionLineStyle:b,connectionLineType:y,isConnectable:f,CustomConnectionLineComponent:$})]})]})};As.displayName="EdgeRenderer";var $f=a.exports.memo(As);function Cf({edge:e,props:t,appState:n,selectedElements:o,elementsSelectable:r,transform:s,width:i,height:l,onlyRenderVisibleElements:d,connectionMode:f,isValidConnection:x}){const m=e.sourceHandle||null,p=e.targetHandle||null,h=Rn(n,e),y=ar(n,e),g=a.exports.useCallback(Z=>{var q;(q=t.onEdgeUpdate)==null||q.call(t,e,Z)},[e,t.onEdgeUpdate]);if(!h)return console.warn(`couldn't create edge for parent id: ${e.parentID}; edge id: ${e.id}`),null;if(!y)return console.warn(`couldn't create edge for child id: ${e.childID}; edge id: ${e.id}`),null;const b=he(n,h),$=he(n,y);if(!b.width||!$.width)return null;const C=e.type||"default",S=t.edgeTypes[C]||t.edgeTypes.default,E=$.handleBounds.target,v=gs(b.handleBounds.source,m),N=gs(E,p),_=v?v.position:I.Bottom,T=N?N.position:I.Top;if(!v)return console.warn(`couldn't create edge for source handle id: ${m}; edge id: ${e.id}`),null;if(!N)return console.warn(`couldn't create edge for target handle id: ${p}; edge id: ${e.id}`),null;const{sourceX:P,sourceY:w,targetX:B,targetY:M}=of(v,b,_,N,$,T);if(!(d?rf({sourcePos:{x:P,y:w},targetPos:{x:B,y:M},width:i,height:l,transform:s}):!0))return null;const J=(o==null?void 0:o.some(Z=>ru(Z)&&Z.id===e.id))||!1;return c(S,{id:e.id,className:e.className,type:e.type,data:e.data,onClick:t.onElementClick,selected:J,animated:e.animated,label:e.label,labelStyle:e.labelStyle,labelShowBg:e.labelShowBg,labelBgStyle:e.labelBgStyle,labelBgPadding:e.labelBgPadding,labelBgBorderRadius:e.labelBgBorderRadius,style:e.style,arrowHeadType:e.arrowHeadType,source:e.parentID,target:e.childID,sourceHandleId:m,targetHandleId:p,sourceX:P,sourceY:w,targetX:B,targetY:M,sourcePosition:_,targetPosition:T,elementsSelectable:r,markerEndId:t.markerEndId,isHidden:e.isHidden||e.type==="tight",onConnectEdge:g,handleEdgeUpdate:typeof t.onEdgeUpdate!="undefined",isValidConnection:x,onContextMenu:t.onEdgeContextMenu,onMouseEnter:t.onEdgeMouseEnter,onMouseMove:t.onEdgeMouseMove,onMouseLeave:t.onEdgeMouseLeave,edgeUpdaterRadius:t.edgeUpdaterRadius,onEdgeDoubleClick:t.onEdgeDoubleClick,onEdgeUpdateStart:t.onEdgeUpdateStart,onEdgeUpdateEnd:t.onEdgeUpdateEnd},e.id)}const rn=.1,Ef={zoomIn:()=>{},zoomOut:()=>{},zoomTo:e=>{},transform:e=>{},fitView:(e={padding:rn,includeHiddenNodes:!1})=>{},setCenter:(e,t)=>{},fitBounds:e=>{},project:e=>e,initialized:!1},co=()=>{const e=It(),t=R(r=>r.d3Zoom),n=R(r=>r.d3Selection);return a.exports.useMemo(()=>n&&t?{zoomIn:()=>t.scaleBy(n,1.2),zoomOut:()=>t.scaleBy(n,1/1.2),zoomTo:r=>t.scaleTo(n,r),transform:r=>{const s=Et.translate(r.x,r.y).scale(r.zoom);t.transform(n,s)},fitView:(r={padding:rn,includeHiddenNodes:!1})=>{var g,b,$;const{nodes:s,width:i,height:l,minZoom:d,maxZoom:f}=e.getState();if(!s.length)return;const x=er(r.includeHiddenNodes?s:s.filter(C=>!C.isHidden)),[m,p,h]=or(x,i,l,(g=r.minZoom)!=null?g:d,(b=r.maxZoom)!=null?b:f,($=r.padding)!=null?$:rn),y=Et.translate(m,p).scale(h);t.transform(n,y)},setCenter:(r,s,i)=>{const{width:l,height:d,maxZoom:f}=e.getState(),x=typeof i!="undefined"?i:f,m=l/2-r*x,p=d/2-s*x,h=Et.translate(m,p).scale(x);t.transform(n,h)},fitBounds:(r,s=rn)=>{const{width:i,height:l,minZoom:d,maxZoom:f}=e.getState(),[x,m,p]=or(r,i,l,d,f,s),h=Et.translate(x,m).scale(p);t.transform(n,h)},project:r=>{const{transform:s,snapToGrid:i,snapGrid:l}=e.getState();return kn(r,s,i,l)},initialized:!0}:Ef,[t,n])},ks=({nodeTypes:e,edgeTypes:t,onMove:n,onMoveStart:o,onMoveEnd:r,onLoad:s,onElementClick:i,onNodeDoubleClick:l,onEdgeDoubleClick:d,onNodeMouseEnter:f,onNodeMouseMove:x,onNodeMouseLeave:m,onNodeContextMenu:p,onNodeDragStart:h,onNodeDrag:y,onNodeDragStop:g,onSelectionDragStart:b,onSelectionDrag:$,onSelectionDragStop:C,onSelectionContextMenu:S,connectionMode:k,connectionLineType:E,connectionLineStyle:v,connectionLineComponent:N,selectionKeyCode:_,multiSelectionKeyCode:T,zoomActivationKeyCode:P,onElementsRemove:w,deleteKeyCode:B,onConnect:M,onConnectStart:j,onConnectStop:J,onConnectEnd:Z,snapToGrid:q,snapGrid:G,onlyRenderVisibleElements:D,nodesDraggable:le,nodesConnectable:ge,elementsSelectable:se,selectNodesOnDrag:$e,minZoom:xe,maxZoom:te,defaultZoom:X,defaultPosition:je,translateExtent:Te,preventScrolling:Ae,nodeExtent:Ie,arrowHeadColor:Ze,markerEndId:Y,zoomOnScroll:Qe,zoomOnPinch:Ke,panOnScroll:Je,panOnScrollSpeed:Xe,panOnScrollMode:Me,zoomOnDoubleClick:Ye,paneMoveable:ke,onPaneClick:et,onPaneScroll:L,onPaneContextMenu:K,onEdgeUpdate:_e,onEdgeContextMenu:O,onEdgeMouseEnter:U,onEdgeMouseMove:Ce,onEdgeMouseLeave:Ee,edgeUpdaterRadius:ue,onEdgeUpdateStart:tt,onEdgeUpdateEnd:oe})=>{const pe=a.exports.useRef(!1),nt=W(z=>z.setOnConnect),it=W(z=>z.setOnConnectStart),Ct=W(z=>z.setOnConnectStop),bn=W(z=>z.setOnConnectEnd),yn=W(z=>z.setSnapGrid),$n=W(z=>z.setSnapToGrid),So=W(z=>z.setNodesDraggable),Ft=W(z=>z.setNodesConnectable),Cn=W(z=>z.setElementsSelectable),En=W(z=>z.setMinZoom),wn=W(z=>z.setMaxZoom),qi=W(z=>z.setTranslateExtent),Gi=W(z=>z.setNodeExtent),Vi=W(z=>z.setConnectionMode),Sn=It(),{zoomIn:No,zoomOut:To,zoomTo:Ao,transform:ko,fitView:_o,initialized:vo}=co();return a.exports.useEffect(()=>{!pe.current&&vo&&(s&&s({fitView:(z={padding:.1})=>_o(z),zoomIn:No,zoomOut:To,zoomTo:Ao,setTransform:ko,project:iu(Sn),getElements:uu(Sn),toObject:du(Sn)}),pe.current=!0)},[s,No,To,Ao,ko,_o,vo]),a.exports.useEffect(()=>{M&&nt(M)},[M]),a.exports.useEffect(()=>{j&&it(j)},[j]),a.exports.useEffect(()=>{J&&Ct(J)},[J]),a.exports.useEffect(()=>{Z&&bn(Z)},[Z]),a.exports.useEffect(()=>{typeof q!="undefined"&&$n(q)},[q]),a.exports.useEffect(()=>{typeof G!="undefined"&&yn(G)},[G]),a.exports.useEffect(()=>{typeof le!="undefined"&&So(le)},[le]),a.exports.useEffect(()=>{typeof ge!="undefined"&&Ft(ge)},[ge]),a.exports.useEffect(()=>{typeof se!="undefined"&&Cn(se)},[se]),a.exports.useEffect(()=>{typeof xe!="undefined"&&En(xe)},[xe]),a.exports.useEffect(()=>{typeof te!="undefined"&&wn(te)},[te]),a.exports.useEffect(()=>{typeof Te!="undefined"&&qi(Te)},[Te]),a.exports.useEffect(()=>{typeof Ie!="undefined"&&Gi(Ie)},[Ie]),a.exports.useEffect(()=>{typeof k!="undefined"&&Vi(k)},[k]),A(gf,{onPaneClick:et,onPaneContextMenu:K,onPaneScroll:L,onElementsRemove:w,deleteKeyCode:B,selectionKeyCode:_,multiSelectionKeyCode:T,zoomActivationKeyCode:P,elementsSelectable:se,onMove:n,onMoveStart:o,onMoveEnd:r,zoomOnScroll:Qe,zoomOnPinch:Ke,zoomOnDoubleClick:Ye,panOnScroll:Je,panOnScrollSpeed:Xe,panOnScrollMode:Me,paneMoveable:ke,defaultPosition:je,defaultZoom:X,translateExtent:Te,onSelectionDragStart:b,onSelectionDrag:$,onSelectionDragStop:C,onSelectionContextMenu:S,preventScrolling:Ae,children:[c(xf,{nodeTypes:e,onElementClick:i,onNodeDoubleClick:l,onNodeMouseEnter:f,onNodeMouseMove:x,onNodeMouseLeave:m,onNodeContextMenu:p,onNodeDragStop:g,onNodeDrag:y,onNodeDragStart:h,selectNodesOnDrag:$e,snapToGrid:q,snapGrid:G,onlyRenderVisibleElements:D}),c($f,{edgeTypes:t,onElementClick:i,onEdgeDoubleClick:d,connectionLineType:E,connectionLineStyle:v,connectionLineComponent:N,connectionMode:k,arrowHeadColor:Ze,markerEndId:Y,onEdgeUpdate:_e,onlyRenderVisibleElements:D,onEdgeContextMenu:O,onEdgeMouseEnter:U,onEdgeMouseMove:Ce,onEdgeMouseLeave:Ee,onEdgeUpdateStart:tt,onEdgeUpdateEnd:oe,edgeUpdaterRadius:ue})]})};ks.displayName="GraphView";var wf=a.exports.memo(ks);function sn(e){const t=({id:n,type:o,data:r,scale:s,xPos:i,yPos:l,selected:d,onlySelected:f,wasOnlySelected:x,highlight:m,onClick:p,onMouseEnter:h,onMouseMove:y,onMouseLeave:g,onContextMenu:b,onNodeDoubleClick:$,onNodeDragStart:C,onNodeDrag:S,onNodeDragStop:k,style:E,className:v,edited:N,isSelectable:_,isConnectable:T,selectNodesOnDrag:P,sourcePosition:w,targetPosition:B,isHidden:M,isInitialized:j,snapToGrid:J,snapGrid:Z,isDragging:q,resizeObserver:G,dragHandle:D})=>{const le=Ge(),ge=ys(),se=$s(),$e=W(L=>L.unsetNodesSelection),xe=R(L=>L.multiSelectionActive),te=a.exports.useRef(null),X=a.exports.useMemo(()=>({id:n,type:o,position:{x:i,y:l},data:r}),[n,o,i,l,r]),je=a.exports.useMemo(()=>J?Z:[1,1],[J,Z]),Te=a.exports.useMemo(()=>u({zIndex:d?10:3,transform:`translate(${i}px,${l}px)`,pointerEvents:_||p||h||y||g?"all":"none",opacity:j?1:0},E),[d,i,l,_,p,j,E,h,y,g]),Ae=a.exports.useMemo(()=>{if(!(!h||q))return L=>h(L,X)},[h,q,X]),Ie=a.exports.useMemo(()=>{if(!(!y||q))return L=>y(L,X)},[y,q,X]),Ze=a.exports.useMemo(()=>{if(!(!g||q))return L=>g(L,X)},[g,q,X]),Y=a.exports.useMemo(()=>{if(!!b)return L=>b(L,X)},[b,X]),Qe=a.exports.useCallback(L=>{C==null||C(L,X),P&&_?($e(),d||se([X],L.metaKey)):!P&&!d&&_&&($e(),se([]))},[C,X,P,_,d,$e,se,xe]),Ke=a.exports.useCallback((L,K)=>{const{deltaX:_e,deltaY:O}=K;le(U=>{ce(U).forEach(oe=>{he(U,oe).isDragging=!0});const Ce=L.altKey;if(U.highlightedNodeIDs=new Set,!Ce){const oe=Mu(ce(U).map(pe=>We(U,pe)));yr(U),oe.forEach(pe=>{rr(U,pe,_e,O),De(U,pe)}),Le(U);return}yr(U);const Ee=Ln(ce(U),oe=>We(U,oe)).map(oe=>On(U,oe));Ee.forEach(oe=>{const pe=re(oe),nt=lr(U,pe);if(nt!=null){const it=Rn(U,nt);xu(nt);const Ct=Zo(oe);xr(U,Ct,it),De(U,it)}rr(U,pe,_e,O),De(U,pe)});const ue=Q(Ee),tt=ue!=null?Q(br(U,re(ue),L)):null;U.highlightedNodeIDs=Dn(tt!=null?[tt]:[]),Le(U)})},[le]),Je=a.exports.useCallback(L=>{le(K=>{if(ce(K).forEach(ue=>{he(K,ue).isDragging=!1}),K.highlightedNodeIDs=new Set,!L.altKey)return;const O=Ln(ce(K),ue=>We(K,ue)).map(ue=>On(K,ue)),U=Q(O);if(U==null)return;const Ce=Q(br(K,re(U),L));if(Ce==null)return;qe(K);const Ee=re(U);ur(K,Qt(K,Ee)),Kt(K,Ce,Ee),De(K,Ce),Le(K)})},[le]),Xe=a.exports.useCallback(L=>{$==null||$(L,X),L.stopPropagation()},[X,$]),Me=a.exports.useCallback(()=>{!d&&!xe&&se([X])},[se,xe,X,d]),Ye=a.exports.useCallback(L=>{var K;(K=te.current)==null||K.removeEventListener("focus",Me),L==null||L.addEventListener("focus",Me),te.current=L},[Me]);if(a.exports.useEffect(()=>{var L;f&&((L=te.current)==null||L.focus())},[f]),a.exports.useLayoutEffect(()=>{te.current&&!M&&ge([{id:n,nodeElement:te.current,forceUpdate:!0}])},[n,M,w,B,ge]),a.exports.useEffect(()=>{if(te.current){const L=te.current;return G==null||G.observe(L),()=>G==null?void 0:G.unobserve(L)}},[G]),M)return null;const ke=Oe(["react-flow__node",`react-flow__node-${o}`,v,{selected:d,selectable:_}]),et={id:n,data:r,type:o,xPos:i,yPos:l,selected:d,wasOnlySelected:x,highlight:m,isConnectable:T,sourcePosition:w,targetPosition:B,isDragging:q,edited:N,dragHandle:D,nodeElement:te};return c(ml,{onStart:Qe,onDrag:Ke,onStop:Je,scale:s,cancel:".nodrag",nodeRef:te,grid:je,enableUserSelectHack:!1,handle:D,children:c("div",{className:ke,ref:Ye,style:Te,onMouseEnter:Ae,onMouseMove:Ie,onMouseLeave:Ze,onContextMenu:Y,onDoubleClick:Xe,"data-id":n,tabIndex:0,children:c(_s.Provider,{value:et,children:c(e,{})})})})};return t.displayName="NodeWrapper",a.exports.memo(t)}const _s=a.exports.createContext();function Se(){return a.exports.useContext(_s)}function Sf(e){const t={input:sn(e.input||ds),default:sn(e.default||oo),output:sn(e.output||hs)},n={},o=Object.keys(e).filter(r=>!["input","default","output"].includes(r)).reduce((r,s)=>(r[s]=sn(e[s]||oo),r),n);return u(u({},t),o)}const vs=({children:e})=>{const t=a.exports.useContext(gl);return a.exports.useMemo(()=>{var o,r;return(r=(o=t==null?void 0:t.store)==null?void 0:o.getState())==null?void 0:r.reactFlowVersion},[t])?c(ie,{children:e}):c(Lo,{store:cf,children:e})};vs.displayName="ReactFlowWrapper";const Nf={input:ds,default:oo,output:hs},Tf={default:Vn,straight:Mr,step:Ir,smoothstep:to},Af=[15,15],Rs=a.exports.forwardRef((So,$n)=>{var Ft=So,{elements:e=[],className:t,nodeTypes:n=Nf,edgeTypes:o=Tf,onElementClick:r,onLoad:s,onMove:i,onMoveStart:l,onMoveEnd:d,onElementsRemove:f,onConnect:x,onConnectStart:m,onConnectStop:p,onConnectEnd:h,onNodeMouseEnter:y,onNodeMouseMove:g,onNodeMouseLeave:b,onNodeContextMenu:$,onNodeDoubleClick:C,onNodeDragStart:S,onNodeDrag:k,onNodeDragStop:E,onSelectionDragStart:v,onSelectionDrag:N,onSelectionDragStop:_,onSelectionContextMenu:T,connectionMode:P=wt.Strict,connectionLineType:w=ot.Bezier,connectionLineStyle:B,connectionLineComponent:M,deleteKeyCode:j="Backspace",selectionKeyCode:J="Shift",multiSelectionKeyCode:Z="Meta",zoomActivationKeyCode:q="Meta",snapToGrid:G=!1,snapGrid:D=Af,onlyRenderVisibleElements:le=!1,selectNodesOnDrag:ge=!0,nodesDraggable:se,nodesConnectable:$e,elementsSelectable:xe,minZoom:te,maxZoom:X,defaultZoom:je=1,defaultPosition:Te=[0,0],translateExtent:Ae,preventScrolling:Ie=!0,nodeExtent:Ze,arrowHeadColor:Y="#b1b1b7",markerEndId:Qe,zoomOnScroll:Ke=!0,zoomOnPinch:Je=!0,panOnScroll:Xe=!1,panOnScrollSpeed:Me=.5,panOnScrollMode:Ye=lt.Free,zoomOnDoubleClick:ke=!0,paneMoveable:et=!0,onPaneClick:L,onPaneScroll:K,onPaneContextMenu:_e,children:O,onEdgeUpdate:U,onEdgeContextMenu:Ce,onEdgeDoubleClick:Ee,onEdgeMouseEnter:ue,onEdgeMouseMove:tt,onEdgeMouseLeave:oe,onEdgeUpdateStart:pe,onEdgeUpdateEnd:nt,edgeUpdaterRadius:it=10,nodeTypesId:Ct="1",edgeTypesId:bn="1"}=Ft,yn=de(Ft,["elements","className","nodeTypes","edgeTypes","onElementClick","onLoad","onMove","onMoveStart","onMoveEnd","onElementsRemove","onConnect","onConnectStart","onConnectStop","onConnectEnd","onNodeMouseEnter","onNodeMouseMove","onNodeMouseLeave","onNodeContextMenu","onNodeDoubleClick","onNodeDragStart","onNodeDrag","onNodeDragStop","onSelectionDragStart","onSelectionDrag","onSelectionDragStop","onSelectionContextMenu","connectionMode","connectionLineType","connectionLineStyle","connectionLineComponent","deleteKeyCode","selectionKeyCode","multiSelectionKeyCode","zoomActivationKeyCode","snapToGrid","snapGrid","onlyRenderVisibleElements","selectNodesOnDrag","nodesDraggable","nodesConnectable","elementsSelectable","minZoom","maxZoom","defaultZoom","defaultPosition","translateExtent","preventScrolling","nodeExtent","arrowHeadColor","markerEndId","zoomOnScroll","zoomOnPinch","panOnScroll","panOnScrollSpeed","panOnScrollMode","zoomOnDoubleClick","paneMoveable","onPaneClick","onPaneScroll","onPaneContextMenu","children","onEdgeUpdate","onEdgeContextMenu","onEdgeDoubleClick","onEdgeMouseEnter","onEdgeMouseMove","onEdgeMouseLeave","onEdgeUpdateStart","onEdgeUpdateEnd","edgeUpdaterRadius","nodeTypesId","edgeTypesId"]);const Cn=a.exports.useMemo(()=>Sf(n),[Ct]),En=a.exports.useMemo(()=>nf(o),[bn]),wn=Oe(["react-flow",t]);return c("div",H(u({},yn),{ref:$n,className:wn,children:A(vs,{children:[c(wf,{onLoad:s,onMove:i,onMoveStart:l,onMoveEnd:d,onElementClick:r,onNodeMouseEnter:y,onNodeMouseMove:g,onNodeMouseLeave:b,onNodeContextMenu:$,onNodeDoubleClick:C,onNodeDragStart:S,onNodeDrag:k,onNodeDragStop:E,nodeTypes:Cn,edgeTypes:En,connectionMode:P,connectionLineType:w,connectionLineStyle:B,connectionLineComponent:M,selectionKeyCode:J,onElementsRemove:f,deleteKeyCode:j,multiSelectionKeyCode:Z,zoomActivationKeyCode:q,onConnect:x,onConnectStart:m,onConnectStop:p,onConnectEnd:h,snapToGrid:G,snapGrid:D,onlyRenderVisibleElements:le,nodesDraggable:se,nodesConnectable:$e,elementsSelectable:xe,selectNodesOnDrag:ge,minZoom:te,maxZoom:X,defaultZoom:je,defaultPosition:Te,translateExtent:Ae,preventScrolling:Ie,nodeExtent:Ze,arrowHeadColor:Y,markerEndId:Qe,zoomOnScroll:Ke,zoomOnPinch:Je,zoomOnDoubleClick:ke,panOnScroll:Xe,panOnScrollSpeed:Me,panOnScrollMode:Ye,paneMoveable:et,onPaneClick:L,onPaneScroll:K,onPaneContextMenu:_e,onSelectionDragStart:v,onSelectionDrag:N,onSelectionDragStop:_,onSelectionContextMenu:T,onEdgeUpdate:U,onEdgeContextMenu:Ce,onEdgeDoubleClick:Ee,onEdgeMouseEnter:ue,onEdgeMouseMove:tt,onEdgeMouseLeave:oe,onEdgeUpdateStart:pe,onEdgeUpdateEnd:nt,edgeUpdaterRadius:it}),O]})}))});Rs.displayName="ReactFlow";const Is=({x:e,y:t,width:n,height:o,style:r,color:s,strokeColor:i,strokeWidth:l,className:d,borderRadius:f,shapeRendering:x})=>{const{background:m,backgroundColor:p}=r||{},h=s||m||p;return c("rect",{className:Oe(["react-flow__minimap-node",d]),x:e,y:t,rx:f,ry:f,width:n,height:o,fill:h,stroke:i,strokeWidth:l,shapeRendering:x})};Is.displayName="MiniMapNode";var kf=a.exports.memo(Is);const _f=200,vf=150,Ms=({style:e,className:t,nodeStrokeColor:n="#555",nodeColor:o="#fff",nodeClassName:r="",nodeBorderRadius:s=5,nodeStrokeWidth:i=2,maskColor:l="rgb(240, 242, 243, 0.7)"})=>{const d=R(D=>D.width),f=R(D=>D.height),[x,m,p]=R(D=>D.transform),h=R(D=>D.nodes),y=Oe(["react-flow__minimap",t]),g=(e==null?void 0:e.width)||_f,b=(e==null?void 0:e.height)||vf,$=o instanceof Function?o:()=>o,C=n instanceof Function?n:()=>n,S=r instanceof Function?r:()=>r,k=h&&h.length,E=er(h),v={x:-x/p,y:-m/p,width:d/p,height:f/p},N=k?cu(E,v):v,_=N.width/g,T=N.height/b,P=Math.max(_,T),w=P*g,B=P*b,M=5*P,j=N.x-(w-N.width)/2-M,J=N.y-(B-N.height)/2-M,Z=w+M*2,q=B+M*2,G=typeof window=="undefined"||!!window.chrome?"crispEdges":"geometricPrecision";return A("svg",{width:g,height:b,viewBox:`${j} ${J} ${Z} ${q}`,style:e,className:y,children:[h.filter(D=>!D.isHidden).map(D=>c(kf,{x:D.__rf.position.x,y:D.__rf.position.y,width:D.__rf.width,height:D.__rf.height,style:D.style,className:S(D),color:$(D),borderRadius:s,strokeColor:C(D),strokeWidth:i,shapeRendering:G},D.id)),c("path",{className:"react-flow__minimap-mask",d:`M${j-M},${J-M}h${Z+M*2}v${q+M*2}h${-Z-M*2}z
        M${v.x},${v.y}h${v.width}v${v.height}h${-v.width}z`,fill:l,fillRule:"evenodd"})]})};Ms.displayName="MiniMap";a.exports.memo(Ms);const Rf=(e,t,n)=>c("path",{stroke:n,strokeWidth:t,d:`M${e/2} 0 V${e} M0 ${e/2} H${e}`}),If=(e,t)=>c("circle",{cx:e,cy:e,r:e,fill:t}),Mf={[at.Dots]:"#81818a",[at.Lines]:"#eee"},Os=({variant:e=at.Dots,gap:t=15,size:n=.4,color:o,style:r,className:s})=>{const[i,l,d]=R($=>$.transform),f=a.exports.useMemo(()=>`pattern-${Math.floor(Math.random()*1e5)}`,[]),x=Oe(["react-flow__background",s]),m=t*d,p=i%m,h=l%m,y=e===at.Lines,g=o||Mf[e],b=y?Rf(m,n,g):If(n*d,g);return A("svg",{className:x,style:H(u({},r),{width:"100%",height:"100%"}),children:[c("pattern",{id:f,x:p,y:h,width:m,height:m,patternUnits:"userSpaceOnUse",children:b}),c("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${f})`})]})};Os.displayName="Background";var Of=a.exports.memo(Os);const Ds=({children:e})=>{const t=a.exports.useMemo(()=>bs(ro),[]);return c(Lo,{store:t,children:e})};Ds.displayName="ReactFlowProvider";const Ot=ae("div",{display:"flex",flexDirection:"column",variants:{align:{start:{alignItems:"flex-start"},center:{alignItems:"center"},end:{alignItems:"flex-end"},stretch:{alignItems:"stretch"}},justify:{start:{justifyContent:"flex-start"},center:{justifyContent:"center"},end:{justifyContent:"flex-end"},between:{justifyContent:"space-between"}}},defaultVariants:{align:"stretch",justify:"start"}}),Ve=ae("button",{alignItems:"center",appearance:"none",borderWidth:"0",boxSizing:"border-box",display:"inline-flex",flexShrink:0,fontSize:"14px",justifyContent:"center",lineHeight:"1",outline:"none",padding:"0",textDecoration:"none",userSelect:"none",WebkitTapHighlightColor:"transparent",cursor:"pointer",color:"$hiContrast",backgroundColor:"$loContrast",border:"1px solid $slate7","@hover":{"&:hover":{borderColor:"$slate8"}},"&:active":{backgroundColor:"$slate2"},"&:focus":{borderColor:"$slate8",boxShadow:"0 0 0 1px $colors$slate8"},"&:disabled":{pointerEvents:"none",backgroundColor:"transparent",color:"$slate6"},variants:{size:{1:{borderRadius:"$4",size:"25px"}},variant:{ghost:{backgroundColor:"transparent",borderWidth:"0","@hover":{"&:hover":{backgroundColor:"$slateA3"}},"&:focus":{boxShadow:"inset 0 0 0 1px $colors$slateA8, 0 0 0 1px $colors$slateA8"},"&:active":{backgroundColor:"$slateA4"},'&[data-radix-popover-trigger][data-state="open"], &[data-radix-dropdown-menu-trigger][data-state="open"]':{backgroundColor:"$slateA4"}}},state:{active:{backgroundColor:"$slate4",boxShadow:"inset 0 0 0 1px hsl(206,10%,76%)","@hover":{"&:hover":{boxShadow:"inset 0 0 0 1px hsl(206,10%,76%)"}},"&:active":{backgroundColor:"$slate4"}},waiting:{backgroundColor:"$slate4",boxShadow:"inset 0 0 0 1px hsl(206,10%,76%)","@hover":{"&:hover":{boxShadow:"inset 0 0 0 1px hsl(206,10%,76%)"}},"&:active":{backgroundColor:"$slate4"}}}},defaultVariants:{size:"1",variant:"ghost"}});function cn(o){var r=o,{children:e,content:t}=r,n=de(r,["children","content"]);return A(bl,{children:[c(yl,{asChild:!0,children:e}),A(Lf,H(u({sideOffset:3},n),{children:[t,c(Df,{css:{color:"$transparentPanel"},children:c($l,{offset:7,width:11,height:5,style:{fill:"currentColor"}})})]}))]})}const Df=ae("div"),Lf=ae(xl,{backgroundColor:"$transparentPanel",borderRadius:"$4",padding:"$4 $8",color:"$loContrast",font:"$detail"});function Bf({fitViewParams:e,onZoomIn:t,onZoomOut:n,onFitView:o,onInteractiveChange:r}){const[s,i]=a.exports.useState(!1),{zoomIn:l,zoomOut:d,fitView:f}=co(),x=a.exports.useCallback(()=>{l==null||l(),t==null||t()},[l,t]),m=a.exports.useCallback(()=>{d==null||d(),n==null||n()},[d,n]),p=a.exports.useCallback(()=>{f==null||f(e),o==null||o()},[f,e,o]);return a.exports.useEffect(()=>{i(!0)},[]),s?A(Ot,{css:{position:"absolute",zIndex:5,bottom:10,left:10},children:[c(cn,{content:"Zoom in",side:"right",align:"center",children:c(Ve,{onClick:x,children:c(Cl,{})})}),c(cn,{content:"Zoom out",side:"right",align:"center",children:c(Ve,{onClick:m,children:c(El,{})})}),c(cn,{content:"Fit view",side:"right",align:"center",children:c(Ve,{onClick:p,children:c(wl,{})})})]}):null}function Pf(e){const t=Bo.of(e.map(r=>H(u({},r),{run:({value:s,event:i})=>r.run(s,i)}))),n=t.facet.extensions.fields[0].get().handlers.keydown,o={facet:()=>t.value};return(r,s)=>n(s,{state:o,value:r,event:s})}function Ls(){const e=Hn();return a.exports.useCallback(()=>{e(t=>{if(Wu(t))return me(t,[]),qu(t)})},[e])}function Bs(){const e=Hn();return a.exports.useCallback(()=>{e(t=>{if(Gu(t))return me(t,[]),Vu(t)})},[e])}function Uf({initialState:e,topUI:t,children:n,nodeTypes:o,onDoubleClick:r,onKeyDown:s}){return c(Ju,{initialState:e,children:A(Wf,{onKeyDown:s,children:[c(Ds,{children:c(qf,{nodeTypes:o,onDoubleClick:r,onKeyDown:s,children:t})}),c("div",{style:{flexGrow:1,maxHeight:"50%",position:"relative"},children:n})]})})}const Hf=ae("div"),Ff={MAC:{panOnScroll:!0,paneMoveable:!1},WINDOWS:{}};function Wf({children:e,onKeyDown:t}){const n=Rt(),o=Ge(),r=Ls(),s=Bs(),i=a.exports.useRef(null);a.exports.useLayoutEffect(()=>{if(i.current!=null){const m=i.current;o(p=>{const[h,y]=m;if(gr(p,h).height!=null){const g=kt(p,h);y(p,g)}}),i.current=null}},[n,o]);const l=a.exports.useCallback(m=>{m!=null&&(i.current=m)},[]),d=a.exports.useMemo(()=>Pf([{key:"Backspace",run:Vf},{key:"ArrowUp",run:Ps},{key:"ArrowDown",run:Ps},{key:"Mod-a",run:zf},{key:"Mod-z",run:r},{key:"Mod-y",mac:"Mod-Shift-z",run:s}]),[s,r]),f=a.exports.useCallback(m=>{const p=d({setAppState:o},m);p||o(h=>{m.key==="Alt"&&(h.modes.alt=!0),p||l(t(h,m))})},[t,d,l,o]),x=a.exports.useCallback(m=>{o(p=>{m.key==="Alt"&&(p.modes.alt=!1)})},[o]);return a.exports.useEffect(()=>(document.addEventListener("keydown",f),document.addEventListener("keyup",x),()=>{document.removeEventListener("keydown",f),document.removeEventListener("keyup",x)})),c(Bn.Provider,{value:l,children:c("div",{style:{display:"flex",flexDirection:"column",height:"100%"},children:e})})}function qf({children:e,nodeTypes:t,onDoubleClick:n}){const o=Ge(),r=It(),s=a.exports.useContext(Bn);return c(Hf,{css:{height:"65%",borderBottom:"1px solid $slate7",outline:"none"},tabIndex:"-1",onDoubleClick:i=>{o(l=>{s(n(l,su(r,{x:i.clientX,y:i.clientY})))})},children:A(Rs,H(u({nodeTypes:t,edgeTypes:Gf,zoomOnDoubleClick:!1},Ff.MAC),{onEdgeUpdate:(i,{source:l,target:d})=>{o(f=>{In(f,i),dr(f,fe(l),fe(d))})},children:[c("div",{style:{position:"absolute",padding:4,zIndex:5,transform:"translate(-50%, 0)",top:0,left:"50%"},children:e}),c(Bf,{showInteractive:!1}),c(Of,{color:"#aaa",gap:16})]}))})}const Gf={tight:function(){return c(ie,{})}};function Vf({setAppState:e}){e(t=>{if(Jt(t)===0)return;qe(t);const o=Ln(ce(t),r=>We(t,r)).map(r=>On(t,r)).map(r=>{const s=re(r),i=en(t,s),l=Zo(r),d=vt(t,l);return r.forEach(f=>vu(t,f)),i!=null&&d!=null&&(Kt(t,i,d),De(t,i)),d!=null?d:i});me(t,o.filter(r=>r!=null)),Le(t)})}function Ps({setAppState:e},t){e(n=>{me(n,ce(n).map(t.key==="ArrowUp"?o=>{var r;return(r=en(n,o))!=null?r:o}:o=>{var r;return(r=vt(n,o))!=null?r:o}).filter(o=>o!=null))})}function zf({setAppState:e},t){e(n=>{me(n,Su(n))}),t.preventDefault()}function jf(e){const[t,n]=pd();return a.exports.useEffect(()=>{document.documentElement.classList.toggle(sd.className,t==="dark"),document.documentElement.style.setProperty("color-scheme",t)},[t]),c(cn,{content:"Toggle theme",side:"bottom",align:"end",children:c(Ve,H(u({onClick:()=>{n(t==="dark"?"light":"dark")}},e),{"aria-label":"toggle a light and dark color scheme",children:c(Sl,{})}))})}const ye=ae("div",{display:"flex",flexDirection:"row",variants:{align:{start:{alignItems:"flex-start"},center:{alignItems:"center"},end:{alignItems:"flex-end"},stretch:{alignItems:"stretch"}},justify:{start:{justifyContent:"flex-start"},center:{justifyContent:"center"},end:{justifyContent:"flex-end"},between:{justifyContent:"space-between"}}},defaultVariants:{align:"stretch",justify:"start"}});function Zf(e){return A(md,{children:[A(ye,{align:"center",css:{position:"absolute",top:"$20",right:"$20",zIndex:100},children:[e.topRightUI,c(jf,{})]}),c(Uf,u({},e))]})}function Us(e){return new Map(Object.entries(e))}const{state:ao,useSetState:lo,provider:Qf}=Cr({source:null,editorConfig:{tableExists(){return!1},tableColumns(){return[]}}});function an(){return a.exports.useContext(ao.editorConfig)}function rt(){const e=mt(),t=an();return a.exports.useMemo(()=>H(u({},e),{editorConfig:t}),[e,t])}const Kf={".cm-content":{caretColor:"$hiContrast"},".cm-cursor, .cm-dropCursor":{borderLeftColor:"$hiContrast"},"&.cm-focused .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:"$slate7"},".cm-activeLine":{backgroundColor:"$slate2"},".cm-selectionMatch":{backgroundColor:"$slate4"},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{outline:"1px solid $slate5"},".cm-tooltip":{border:"none",background:"$slate7",padding:"$4",borderRadius:"$4"},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-editor .cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{whiteSpace:"nowrap",overflow:"hidden auto",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",listStyle:"none",margin:0,padding:0,"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer",padding:"1px 3px",lineHeight:1.2}}},".cm-tooltip-autocomplete ul li[aria-selected]":{background:"$slate10",color:"$loContrast",borderRadius:"2px"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'"\xB7\xB7\xB7"',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"300px"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionMatchedText":{fontWeight:"bold"},".cmt-comment":{color:"$slate11"},".cmt-operator":{color:"$blue11"},".cmt-keyword":{color:"$violet11"},".cmt-string, .cmt-string2":{color:"$green11"},".cmt-number":{color:"$amber11"}};function Jf({extensions:e,emptyDisplayValue:t,autoFocus:n,label:o,value:r,onChange:s}){const[i,l]=a.exports.useState(null),[d,f]=a.exports.useState((n!=null?n:!1)&&r===""?"":null),x=a.exports.useRef(),m=a.exports.useCallback(()=>{var T;((T=x.current)==null?void 0:T.view)!=null&&Ul(x.current.view)},[]),p=a.exports.useCallback(()=>{var T;((T=x.current)==null?void 0:T.container)!=null&&x.current.container.closest(".react-flow__node").focus()},[]),h=a.exports.useCallback(T=>{f(null),T!==r&&s(T),m()},[m,s,r]),y=a.exports.useCallback(T=>{h(T),p()},[p,h]),g=a.exports.useCallback(()=>{f(null),m(),p()},[m,p]),b=Se(),$=b==null?void 0:b.id;Yf($,d),eh(x,d,y);const{zoomTo:C}=co(),S=Ge(),k=a.exports.useCallback(T=>{S(P=>{me(P,[fe($)])}),C(1),T!=null&&l({x:T.clientX,y:T.clientY}),f(r!=null?r:"")},[r,$,S,C]),E=Ls(),v=Bs(),N=Xf(x,{value:r,edited:d,startEditing:k,stopEditing:h,handleGivenValueChanged:g}),_=Hs(t!=null?t:r);return A("div",{style:{display:"inline-block"},children:[o!=null?c(th,{children:o}):null,d!=null?c(Fs,{css:{borderWidth:"0 0 1px 0",minWidth:"100px",cursor:"text"},extensions:e,click:i,ref:N,value:d,editable:!0,onUndo:E,onRedo:v,onMouseDown:ln,onTouchStart:ln,onChange:f,onConfirm:y,onKeyDown:ln}):c(Fs,{css:{borderWidth:_?"0 0 1px 0":"0",cursor:"pointer",minWidth:_?"100px":void 0},extensions:e,ref:N,editable:!1,value:!_&&Hs(r)?t:r,onClick:k,onKeyDown:ln})]})}function Hs(e){return/^\s*$/.test(e)}function ln(e){e.stopPropagation()}function Xf(e,{value:t,edited:n,startEditing:o,stopEditing:r,handleGivenValueChanged:s}){const[i,l]=a.exports.useState(t);a.exports.useEffect(()=>{t!==i&&(l(t),t!==""&&s())},[n,i,s,t]);const d=a.exports.useCallback(()=>{n==null&&o()},[n,o]),f=a.exports.useCallback(x=>{n!=null&&t===i&&r(n)},[n,i,r,t]);return a.exports.useCallback(x=>{var m,p,h,y,g,b;(p=(m=e.current)==null?void 0:m.container)==null||p.removeEventListener("focusin",d),(h=x==null?void 0:x.container)==null||h.addEventListener("focusin",d),(g=(y=e.current)==null?void 0:y.container)==null||g.removeEventListener("focusout",f),(b=x==null?void 0:x.container)==null||b.addEventListener("focusout",f),e.current=x},[e,d,f])}function Yf(e,t){const n=Hn();a.exports.useEffect(()=>{e!=null&&n(o=>{he(o,fe(e)).edited=t!=null})},[t,e,n])}function eh(e,t,n){a.exports.useEffect(()=>{const o=r=>{var s;t!=null&&!((s=e.current)==null?void 0:s.container.contains(r.target))&&n(t)};return document.addEventListener("mouseup",o),()=>{document.removeEventListener("mouseup",o)}},[e,t,n])}function th(e){return c("span",{style:{fontSize:12},children:e.children})}const Fs=a.exports.forwardRef(function(t,n){const C=t,{css:o,value:r,extensions:s,onChange:i,onConfirm:l,editable:d,click:f,onUndo:x,onRedo:m}=C,p=de(C,["css","value","extensions","onChange","onConfirm","editable","click","onUndo","onRedo"]),h=a.exports.useRef(null),{state:y,view:g,container:b,setContainer:$}=nh({container:h.current,value:r,extensions:s,onChange:i,onConfirm:l,editable:d,click:f,onUndo:x,onRedo:m});if(a.exports.useImperativeHandle(n,()=>({container:b,state:y,view:g}),[b,y,g]),a.exports.useEffect(()=>($(h.current),()=>{g&&g.destroy()}),[]),typeof r!="string")throw new Error(`value must be typeof string but got ${typeof r}`);return c(we,u({css:u(H(u({borderWidth:0},o),{borderStyle:"solid",borderColor:"$blue9"}),Kf),ref:h},p))});function nh(e){const{value:t,extensions:n,onChange:o,onConfirm:r,editable:s,click:i,onUndo:l,onRedo:d}=e,[f,x]=a.exports.useState(e.container),[m,p]=a.exports.useState(),[h,y]=a.exports.useState(),g=a.exports.useRef();g.current=s;const b=Nn.updateListener.of(S=>{if(S.docChanged&&typeof o=="function"&&g.current){const E=S.state.doc.toString();o(E,S)}}),$=Nl();let C=[...n,Po.allowMultipleSelections.of(!0),Tl(),s?Al():[],kl({position:"absolute"}),$.slice(0,-1),Bo.of([..._l.filter(({key:S})=>S!=="Mod-Enter"),...vl,{key:"Mod-Enter",run:S=>{Rl(S);const E=S.state.doc.toString();r(E)}},{key:"Mod-z",run:S=>(Il(S)||l(),!0),preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:S=>(Ml(S)||(console.log("redo from editor"),d()),!0),preventDefault:!0},{key:"Mod-u",run:Ol,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:Dl,preventDefault:!0}]),b,sh,Ll];return a.exports.useEffect(()=>{if(f&&!h){const S=Po.create({doc:t,extensions:C});if(y(S),!m){const k=new Nn({state:S,parent:f});p(k)}}},[f,h]),a.exports.useEffect(()=>()=>{m&&m.destroy()},[m]),a.exports.useEffect(()=>{if(m){const S=m.state.doc.toString();t!==S&&m.dispatch({changes:{from:0,to:S.length,insert:t||""}})}},[t,m]),a.exports.useEffect(()=>{m&&m.dispatch({effects:Bl.reconfigure.of(C)})},[n,s]),a.exports.useEffect(()=>{s&&m!=null&&oh(m,i)},[s,m,i]),{state:h,setState:y,view:m,setView:p,container:f,setContainer:x}}function oh(e,t){var o;const n=(o=rh(e,t))!=null?o:0;e.focus(),e.dispatch({selection:Pl.cursor(n)})}function rh(e,t){return t==null?null:e.posAtCoords(t)}const sh=Nn.theme({"&.cm-editor.cm-focused":{outline:"none"},"& .cm-scroller":{fontFamily:"inherit",overflowX:"visible"},"& .cm-content":{padding:"0"},"& .cm-line":{padding:0}});function Pe(n){var o=n,{schema:e}=o,t=de(o,["schema"]);return c(Jf,H(u({},t),{extensions:[ih({dialect:Gt,schema:e})]}))}function ih(e){return new Hl(e.dialect.language,[Fl(e)])}function ch({style:e,trigger:t,children:n}){const[o,r]=a.exports.useState(!1);return A(ie,{children:[c("div",{style:e,onMouseEnter:()=>r(!0),children:t}),o?c("div",{onMouseLeave:()=>r(!1),children:n}):null]})}function ah({hideControls:e,children:t,type:n,useControls:o,useHasProblem:r}){const s=Se(),i=r(),l=mt();return A("div",{children:[A(uh,{isHighlighted:s.highlight,isSelected:s.selected,wasSelected:!s.selected&&!Eu(l)&&s.wasOnlySelected,hasProblem:i,children:[t,n!=="output"?c(gt,{style:Ws(Au(l,s)),type:"target",position:"left"}):null,c(gt,{style:Ws(_u(l,s)),type:"source",position:"right"})]}),c(we,{css:{position:"absolute",left:"100%",top:"100%",transform:"translate(-100%, -30%)"},children:mu(s)}),c(lh,{hideControls:e,useControls:o})]})}function Ws(e){return{visibility:e?"visible":"hidden"}}function lh({hideControls:e,useControls:t}){const n=Se(),o=mt(),r=t(n);if(r==null||n.edited||n.isDragging)return null;const s=n.selected,i=!ku(o,n),l=c("div",{style:{position:"absolute",top:"calc(100% + 4px)",left:0},children:r});return(e!=null?e:!1)||!s?null:i?l:c(ch,{style:{position:"absolute",top:"50%",left:0,transform:"translate(-100%, -50%)"},trigger:c(Ve,{children:c(Vt,{})}),children:l})}const uh=ae("div",{cursor:"move",background:"$slate1",borderRadius:"8px",border:"1px solid $slate7",padding:"2px 8px",variants:{isSelected:{true:{borderColor:"$blue9",boxShadow:"0 0 0 0.5px $colors$blue9"}},wasSelected:{true:{borderColor:"$blue7",boxShadow:"0 0 0 0.5px $colors$blue7"}},isHighlighted:{true:{borderBottomColor:"$amber9"}},hasProblem:{true:{borderColor:"$red9",boxShadow:"0 0 0 0.5px $colors$red9"}}},compoundVariants:[{isSelected:!0,hasProblem:!0,css:{borderColor:"$pink9",boxShadow:"0 0 0 0.5px $colors$pink9"}}]});function Ne(){return c(we,{css:{minWidth:"2px"}})}function qs(){return c(we,{css:{minHeight:"2px"}})}function Ue({hideControls:e,type:t,children:n}){return c(ah,{hideControls:e,type:t,useControls:dh,useHasProblem:fh,children:n})}function dh(e){const t=mt(),n=ed();if(Jt(t)>2)return null;const o=Jt(t)===2,r=o&&!Iu(t,...ce(t));if(o&&!r)return null;const s=bo.has(e.type),i=Ri.has(e.type),l=Vs(n);return r?c(ye,{children:c(Gs,{icon:c(Vt,{}),action:dd})}):A(Ot,{children:[!l||s?A(ie,{children:[c(ye,{children:c(ph,{icon:l?c(Uo,{}):c(Vt,{}),action:l?Nr:Sr})}),c(qs,{})]}):null,l&&i?c(ye,{children:c(Gs,{icon:c(Uo,{}),action:fd})}):null]})}function fh(){const e=mt(),t=an(),n=Se();return lp(H(u({},e),{editorConfig:t}),n)}function hh(e,t){return(Vs(e.modes)?Nr:Sr)(Ht(t))(e)}function ph({action:e,icon:t}){return c(ie,{children:ve(bo,({label:n},o)=>A(a.exports.Fragment,{children:[c(Wn,{icon:t,onAdd:e(Ht(o)),children:n}),c(Ne,{})]},o))})}function Gs({action:e,icon:t}){return c(ie,{children:ve(Ri,({label:n},o)=>A(a.exports.Fragment,{children:[c(Wn,{icon:t,onAdd:e(Ht(o)),children:n}),c(Ne,{})]},o))})}function mh(){return c(Wn,{icon:c(Vt,{}),onAdd:ad(Ht("from")),children:"FROM"})}function Vs(e){return e.alt}function gh(){const e=Se(),t=xt(e),n=be(e),{schema:o}=an();return A(Ue,{hideControls:t.length===0,type:"output",children:["FROM"," ",c(Pe,{autoFocus:!0,schema:o,value:t,onChange:r=>{n(s=>{js(s,r)})}})]})}const zs={Component:gh,emptyNodeData:xh,results(e,t){return xt(t)===""?c(yh,{node:t}):null},hasProblem(e,t){return xt(t)!==""&&!bh(e,t)},query(e,t){const n=xt(t);return n.length>0?`SELECT * from ${n}`:null},queryAdditionalTables(e,t){return null},querySelectable(e,t){return zs.query(e,t)},columnNames(e,t){return new Set(e.editorConfig.tableColumns(xt(t)))},ColumnControl({columnName:e}){return e}};function xh(){return{name:""}}function xt(e){return e.data.name}function bh(e,t){return e.editorConfig.tableExists(xt(t))!=null}function js(e,t){e.data.name=t}function yh({node:e}){const{schema:t}=an(),n=be(e),o=Object.keys(t);return o.sort(),A("table",{children:[c("thead",{children:A("tr",{children:[c("th",{children:"Table"}),c("th",{children:"Columns"})]})}),c("tbody",{children:o.map(r=>A("tr",{children:[c("td",{children:c(Be,{css:{marginVert:"2px"},onClick:()=>{n(s=>{js(s,r)})},children:r})}),c("td",{children:t[r].join(", ")})]},r))})]})}function Zs({css:e,trigger:t,children:n}){const[o,r]=a.exports.useState(!1);return A("div",{style:{position:"relative"},children:[c("div",{onClick:()=>r(!0),children:t}),o?c(we,{css:e,onMouseLeave:()=>r(!1),children:n}):null]})}function Dt(e,t){const n=Q(F(e,t));return n==null?{}:Zu(ne(e,n),()=>[])}function un(e,t){return e.join(","+(/\n/.test(t)?`
`:" "))+(/,\s*$/.test(t)?",":"")}function uo(e){return e.replace(/,\s*$/,"")}function Qs([e,t]){return t!=null?`${e} AS ${t}`:e}function Ks([e,t],n){const o=dn([e,t],n);return o===e?o:`${e} AS ${o}`}function dn([e,t],n){return t!=null?t:/^\w+$/.test(e)?e:$h(e,n)}function $h(e,t){const n=e.replace(/\W+/g," ").trim().replace(/\s+/g,"_").toLowerCase();return n!==""?n:"_"+(t+1)}function Js(e){return bt(e).map(re)}function bt(e){let t=[];const n=Gt.language.parser.parse(e).cursor();if(n.firstChild(),n.firstChild(),n.name==="Script")return t;let o="",r=null;do if(!(n.name==="LineComment"||n.name==="BlockComment")){if(n.name==="Keyword"&&/^as$/i.test(Lt(n,e))){n.nextSibling(),r=Lt(n,e);continue}if(n.name==="Punctuation"&&(t.push([o,r]),o="",r=null,!n.nextSibling()))break;o!==""&&e[n.from-1]===" "&&(o+=" "),o+=Lt(n,e)}while(n.nextSibling());return o!==""&&t.push([o,r]),t}function Xs(e){let t=[];const n=Gt.language.parser.parse(e).cursor();if(n.firstChild(),n.firstChild(),n.name==="Script")return t;let o="",r="";do if(!(n.name==="LineComment"||n.name==="BlockComment")){if(n.name==="Keyword"&&/^asc|desc$/i.test(Lt(n,e))&&(r=o,o=""),n.name==="Punctuation"&&(t.push(r.length>0?[r,o]:[o,""]),r="",o="",!n.nextSibling()))break;o!==""&&e[n.from-1]===" "&&(o+=" "),o+=Lt(n,e)}while(n.nextSibling());return o!==""&&t.push(r.length>0?[r,o]:[o,""]),t}function Lt(e,t,n=0){return t.substring(e.from+n,e.to-n)}function Ch(){const e=Se(),t=be(e),n=rt();return A(Ue,{children:["GROUP BY"," ",c(Pe,{emptyDisplayValue:"\u2205",schema:Dt(n,e),value:fn(e),onChange:o=>{t(r=>{ho(r,o)})}}),A(we,{css:{color:st(e)?void 0:"$slate11"},children:["SELECT"," ",c(Pe,{emptyDisplayValue:"*",schema:Dt(n,e),value:pn(e),onChange:o=>{t(r=>{oi(r,o)})}})]})]})}const Ys={Component:Ch,emptyNodeData:wh,hasProblem(e,t){return!1},query(e,t){const n=Q(F(e,t));if(n==null)return null;const o=Re(e,n);return st(t)?ci(t,pn(t),o):`SELECT * from (${o})`},queryAdditionalTables(e,t){const n=Q(F(e,t));if(n==null)return null;const o=Re(e,n);if(!st(t))return null;const r=dt(ne(e,n),ti(t));return r.length===0?null:[`SELECT ${r.join(",")} FROM (${o})`]},querySelectable(e,t){if(!st(t))return Ys.query(e,t);const n=Q(F(e,t));if(n==null)return null;const o=Re(e,n);return ci(t,Bt(t).map(Ks).join(","),o)},columnNames(e,t){const n=Q(F(e,t));return n==null?new Set:st(t)?new Set(Bt(t).map(dn)):ne(e,n)},ColumnControl({node:e,columnName:t,isPrimary:n}){const o=be(e),r=n&&st(e);return!r||fo(e,t)||ni(e,t)?A(ye,{align:"center",children:[c("input",{checked:r&&ni(e,t),style:{cursor:"pointer"},type:"checkbox",onChange:i=>{o(l=>{r&&!fo(l,t)?si(l,t):Sh(l,t)})}}),c(Ne,{}),c(Ne,{}),t,!n&&st(e)?c(Eh,{onChange:i=>{o(l=>{ri(l,ei[i](t))})}}):null]}):t}};function Eh({onChange:e}){return c(Zs,{css:{position:"absolute",top:"100%",background:"$slate7",padding:"$4",borderRadius:"$4"},trigger:c(Ve,{children:c(Ho,{})}),children:c(Ot,{children:Object.keys(ei).map(t=>c(Be,{css:{marginTop:"$4"},onClick:()=>e(t),children:t},t))})})}const ei={"COUNT DISTINCT":e=>`COUNT(DISTINCT ${e})`,AVG:e=>`AVG(${e})`,MIN:e=>`MIN(${e})`,MAX:e=>`MAX(${e})`};function wh(){return{groupedBy:"",aggregations:""}}function st(e){return hn(e).length>0}function fn(e){return e.data.groupedBy}function hn(e){return Js(fn(e))}function ti(e){return new Set(hn(e))}function fo(e,t){return ti(e).has(t)}function pn(e){return e.data.aggregations}function ni(e,t){return Bt(e).find(([n,o])=>n===t||o===t)!=null}function ho(e,t){e.data.groupedBy=t}function oi(e,t){e.data.aggregations=t}function Sh(e,t){fo(e,t)?Th(e,t):Nh(e,t)}function Nh(e,t){ho(e,[...hn(e),t].join(", ")),ri(e,t)}function Th(e,t){ho(e,un(hn(e).filter(n=>n!==t),fn(e))),si(e,t)}function ri(e,t){ii(e,Bt(e).concat(bt(t)))}function si(e,t){ii(e,Bt(e).filter(([n,o])=>n!==t&&o!==t))}function ii(e,t){oi(e,un(t.map(Qs),pn(e)))}function Bt(e){return bt(pn(e))}function ci(e,t,n){return`SELECT ${t===""?"*":uo(t)}
    FROM (${n})
    GROUP BY ${uo(fn(e))}`}function ai({checked:e,onChange:t}){return c("input",{checked:e,style:{cursor:"pointer"},type:"checkbox",onChange:t})}function Ah(){const e=Se(),t=yt(e),n=be(e),o=rt();return A(Ue,{children:[c(Pe,{emptyDisplayValue:"INNER",value:li(e),onChange:r=>{n(s=>{Ih(s,r)})}})," ","JOIN ON"," ",c(Pe,{emptyDisplayValue:"\u2205",schema:Hh(o,e),value:t,onChange:r=>{n(s=>{po(s,r)})}})]})}const kh={Component:Ah,emptyNodeData:vh,hasProblem(e,t){return F(e,t).length!==2},query(e,t){const n=F(e,t),[o,r]=n,s=mn(t),i=dt(o!=null?ne(e,o):new Set,new Set(s.map(re))),l=dt(r!=null?ne(e,r):new Set,new Set(s.map(jo)));return mi(e,t,o,r,s.length>0?s.map(re).map(d=>"a."+d).concat(i.map(d=>"a."+d),l.map(d=>"b."+d)).join(","):"a.*, b.*")},queryAdditionalTables(e,t){return null},querySelectable(e,t){const n=F(e,t),[o,r]=n,s=n.map(i=>ne(e,i));return mi(e,t,o,r,Dh(t,s).join(","))},columnNames(e,t){const o=F(e,t).map(r=>ne(e,r));return Lh(t,o)},ColumnControl({node:e,columnName:t,isPrimary:n,columnIndex:o}){const r=rt(),s=be(e);if(Nu(r,e))return null;const i=mn(e),l=F(r,e),d=dt(ne(r,re(l)),new Set(i.map(re))),f=o<i.length,x=o<i.length+d.length,m=(f?"":(x?"a":"b")+".")+t;return A(ye,{align:"center",children:[f?A(ie,{children:[c(ai,{checked:!0,onChange:()=>{s(p=>{Oh(p,t)})}}),c(Ne,{}),c(Ne,{})]}):null,m,f?null:c(_h,{columns:ve(ne(r,(x?jo:re)(F(r,e))),p=>(x?"b":"a")+"."+p),onChange:p=>{s(h=>{Mh(h,`${m} = ${p}`)})}})]})}};function _h({columns:e,onChange:t}){return c(Zs,{css:{position:"absolute",top:"100%",background:"$slate7",padding:"$4",borderRadius:"$4"},trigger:c(Ve,{children:c(Ho,{})}),children:c(Ot,{children:e.map(n=>c(Be,{css:{marginTop:"$4"},onClick:()=>t(n),children:n},n))})})}function vh(){return{type:"INNER",where:""}}function Rh(e){return yt(e).length>0}function li(e){return e.data.type}function yt(e){return e.data.where}function Ih(e,t){e.data.type=t}function po(e,t){e.data.where=t}function Mh(e,t){po(e,yt(e)===""?t:`${yt(e)} AND ${t}`)}function Oh(e,t){po(e,Bh(hi(e).filter(n=>{const o=pi(n);if(o==null)return!0;const[r]=o;return r!==t})))}function Dh(e,t){const n=mn(e),o=t.map((r,s)=>Ko(r,new Set(n.map(i=>i[s]))));return n.map(re).map(r=>ui(0,r)).concat(...o.map((r,s)=>ve(r,i=>{var l;return`${ui(s,i)}${((l=o[fi(s)])!=null?l:new Set).has(i)?` as ${di(s,i)}`:""}`})))}function Lh(e,t){const n=mn(e),o=t.map((r,s)=>Ko(r,new Set(n.map(i=>i[s]))));return new Set(n.map(re).concat(...o.map((r,s)=>ve(r,i=>{var l;return((l=o[fi(s)])!=null?l:new Set).has(i)?di(s,i):i}))))}function ui(e,t){return`${mo(e)}.${t}`}function di(e,t){return`${t}_${mo(e)}`}function mo(e){return e===0?"a":"b"}function fi(e){return e===0?1:0}function mn(e){return hi(e).map(pi).filter(t=>t!=null)}function hi(e){return yt(e).split(/\s+AND\s+/)}function Bh(e){return e.join(" AND ")}function pi(e){const t=e.match(/a\.(\w+)\s*=\s*b\.(\w+)/);if(t==null)return null;const[,n,o]=t;return[n,o]}function mi(e,t,n,o,r){return`SELECT ${r} FROM ${Ph(t,`(${ze(e,n)}) AS a`,`(${ze(e,o)}) AS b`)} ${Rh(t)?`ON ${yt(t)}`:""}`}function Ph(e,t,n){const[o,r]=Uh(li(e)),[s,i]=o?[n,t]:[t,n];return`${s} ${r} JOIN ${i}`}function Uh(e){const t=e.split(/\s+/);return[t.find(gi),t.map(o=>gi(o)?"LEFT":o).join(" ")]}function gi(e){return/\bright\b/i.test(e)}function Hh(e,t){const n=F(e,t);return Qu(n.map(o=>ne(e,o)).map((o,r)=>[mo(r),Array.from(o)]))}function Fh(){const e=Se(),t=be(e),n=rt();return A(Ue,{children:["SELECT"," ",c(Pe,{emptyDisplayValue:"*",schema:Dt(n,e),value:Pt(e),onChange:o=>{t(r=>{yi(r,o)})}})]})}const Wh={Component:Fh,emptyNodeData:qh,hasProblem(e,t){return Q(F(e,t))==null},query(e,t){const n=Q(F(e,t)),o=n==null?null:Re(e,n);return go(Pt(t),o)},queryAdditionalTables(e,t){const n=Q(F(e,t));if(n==null)return null;const o=Re(e,n);if(!xi(t))return null;const r=dt(ne(e,n),new Set(Ut(t).map(dn)));return r.length===0?null:[go(r.join(","),o)]},querySelectable(e,t){const n=Q(F(e,t)),o=n==null?null:Re(e,n);return go(Ut(t).map(Ks).join(","),o)},columnNames(e,t){const n=Q(F(e,t));return n==null?new Set:xi(t)?new Set(Ut(t).map(dn)):ne(e,n)},ColumnControl({node:e,columnName:t}){const n=be(e);return A(ye,{align:"center",children:[c(ai,{checked:bi(e,t),onChange:()=>{n(o=>{zh(o,t)})}}),c(Ne,{}),c(Ne,{}),t,c(Ne,{})]})}};function qh(){return{selected:""}}function Pt(e){return e.data.selected}function Gh(e){return Js(Pt(e))}function Vh(e){return new Set(Gh(e))}function Ut(e){return bt(Pt(e))}function xi(e){return Ut(e).length>0}function bi(e,t){return Vh(e).has(t)}function yi(e,t){e.data.selected=t}function zh(e,t){const n=Ut(e);yi(e,un((bi(e,t)?n.filter(([o,r])=>o!==t&&r!==t):n.concat(bt(t))).map(Qs),Pt(e)))}function go(e,t){return`SELECT ${e===""?"*":uo(e)} FROM (${t})`}function jh(){const e=Se(),t=gn(e),n=be(e),o=rt();return A(Ue,{children:["WHERE"," ",c(Pe,{emptyDisplayValue:"\u2205",schema:Dt(o,e),value:t,onChange:r=>{n(s=>{Qh(s,r)})}})]})}const $i={Component:jh,emptyNodeData:Zh,hasProblem(e,t){return!1},query(e,t){const n=Q(F(e,t));if(n==null)return null;const o=Re(e,n);return Ci(t)?`SELECT * FROM (${o}) WHERE ${gn(t)}`:`SELECT * FROM (${o})`},queryAdditionalValues(e,t){const n=Q(F(e,t));if(n==null)return null;const o=Re(e,n);return Ci(t)?`SELECT * FROM (${o}) WHERE NOT (${gn(t)})`:null},queryAdditionalTables(e,t){return null},querySelectable(e,t){return $i.query(e,t)},columnNames(e,t){const n=Q(F(e,t));return n==null?new Set:ne(e,n)},ColumnControl({columnName:e}){return e}};function Zh(){return{filters:""}}function Ci(e){return gn(e).length>0}function gn(e){return e.data.filters}function Qh(e,t){e.data.filters=t}function Kh(){const e=Se(),t=be(e),n=rt();return A(Ue,{children:["ORDER BY"," ",c(Pe,{emptyDisplayValue:"\u2205",schema:Dt(n,e),value:$t(e),onChange:o=>{t(r=>{Si(r,o)})}})]})}const Ei={name:"OrderNode",Component:Kh,hasProblem(e,t){return!1},emptyNodeData:Jh,query(e,t){const n=Q(F(e,t));if(n==null)return null;const o=Re(e,n);return Xh(t)?`SELECT * FROM  (${o})
    ORDER BY ${$t(t)}`:o},queryAdditionalTables(){return null},querySelectable(e,t){return Ei.query(e,t)},columnNames(e,t){const n=Q(F(e,t));return n==null?new Set:ne(e,n)},ColumnControl({node:e,columnName:t}){const n=be(e);return A(ye,{children:[c(Be,{onClick:()=>{n(o=>{Yh(o,t)})},children:(()=>{switch(wi(e,t)){case"ASC":return"\u25B2";case"DESC":return"\u25BC";default:return"-"}})()}),c(Ne,{}),t]})}};function Jh(){return{by:""}}function Xh(e){return bt($t(e)).length>0}function $t(e){return e.data.by}function wi(e,t){var o;const[,n]=(o=Xs($t(e)).find(([r])=>r===t))!=null?o:[];return n}function Si(e,t){e.data.by=t}function Yh(e,t){Si(e,un(Xs($t(e)).filter(([n])=>n!==t).concat((()=>{switch(wi(e,t)){case"ASC":return[[t,"DESC"]];case"DESC":return[];default:return[[t,"ASC"]]}})()).map(n=>n.join(" ")),$t(e)))}function ep(){const e=Se(),t=Ti(e),n=be(e);return A(Ue,{children:["UNION"," ",c(Pe,{emptyDisplayValue:"DISTINCT",value:t,onChange:o=>{n(r=>{np(r,o)})}})]})}const Ni={Component:ep,emptyNodeData:tp,hasProblem(e,t){return F(e,t).length!==2},query(e,t){const n=F(e,t),[o,r]=n;return op(e,Ti(t),o,r)},querySelectable(e,t){return Ni.query(e,t)},columnNames(e,t){const n=re(F(e,t));return n==null?new Set:ne(e,n)},ColumnControl({columnName:e}){return e}};function tp(){return{type:""}}function Ti(e){return e.data.type}function np(e,t){e.data.type=t}function op(e,t,n,o){return`
  ${ze(e,n)}
  UNION ${t}
  ${ze(e,o)}`}function rp(){return c(Ue,{children:"EXCEPT"})}const Ai={Component:rp,emptyNodeData:sp,hasProblem(e,t){return F(e,t).length!==2},query(e,t){const n=F(e,t),[o,r]=n;return ki(e,"EXCEPT",o,r)},queryAdditionalValues(e,t){const n=F(e,t),[o,r]=n;return ki(e,"INTERSECT",o,r)},querySelectable(e,t){return Ai.query(e,t)},columnNames(e,t){const n=re(F(e,t));return n==null?new Set:ne(e,n)},ColumnControl({columnName:e}){return e}};function sp(){return{}}function ki(e,t,n,o){return`
  ${ze(e,n)}
  ${t}
  ${ze(e,o)}`}function ip(){return c(Ue,{children:"INTERSECT"})}const _i={Component:ip,emptyNodeData:cp,hasProblem(e,t){return F(e,t).length!==2},query(e,t){const n=F(e,t),[o,r]=n;return xo(e,"INTERSECT",o,r)},queryAdditionalValues(e,t){const n=F(e,t),[o,r]=n;return`SELECT * FROM (${xo(e,"EXCEPT",o,r)})
      UNION
      SELECT * FROM (${xo(e,"EXCEPT",r,o)})`},querySelectable(e,t){return _i.query(e,t)},columnNames(e,t){const n=re(F(e,t));return n==null?new Set:ne(e,n)},ColumnControl({columnName:e}){return e}};function cp(){return{}}function xo(e,t,n,o){return`
  ${ze(e,n)}
  ${t}
  ${ze(e,o)}`}const vi={from:zs,join:kh,select:Wh,where:$i,group:Ys,order:Ei,union:Ni,except:Ai,intersect:_i},bo=Us({where:{label:"WHERE",key:"w"},group:{label:"GROUP BY",key:"g"},select:{label:"SELECT",key:"s"},order:{label:"ORDER BY",key:"o"}}),Ri=Us({join:{label:"JOIN"},union:{label:"UNION"},intersect:{label:"INTERSECT"},except:{label:"EXCEPT"}});function Ii(e){const t=vi[e];return eu(t!=null),t}function Ht(e){return{type:e,data:Ii(e).emptyNodeData()}}function He(e){return Ii(e.type)}function ap(e,t){var n,o;return(o=(n=He(t)).results)==null?void 0:o.call(n,e,t)}function lp(e,t){return He(t).hasProblem(e,t)}function up(e,t){return He(t).query(e,t)}function dp(e,t){var n,o;return(o=(n=He(t)).queryAdditionalTables)==null?void 0:o.call(n,e,t)}function fp(e,t){var n,o;return(o=(n=He(t)).queryAdditionalValues)==null?void 0:o.call(n,e,t)}function Re(e,t){return He(t).querySelectable(e,t)}function ze(e,t){return t==null?null:He(t).querySelectable(e,t)}function ne(e,t){return He(t).columnNames(e,t)}function hp(e){return He(e).ColumnControl}function pp(n){var o=n,{children:e}=o,t=de(o,["children"]);return A(Vl,H(u({},t),{children:[c(gp,{}),e]}))}const mp=a.exports.forwardRef((o,n)=>{var r=o,{children:e}=r,t=de(r,["children"]);return c(xp,H(u({},t),{ref:n,children:e}))}),gp=ae(Wl,{backgroundColor:"rgba(0, 0, 0, .15)",position:"fixed",zIndex:10,top:0,right:0,bottom:0,left:0}),xp=ae(ql,{backgroundColor:"$panel",zIndex:11,borderRadius:"$3",boxShadow:"$colors$shadowLight 0px 10px 38px -10px, $colors$shadowDark 0px 10px 20px -15px",position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",minWidth:200,maxHeight:"85vh",padding:"$4",marginTop:"-5vh",willChange:"transform","&:focus":{outline:"none"}}),bp=Gl,Mi="V1";let yo=null;function yp(){const e=()=>{yo!=null&&Oi(yo)};return window.addEventListener("beforeunload",e),()=>{window.removeEventListener("beforeunload",e)}}function $p(e){Ep(e),yo=e}function Cp(){return window.localStorage.getItem(Mi)}const Ep=wp(Oi,1e3);function Oi(e){window.localStorage.setItem(Mi,e)}function wp(e,t){let n=null,o=!1;return function(){let r=this,s=arguments;const i=function(){n=null,o&&(o=!1,e.apply(r,s))},l=n==null;clearTimeout(n),n=setTimeout(i,t),l?e.apply(r,s):o=!0}}function Sp(e){return JSON.stringify(e,Tp)}function Np(e){return JSON.parse(e,Ap)}const xn="$%^";function Tp(e,t){return t instanceof Map?{[xn]:"Map",value:Array.from(t.entries())}:t instanceof Set?{[xn]:"Set",value:Array.from(t.values())}:t}function Ap(e,t){if(typeof t=="object"&&t!==null){if(t[xn]==="Map")return new Map(t.value);if(t[xn]==="Set")return new Set(t.value)}return t}var kp="/seaqull/assets/sql-wasm.19119b55.wasm";function $o(e){return(async()=>{const t=await zl({locateFile:r=>kp}),n=new t.Database(new Uint8Array(e)),o=_p(n);return{db:n,schema:ju(o),tableExists:r=>o.has(r),tableColumns:r=>o.get(r)}})()}function _p(e){return new Map(e.exec('SELECT name, sql FROM sqlite_schema WHERE type="table"')[0].values.map(([t,n])=>[t,vp(n)]))}function vp(e){let t=Gt.language.parser.parse(e).cursor();t.firstChild(),t.firstChild(),t.nextSibling(),t.nextSibling(),t.nextSibling(),t.firstChild();let n=[],o=!0;for(;t.nextSibling()&&!(t.name==="Keyword"&&/^foreign|constraint$/i.test(Co(t,e)));){if(o){const r=t.name==="Brackets";r&&(t.firstChild(),t.nextSibling()),n.push(Co(t,e,t.name==="QuotedIdentifier"||t.name==="String"?1:0)),r&&t.parent(),o=!1}t.name==="Punctuation"&&Co(t,e)===","&&(o=!0)}return n}function Co(e,t,n=0){return t.substring(e.from+n,e.to-n)}const Rp=ae(e=>{const r=e,{newtab:t,children:n}=r,o=de(r,["newtab","children"]);return A("a",H(u(u({},t?{target:"_blank",rel:"noopener noreferrer"}:{}),o),{children:[n,t?c(jl,{style:{display:"inline",marginLeft:2,height:18,paddingBottom:3,verticalAlign:"bottom"}}):null]}))},{cursor:"pointer",alignItems:"center",flexShrink:0,outline:"none",textDecorationLine:"none",textUnderlineOffset:"3px",WebkitTapHighlightColor:"rgba(0,0,0,0)","@hover":{"&:hover":{textDecorationLine:"underline"}},"&:focus":{outlineWidth:"2px",outlineStyle:"solid",outlineOffset:"2px",textDecorationLine:"none",outlineColor:"$blue8"},color:"$blue11",textDecorationColor:"$blue4"});var Ip="/seaqull/assets/dvd_rental.d8ad20bd.db";function Di({defaultOpen:e,children:t}){const[n,o]=a.exports.useState(e),r=()=>{o(!1)};return A(pp,{open:n,onOpenChange:o,children:[t,A(mp,{css:{padding:"$20",borderRadius:"$8"},children:[c("h1",{children:"Welcome to Seaqull(beta)!"}),c("br",{}),A("p",{children:["This is the SQLite version of"," ",c(Rp,{href:"https://github.com/xixixao/seaqull",newtab:!0,children:"Seaqull"}),"."]}),c("p",{children:"Would you like to explore the example database or one of your own?"}),c("br",{}),A(ye,{children:[c(Mp,{onDone:r,children:"Example database"}),c(Ne,{}),c(Op,{onDone:r,children:"Open a database file"})]})]})]})}function Mp({onDone:e,children:t}){const n=lo();return c(Be,{onClick:()=>{(async()=>{const o=await $o(await Li());n(r=>({editorConfig:o,source:{type:"example",name:"dvd_rental.db"}})),e()})()},children:t})}function Op({children:e,onDone:t}){const n=lo();return c(Be,{onClick:()=>{const o=document.createElement("input");o.type="file",o.addEventListener("change",()=>{(async()=>{const r=o.files[0],{name:s}=r,i=await $o(await r.arrayBuffer());n(l=>({editorConfig:i,source:{type:"file",name:s}}))})(),t()}),o.click()},children:e})}async function Li(){return await(await fetch(Ip)).arrayBuffer()}function Dp(){return A(ie,{children:[c(Bp,{}),c(Lp,{})]})}function Lp(){const e=Rt(),t=a.exports.useContext(ao.source);return a.exports.useEffect(()=>{$p(Sp({appState:e,source:t}))},[e,t]),a.exports.useEffect(()=>yp(),[]),null}function Bp(){const[e,t]=a.exports.useState(!0),n=Ge(),o=lo();return a.exports.useEffect(()=>{const r=Np(Cp());if(r==null){t(null);return}const{appState:s,source:i}=r;(async()=>{if(n(l=>u(u({},l),s)),(i==null?void 0:i.type)==="example"){const l=await $o(await Li());o(()=>({editorConfig:l,source:i}))}else t(null)})()},[n,o]),e==null?c(Di,{defaultOpen:!0}):null}function Pp(e){return new Promise(function(t){setTimeout(t,e)})}function Up(){var o;const e=mt(),t=ce(e),n=Q(t);return c(ye,{css:{overflow:"scroll",padding:"0 $8",maxHeight:"100%"},children:(o=n!=null?ap(e,n):null)!=null?o:c(Hp,{})})}function Hp(){const e=rt(),[t,n]=a.exports.useState(null),[o,r]=a.exports.useState(),[s,i]=a.exports.useState(!1);return a.exports.useEffect(()=>{var $;if(e.editorConfig.db==null)return;const l=ce(e),d=l.length>0,f=Q(hr(e));if(f==null&&!d){n(null);return}const x=($=Q(l))!=null?$:f,m=l.length===1,p=(d?l:[x]).map(C=>(m?up:Re)(e,C)).concat(m?dp(e,x):[]).filter(C=>C!=null).slice(0,2),h=[m?fp(e,x):null].filter(C=>C!=null);p.length>0&&i(!0);let y=!1;const g=e.editorConfig.db;return y?void 0:(i(!1),p.length>0&&(n({queries:p,tables:p.map(C=>Ui(g,C)),additionalValues:h.map(C=>Ui(g,C)).filter(C=>!(C instanceof Eo)),appState:e}),r(f!=null&&x!=null&&!St(x,f))),Pp(1e3).then(()=>{y||r(!1)}),()=>{y=!0})},[e]),s&&t==null?c("div",{style:{padding:12},children:"Loading..."}):t==null?null:c(Fp,{updated:o,state:t})}function Fp({updated:e,state:t}){const[n,o]=a.exports.useState("table"),r=c(ye,{justify:"end",children:c(Be,{onClick:()=>{o(n==="table"?"sql":"table")},children:n==="table"?"SQL":"Results"})});return A(ie,{children:[c(we,{css:{display:"inline-flex",table:{animation:e?`${Wp} 1s ease-out`:null}},children:n==="table"?c(qp,{state:t}):c(wo,{background:"$slate2",children:Hi(t.queries[0])})}),c(we,{css:{paddingLeft:"$8",flexGrow:1},children:r}),c(we,{css:{padding:"$8",top:0,right:0,position:"absolute",background:"$panel",borderBottomLeftRadius:"$4"},children:r})]})}const Wp=rd({from:{background:"$lime3"},to:{}}),qp=a.exports.memo(function({state:{appState:t,tables:n,additionalValues:o}}){const r=Q(ce(t));if(n[0]instanceof Eo)return c(wo,{background:"$yellow3",label:"No results from:",children:n[0].sql});const s=n.find(i=>i instanceof Pi);return s!=null?c(wo,{background:"$red3",label:s.error.toString()+" in:",children:s.sql}):n.map(({columns:i,values:l},d)=>{const f=d===0,x=o[d];return A(zp,{css:{textAlign:"start",whiteSpace:"nowrap",th:{fontWeight:600,height:"36px"},color:f?null:"$slate11"},children:[c("thead",{children:c("tr",{children:i.map((m,p)=>c("th",{children:r==null?m:Gp(r,m,f,p)},p))})}),c(Bi,{values:l}),x!=null?c(Bi,{css:{color:"$slate11"},values:x.values}):null]},d)})});function Gp(e,t,n,o){const r=hp(e);return c(r,{node:e,columnName:t,isPrimary:n,columnIndex:o})}function Bi({css:e,values:t}){return c(Vp,{css:e,children:t.map((n,o)=>c("tr",{children:n.map((r,s)=>c("td",{children:r},s))},o))})}const Vp=ae("tbody"),zp=ae("table");class Pi{constructor(t,n){this.sql=t,this.error=n}}class Eo{constructor(t){this.sql=t}}function Ui(e,t){let n=null;try{n=e.exec(Hi(t))}catch(o){return new Pi(t,o)}return n.length===0?new Eo(t):n[0]}function Hi(e){return e+(/limit \d+\s*$/i.test(e)?"":" LIMIT 100")}function wo({background:e,label:t,children:n}){return c(we,{css:{paddingTop:"$8"},children:A(Ot,{css:{background:e,padding:"$12",borderRadius:"$4"},children:[t,t!=null?c(qs,{}):null,c(jp,{children:n})]})})}const jp=ae(n=>{var o=n,{children:e}=o,t=de(o,["children"]);return c("pre",H(u({},t),{children:Zl(e!=null?e:"",{language:"postgresql"})}))},{lineHeight:1,fontFamily:"Menlo, Consolas, Monaco, monospace",fontSize:"12px"});function Zp(){return c(Qf,{children:A(Zf,{topRightUI:c(Qp,{}),topUI:c(mh,{}),nodeTypes:Pn(vi,e=>e.Component),onDoubleClick:Kp,onKeyDown:Xp,children:[c(Dp,{}),c(Up,{})]})})}function Qp(){const e=a.exports.useContext(ao.source);return c(Di,{children:c(bp,{asChild:!0,children:A(ye,{align:"center",children:[e!=null?c(Be,{children:e.name}):null,c(Ve,{children:c(Ql,{})})]})})})}function Kp(e,t){return ud(e,Ht("from"),t)}const Jp=new Map(ve(bo,({key:e},t)=>[e,t]));function Xp(e,t){if(Q(ce(e))==null)return;const o=Jp.get(t.altKey?t.code.substr(3,1).toLowerCase():t.key);if(o!=null)return hh(e,o)}Jl(c(Zp,{}));
